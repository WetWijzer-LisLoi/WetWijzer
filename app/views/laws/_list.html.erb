<% if @laws.present? %>
  <div class="bg-white dark:bg-midnight rounded-xl shadow-lg overflow-hidden w-full">
    <%# Sort controls bar with search alert button %>
    <div class="flex items-center justify-between px-4 py-2 bg-gray-50 dark:bg-navy/50 border-b border-gray-200 dark:border-sky/20">
      <div class="flex items-center gap-2" data-controller="search-alert">
        <% if params[:title].present? %>
          <button type="button"
                  class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg text-[var(--accent-700)] dark:text-[var(--accent-300)] hover:bg-[var(--accent-500)]/10 border border-[var(--accent-500)]/20 transition-colors duration-150"
                  data-action="click->search-alert#showModal"
                  title="<%= t('search_alerts.subscribe_tooltip') %>">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
            <span class="hidden sm:inline"><%= t('search_alerts.subscribe') %></span>
          </button>
        <% end %>
      </div>
      <%= render 'laws/sort_dropdown' %>
    </div>
    
    <div class="overflow-x-auto w-full">
      <table class="w-full">
        <thead class="bg-gradient-to-r from-[var(--accent-500)]/5 to-[var(--accent-500)]/10 dark:from-[var(--accent-500)]/20 dark:to-[var(--accent-500)]/30">
          <tr class="border-b-2 border-[var(--accent-500)]/20 dark:border-[var(--accent-500)]/50">
            <th class="w-28 px-2 py-3 text-center text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider whitespace-nowrap">
              <div class="grid w-full place-items-center">
                <%= sort_link_to t(:date), 'date' %>
              </div>
            </th>
            <th class="w-full px-4 py-3 text-left text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider">
              <%= sort_link_to t(:title), 'title' %>
            </th>
            <th class="w-14 px-1 py-3 text-center text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider whitespace-nowrap">
              <span class="sr-only"><%= t(:details).capitalize() %></span>
              <span title="<%= t(:details).capitalize() %>">D</span>
            </th>
            <th class="w-14 px-1 py-3 text-center text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider whitespace-nowrap">
              <span class="sr-only">Justel</span>
              <span title="Justel">J</span>
            </th>
            <th class="w-14 px-1 py-3 text-center text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider whitespace-nowrap">
              <span class="sr-only">Reflex</span>
              <span title="Reflex">R</span>
            </th>
            <th class="w-10 px-1 py-3 text-center text-xs leading-4 font-medium text-gray-700 dark:text-mist uppercase tracking-wider whitespace-nowrap no-print">
              <span class="sr-only"><%= t('bookmarks.title') %></span>
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" title="<%= t('bookmarks.title') %>">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
              </svg>
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-[var(--border-divider)] dark:bg-navy">
          <%= render partial: 'laws/law', collection: @laws %>
        </tbody>
      </table>
    </div>
    <div class="px-6 py-3 border-t border-gray-200 dark:border-[var(--border-header)] bg-white dark:bg-midnight">
      <%= render 'shared/pagy/nav', pagy: @pagy %>
    </div>
    
    <% if params[:title].present? %>
      <div class="mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl border border-blue-200 dark:border-blue-800">
        <div class="flex items-start gap-3">
          <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-800 dark:text-gray-200 mb-2">
              <%= I18n.locale == :fr ? 'Rechercher aussi dans d\'autres sources' : 'Zoek ook in andere bronnen' %>
            </p>
            <div class="flex flex-wrap gap-2">
              <a href="<%= rechtspraak_path(q: params[:title]) %>" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-800/40 transition-colors">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/>
                </svg>
                <%= I18n.locale == :fr ? 'Jurisprudence' : 'Rechtspraak' %>
              </a>
              <span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300 opacity-75 cursor-not-allowed" title="<%= I18n.locale == :fr ? 'BientÃ´t disponible' : 'Binnenkort beschikbaar' %>">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
                <%= I18n.locale == :fr ? 'Travaux parlementaires' : 'Parlementaire stukken' %>
              </span>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="bg-white dark:bg-midnight rounded-xl shadow-lg p-8">
    <%= render 'shared/no_content' %>
  </div>
<% end %>