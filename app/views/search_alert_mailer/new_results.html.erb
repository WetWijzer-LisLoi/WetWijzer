<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: linear-gradient(135deg, #2563eb, #1d4ed8); color: white; padding: 24px; border-radius: 8px 8px 0 0; text-align: center; }
    .content { background: #f9fafb; padding: 24px; border: 1px solid #e5e7eb; border-top: none; }
    .button { display: inline-block; background: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; }
    .footer { margin-top: 24px; padding-top: 16px; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; }
    .law-item { background: white; border: 1px solid #e5e7eb; border-radius: 6px; padding: 12px 16px; margin: 12px 0; }
    .law-title { font-weight: 500; color: #1d4ed8; text-decoration: none; }
    .law-meta { font-size: 13px; color: #6b7280; margin-top: 4px; }
    .badge { display: inline-block; background: #dbeafe; color: #1d4ed8; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 500; }
  </style>
</head>
<body>
  <div class="header">
    <h1 style="margin: 0; font-size: 24px;"><%= I18n.locale == :fr ? 'LisLoi' : 'WetWijzer' %></h1>
  </div>
  
  <div class="content">
    <h2><%= I18n.t('search_alerts.mailer.new_results.title', count: @laws.size) %></h2>
    
    <p>
      <%= I18n.t('search_alerts.mailer.new_results.intro', query: @alert.query) %>
    </p>
    
    <% @laws.first(10).each do |law| %>
      <div class="law-item">
        <a href="<%= law_url(law) %>" class="law-title">
          <%= truncate(law.title, length: 100) %>
        </a>
        <div class="law-meta">
          <span class="badge"><%= helpers.law_type_name(law.type_id) %></span>
          &middot; <%= law.publication_date&.strftime('%d/%m/%Y') %>
          &middot; NUMAC <%= law.numac %>
        </div>
      </div>
    <% end %>
    
    <% if @laws.size > 10 %>
      <p style="text-align: center; color: #6b7280;">
        <%= I18n.t('search_alerts.mailer.new_results.more_results', count: @laws.size - 10) %>
      </p>
    <% end %>
    
    <p style="text-align: center; margin: 24px 0;">
      <a href="<%= @search_url %>" class="button">
        <%= I18n.t('search_alerts.mailer.new_results.view_all') %>
      </a>
    </p>
    
    <div class="footer">
      <p>
        <%= I18n.t('search_alerts.mailer.new_results.frequency', frequency: I18n.t("search_alerts.frequency.#{@alert.frequency}")) %>
      </p>
      <p>
        <a href="<%= @unsubscribe_url %>"><%= I18n.t('search_alerts.mailer.unsubscribe') %></a>
      </p>
    </div>
  </div>
</body>
</html>
