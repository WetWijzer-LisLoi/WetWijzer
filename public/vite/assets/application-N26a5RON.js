var Gi=Object.defineProperty;var gr=r=>{throw TypeError(r)};var Xi=(r,t,e)=>t in r?Gi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var g=(r,t,e)=>Xi(r,typeof t!="symbol"?t+"":t,e),ws=(r,t,e)=>t.has(r)||gr("Cannot "+e);var B=(r,t,e)=>(ws(r,t,"read from private field"),e?e.call(r):t.get(r)),U=(r,t,e)=>t.has(r)?gr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),K=(r,t,e,s)=>(ws(r,t,"write to private field"),s?s.call(r,e):t.set(r,e),e),N=(r,t,e)=>(ws(r,t,"access private method"),e);/*!
Turbo 8.0.19
Copyright Â© 2025 37signals LLC
 */(function(r){if(typeof r.requestSubmit=="function")return;r.requestSubmit=function(s){s?(t(s,this),s.click()):(s=document.createElement("input"),s.type="submit",s.hidden=!0,this.appendChild(s),s.click(),this.removeChild(s))};function t(s,n){s instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),s.type=="submit"||e(TypeError,"The specified element is not a submit button"),s.form==n||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(s,n,i){throw new s("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+n+".",i)}})(HTMLFormElement.prototype);const Vr=new WeakMap;function Zi(r){const t=r instanceof Element?r:r instanceof Node?r.parentElement:null,e=t?t.closest("input, button"):null;return(e==null?void 0:e.type)=="submit"?e:null}function Qi(r){const t=Zi(r.target);t&&t.form&&Vr.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let r=window.Event.prototype;if("SubmitEvent"in window){const t=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in t))r=t;else return}addEventListener("click",Qi,!0),Object.defineProperty(r,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Vr.get(this.target)}})})();const Pe={eager:"eager",lazy:"lazy"},es=class es extends HTMLElement{constructor(){super();g(this,"loaded",Promise.resolve());this.delegate=new es.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return ea(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,s;return(s=(e=this.ownerDocument)==null?void 0:e.documentElement)==null?void 0:s.hasAttribute("data-turbo-preview")}};g(es,"delegateConstructor");let fe=es;function ea(r){switch(r.toLowerCase()){case"lazy":return Pe.lazy;default:return Pe.eager}}const ta={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function ut(r){if(r.getAttribute("data-turbo-eval")=="false")return r;{const t=document.createElement("script"),e=zr();return e&&(t.nonce=e),t.textContent=r.textContent,t.async=!1,sa(t,r),t}}function sa(r,t){for(const{name:e,value:s}of t.attributes)r.setAttribute(e,s)}function ra(r){const t=document.createElement("template");return t.innerHTML=r,t.content}function G(r,{target:t,cancelable:e,detail:s}={}){const n=new CustomEvent(r,{cancelable:e,bubbles:!0,composed:!0,detail:s});return t&&t.isConnected?t.dispatchEvent(n):document.documentElement.dispatchEvent(n),n}function pr(r){r.preventDefault(),r.stopImmediatePropagation()}function dt(){return document.visibilityState==="hidden"?jr():Nr()}function Nr(){return new Promise(r=>requestAnimationFrame(()=>r()))}function jr(){return new Promise(r=>setTimeout(()=>r(),0))}function na(){return Promise.resolve()}function Hr(r=""){return new DOMParser().parseFromString(r,"text/html")}function qr(r,...t){const e=ia(r,t).replace(/^\n/,"").split(`
`),s=e[0].match(/^\s+/),n=s?s[0].length:0;return e.map(i=>i.slice(n)).join(`
`)}function ia(r,t){return r.reduce((e,s,n)=>{const i=t[n]==null?"":t[n];return e+s+i},"")}function Le(){return Array.from({length:36}).map((r,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Kt(r,...t){for(const e of t.map(s=>s==null?void 0:s.getAttribute(r)))if(typeof e=="string")return e;return null}function aa(r,...t){return t.some(e=>e&&e.hasAttribute(r))}function Yt(...r){for(const t of r)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function Jt(...r){for(const t of r)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function oa(r,t=2e3){return new Promise(e=>{const s=()=>{r.removeEventListener("error",s),r.removeEventListener("load",s),e()};r.addEventListener("load",s,{once:!0}),r.addEventListener("error",s,{once:!0}),setTimeout(e,t)})}function $r(r){switch(r){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function la(r){return r=="advance"||r=="replace"||r=="restore"}function Re(...r){const t=Kt("data-turbo-action",...r);return la(t)?t:null}function Ys(r){return document.querySelector(`meta[name="${r}"]`)}function Gt(r){const t=Ys(r);return t&&t.content}function zr(){const r=Ys("csp-nonce");if(r){const{nonce:t,content:e}=r;return t==""?e:t}}function ca(r,t){let e=Ys(r);return e||(e=document.createElement("meta"),e.setAttribute("name",r),document.head.appendChild(e)),e.setAttribute("content",t),e}function Ue(r,t){var e;if(r instanceof Element)return r.closest(t)||Ue(r.assignedSlot||((e=r.getRootNode())==null?void 0:e.host),t)}function Js(r){return!!r&&r.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof r.focus=="function"}function Ur(r){return Array.from(r.querySelectorAll("[autofocus]")).find(Js)}async function da(r,t){const e=t();r(),await Nr();const s=t();return[e,s]}function Wr(r){if(r==="_blank")return!1;if(r){for(const t of document.getElementsByName(r))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Kr(r){const t=Ue(r,"a[href], a[xlink\\:href]");return!t||t.hasAttribute("download")||t.hasAttribute("target")&&t.target!=="_self"?null:t}function Yr(r){return se(r.getAttribute("href")||"")}function ha(r,t){let e=null;return(...s)=>{const n=()=>r.apply(this,s);clearTimeout(e),e=setTimeout(n,t)}}const ua={"aria-disabled":{beforeSubmit:r=>{r.setAttribute("aria-disabled","true"),r.addEventListener("click",pr)},afterSubmit:r=>{r.removeAttribute("aria-disabled"),r.removeEventListener("click",pr)}},disabled:{beforeSubmit:r=>r.disabled=!0,afterSubmit:r=>r.disabled=!1}};var gt;class fa{constructor(t){U(this,gt,null);Object.assign(this,t)}get submitter(){return B(this,gt)}set submitter(t){K(this,gt,ua[t]||t)}}gt=new WeakMap;const ma=new fa({mode:"on",submitter:"disabled"}),Q={drive:ta,forms:ma};function se(r){return new URL(r.toString(),document.baseURI)}function Be(r){let t;if(r.hash)return r.hash.slice(1);if(t=r.href.match(/#(.*)$/))return t[1]}function Gs(r,t){const e=(t==null?void 0:t.getAttribute("formaction"))||r.getAttribute("action")||r.action;return se(e)}function ga(r){return(ya(r).match(/\.[^.]*$/)||[])[0]||""}function pa(r,t){const e=br(t.origin+t.pathname);return br(r.href)===e||r.href.startsWith(e)}function ke(r,t){return pa(r,t)&&!Q.drive.unvisitableExtensions.has(ga(r))}function Ls(r){const t=Be(r);return t!=null?r.href.slice(0,-(t.length+1)):r.href}function Bt(r){return Ls(r)}function Jr(r,t){return se(r).href==se(t).href}function ba(r){return r.pathname.split("/").slice(1)}function ya(r){return ba(r).slice(-1)[0]}function br(r){return r.endsWith("/")?r:r+"/"}class rs{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return se(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}class va extends Set{constructor(t){super(),this.maxSize=t}add(t){if(this.size>=this.maxSize){const s=this.values().next().value;this.delete(s)}super.add(t)}}const Gr=new va(20);function Xs(r,t={}){const e=new Headers(t.headers||{}),s=Le();return Gr.add(s),e.append("X-Turbo-Request-Id",s),window.fetch(r,{...t,headers:e})}function ns(r){switch(r.toLowerCase()){case"get":return ce.get;case"post":return ce.post;case"put":return ce.put;case"patch":return ce.patch;case"delete":return ce.delete}}const ce={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Xr(r){switch(r.toLowerCase()){case Ee.multipart:return Ee.multipart;case Ee.plain:return Ee.plain;default:return Ee.urlEncoded}}const Ee={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var pt,et,Zr,Qr;class rt{constructor(t,e,s,n=new URLSearchParams,i=null,a=Ee.urlEncoded){U(this,et);g(this,"abortController",new AbortController);U(this,pt,t=>{});var f;const[l,d]=yr(se(s),e,n,a);this.delegate=t,this.url=l,this.target=i,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:e.toUpperCase(),headers:{...this.defaultHeaders},body:d,signal:this.abortSignal,referrer:(f=this.delegate.referrer)==null?void 0:f.href},this.enctype=a}get method(){return this.fetchOptions.method}set method(t){const e=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,s=ns(t)||ce.get;this.url.search="";const[n,i]=yr(this.url,s,e,this.enctype);this.url=n,this.fetchOptions.body=i,this.fetchOptions.method=s.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(t){this.fetchOptions.headers=t}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(t){this.fetchOptions.body=t}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this);const e=await N(this,et,Zr).call(this,t);try{this.delegate.requestStarted(this),e.detail.fetchRequest?this.response=e.detail.fetchRequest.response:this.response=Xs(this.url.href,t);const s=await this.response;return await this.receive(s)}catch(s){if(s.name!=="AbortError")throw N(this,et,Qr).call(this,s)&&this.delegate.requestErrored(this,s),s}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new rs(t);return G("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return is(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}}pt=new WeakMap,et=new WeakSet,Zr=async function(t){const e=new Promise(n=>K(this,pt,n)),s=G("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:B(this,pt)},target:this.target});return this.url=s.detail.url,s.defaultPrevented&&await e,s},Qr=function(t){return!G("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented};function is(r){return ns(r)==ce.get}function yr(r,t,e,s){const n=Array.from(e).length>0?new URLSearchParams(en(e)):r.searchParams;return is(t)?[wa(r,n),null]:s==Ee.urlEncoded?[r,n]:[r,e]}function en(r){const t=[];for(const[e,s]of r)s instanceof File||t.push([e,s]);return t}function wa(r,t){const e=new URLSearchParams(en(t));return r.search=e.toString(),r}class Ta{constructor(t,e){g(this,"started",!1);g(this,"intersect",t=>{const e=t.slice(-1)[0];e!=null&&e.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class Ne{static wrap(t){return typeof t=="string"?new this(ra(t)):t}constructor(t){this.fragment=ka(t)}}g(Ne,"contentType","text/vnd.turbo-stream.html");function ka(r){for(const t of r.querySelectorAll("turbo-stream")){const e=document.importNode(t,!0);for(const s of e.templateElement.content.querySelectorAll("script"))s.replaceWith(ut(s));t.replaceWith(e)}return r}const Ea=100;var Fe,ve;class Sa{constructor(){U(this,Fe,null);U(this,ve,null)}get(t){if(B(this,ve)&&B(this,ve).url===t&&B(this,ve).expire>Date.now())return B(this,ve).request}setLater(t,e,s){this.clear(),K(this,Fe,setTimeout(()=>{e.perform(),this.set(t,e,s),K(this,Fe,null)},Ea))}set(t,e,s){K(this,ve,{url:t,request:e,expire:new Date(new Date().getTime()+s)})}clear(){B(this,Fe)&&clearTimeout(B(this,Fe)),K(this,ve,null)}}Fe=new WeakMap,ve=new WeakMap;const xa=10*1e3,ze=new Sa,He={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class as{constructor(t,e,s,n=!1){g(this,"state",He.initialized);const i=Da(e,s),a=_a(Ma(e,s),i),l=Ca(e,s),d=Oa(e,s);this.delegate=t,this.formElement=e,this.submitter=s,this.fetchRequest=new rt(this,i,a,l,e,d),this.mustRedirect=n}static confirmMethod(t){return Promise.resolve(confirm(t))}get method(){return this.fetchRequest.method}set method(t){this.fetchRequest.method=t}get action(){return this.fetchRequest.url.toString()}set action(t){this.fetchRequest.url=se(t)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:t,requesting:e}=He,s=Kt("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof s=="string"&&!await(typeof Q.forms.confirm=="function"?Q.forms.confirm:as.confirmMethod)(s,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=He;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=La(Gt("csrf-param"))||Gt("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(Ne.contentType)}requestStarted(t){this.state=He.waiting,this.submitter&&Q.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),Yt(this.formElement),G("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){ze.clear(),this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError){this.delegate.formSubmissionFailedWithResponse(this,e);return}if(ze.clear(),this.requestMustRedirect(t)&&Aa(e)){const s=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,s)}else this.state=He.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=He.stopped,this.submitter&&Q.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),Jt(this.formElement),G("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||aa("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return(t=this.submitter)==null?void 0:t.getAttribute("data-turbo-submits-with")}}function Ca(r,t){const e=new FormData(r),s=t==null?void 0:t.getAttribute("name"),n=t==null?void 0:t.getAttribute("value");return s&&e.append(s,n||""),e}function La(r){if(r!=null){const e=(document.cookie?document.cookie.split("; "):[]).find(s=>s.startsWith(r));if(e){const s=e.split("=").slice(1).join("=");return s?decodeURIComponent(s):void 0}}}function Aa(r){return r.statusCode==200&&!r.redirected}function Ma(r,t){const e=typeof r.action=="string"?r.action:null;return t!=null&&t.hasAttribute("formaction")?t.getAttribute("formaction")||"":r.getAttribute("action")||e||""}function _a(r,t){const e=se(r);return is(t)&&(e.search=""),e}function Da(r,t){const e=(t==null?void 0:t.getAttribute("formmethod"))||r.getAttribute("method")||"";return ns(e.toLowerCase())||ce.get}function Oa(r,t){return Xr((t==null?void 0:t.getAttribute("formenctype"))||r.enctype)}class os{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Ur(this.element)}get permanentElements(){return sn(this.element)}getPermanentElementById(t){return tn(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const s of this.permanentElements){const{id:n}=s,i=t.getPermanentElementById(n);i&&(e[n]=[s,i])}return e}}function tn(r,t){return r.querySelector(`#${t}[data-turbo-permanent]`)}function sn(r){return r.querySelectorAll("[id][data-turbo-permanent]")}class Zs{constructor(t,e){g(this,"started",!1);g(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});g(this,"submitBubbled",t=>{if(!t.defaultPrevented){const e=t.target instanceof HTMLFormElement?t.target:void 0,s=t.submitter||void 0;e&&Pa(e,s)&&Fa(e,s)&&this.delegate.willSubmitForm(e,s)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,s))}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function Pa(r,t){return((t==null?void 0:t.getAttribute("formmethod"))||r.getAttribute("method"))!="dialog"}function Fa(r,t){const e=(t==null?void 0:t.getAttribute("formtarget"))||r.getAttribute("target");return Wr(e)}var bt,yt;class rn{constructor(t,e){U(this,bt,t=>{});U(this,yt,t=>{});this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.focusElement(e),this.scrollToElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(Be(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:s,willRender:n,newSnapshot:i}=t,a=n;if(s)try{this.renderPromise=new Promise(m=>K(this,bt,m)),this.renderer=t,await this.prepareToRenderSnapshot(t);const l=new Promise(m=>K(this,yt,m)),d={resume:B(this,yt),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(i,d)||await l,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(i,e,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,B(this,bt).call(this,void 0),delete this.renderPromise}else a&&this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(t){this.element.setAttribute("data-turbo-visit-direction",t)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}bt=new WeakMap,yt=new WeakMap;class Ia extends rn{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new os(this.element)}}class nn{constructor(t,e){g(this,"clickBubbled",t=>{this.clickEventIsSignificant(t)?this.clickEvent=t:delete this.clickEvent});g(this,"linkClicked",t=>{this.clickEvent&&this.clickEventIsSignificant(t)&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent});g(this,"willVisit",t=>{delete this.clickEvent});this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(t){var n;const e=t.composed?(n=t.target)==null?void 0:n.parentElement:t.target,s=Kr(e)||e;return s instanceof Element&&s.closest("turbo-frame, html")==this.element}}class an{constructor(t,e){g(this,"started",!1);g(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});g(this,"clickBubbled",t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){const e=t.composedPath&&t.composedPath()[0]||t.target,s=Kr(e);if(s&&Wr(s.target)){const n=Yr(s);this.delegate.willFollowLinkToLocation(s,n,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(s,n))}}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}}class on{constructor(t,e){this.delegate=t,this.linkInterceptor=new an(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(t,e){return!1}prefetchAndCacheRequestToLocation(t,e){}willFollowLinkToLocation(t,e,s){return this.delegate.willSubmitFormLinkToLocation(t,e,s)&&(t.hasAttribute("data-turbo-method")||t.hasAttribute("data-turbo-stream"))}followedLinkToLocation(t,e){const s=document.createElement("form"),n="hidden";for(const[k,w]of e.searchParams)s.append(Object.assign(document.createElement("input"),{type:n,name:k,value:w}));const i=Object.assign(e,{search:""});s.setAttribute("data-turbo","true"),s.setAttribute("action",i.href),s.setAttribute("hidden","");const a=t.getAttribute("data-turbo-method");a&&s.setAttribute("method",a);const l=t.getAttribute("data-turbo-frame");l&&s.setAttribute("data-turbo-frame",l);const d=Re(t);d&&s.setAttribute("data-turbo-action",d);const f=t.getAttribute("data-turbo-confirm");f&&s.setAttribute("data-turbo-confirm",f),t.hasAttribute("data-turbo-stream")&&s.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,s),document.body.appendChild(s),s.addEventListener("turbo:submit-end",()=>s.remove(),{once:!0}),requestAnimationFrame(()=>s.requestSubmit())}}class ln{static async preservingPermanentElements(t,e,s){const n=new this(t,e);n.enter(),await s(),n.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,s]=this.permanentElementMap[t];this.delegate.enteringBardo(e,s),this.replaceNewPermanentElementWithPlaceholder(s)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=Ra(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);e==null||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function Ra(r){const t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",r.id),t}var we;class Qs{constructor(t,e,s,n=!0){U(this,we,null);this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=s,this.willRender=n,this.renderElement=this.constructor.renderElement,this.promise=new Promise((i,a)=>this.resolvingFunctions={resolve:i,reject:a})}static renderElement(t,e){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await ln.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const t=this.connectedSnapshot.firstAutofocusableElement;t&&t.focus()}}enteringBardo(t){B(this,we)||t.contains(this.currentSnapshot.activeElement)&&K(this,we,this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(B(this,we))&&B(this,we)instanceof HTMLElement&&(B(this,we).focus(),K(this,we,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}we=new WeakMap;class ls extends Qs{static renderElement(t,e){var a;const s=document.createRange();s.selectNodeContents(t),s.deleteContents();const n=e,i=(a=n.ownerDocument)==null?void 0:a.createRange();i&&(i.selectNodeContents(n),t.appendChild(i.extractContents()))}constructor(t,e,s,n,i,a=!0){super(e,s,n,i,a),this.delegate=t}get shouldRender(){return!0}async render(){await dt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await dt(),this.focusFirstAutofocusableElement(),await dt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const t=this.currentElement.firstElementChild,e=Ba(this.currentElement.getAttribute("data-autoscroll-block"),"end"),s=Va(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:s}),!0}return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=ut(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function Ba(r,t){return r=="end"||r=="start"||r=="center"||r=="nearest"?r:t}function Va(r,t){return r=="auto"||r=="smooth"?r:t}var Na=(function(){const r=()=>{},t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:r,afterNodeAdded:r,beforeNodeMorphed:r,afterNodeMorphed:r,beforeNodeRemoved:r,afterNodeRemoved:r,beforeAttributeUpdated:r},head:{style:"merge",shouldPreserve:w=>w.getAttribute("im-preserve")==="true",shouldReAppend:w=>w.getAttribute("im-re-append")==="true",shouldRemove:r,afterHeadMorphed:r},restoreFocus:!0};function e(w,C,S={}){w=m(w);const x=k(C),_=f(w,x,S),A=n(_,()=>l(_,w,x,y=>y.morphStyle==="innerHTML"?(i(y,w,x),Array.from(w.childNodes)):s(y,w,x)));return _.pantry.remove(),A}function s(w,C,S){const x=k(C);return i(w,x,S,C,C.nextSibling),Array.from(x.childNodes)}function n(w,C){var v;if(!w.config.restoreFocus)return C();let S=document.activeElement;if(!(S instanceof HTMLInputElement||S instanceof HTMLTextAreaElement))return C();const{id:x,selectionStart:_,selectionEnd:A}=S,y=C();return x&&x!==((v=document.activeElement)==null?void 0:v.getAttribute("id"))&&(S=w.target.querySelector(`[id="${x}"]`),S==null||S.focus()),S&&!S.selectionEnd&&A&&S.setSelectionRange(_,A),y}const i=(function(){function w(u,p,T,E=null,O=null){p instanceof HTMLTemplateElement&&T instanceof HTMLTemplateElement&&(p=p.content,T=T.content),E||(E=p.firstChild);for(const D of T.childNodes){if(E&&E!=O){const R=S(u,D,E,O);if(R){R!==E&&_(u,E,R),a(R,D,u),E=R.nextSibling;continue}}if(D instanceof Element){const R=D.getAttribute("id");if(u.persistentIds.has(R)){const z=A(p,R,E,u);a(z,D,u),E=z.nextSibling;continue}}const I=C(p,D,E,u);I&&(E=I.nextSibling)}for(;E&&E!=O;){const D=E;E=E.nextSibling,x(u,D)}}function C(u,p,T,E){if(E.callbacks.beforeNodeAdded(p)===!1)return null;if(E.idMap.has(p)){const O=document.createElement(p.tagName);return u.insertBefore(O,T),a(O,p,E),E.callbacks.afterNodeAdded(O),O}else{const O=document.importNode(p,!0);return u.insertBefore(O,T),E.callbacks.afterNodeAdded(O),O}}const S=(function(){function u(E,O,D,I){let R=null,z=O.nextSibling,ee=0,te=D;for(;te&&te!=I;){if(T(te,O)){if(p(E,te,O))return te;R===null&&(E.idMap.has(te)||(R=te))}if(R===null&&z&&T(te,z)&&(ee++,z=z.nextSibling,ee>=2&&(R=void 0)),E.activeElementAndParents.includes(te))break;te=te.nextSibling}return R||null}function p(E,O,D){let I=E.idMap.get(O),R=E.idMap.get(D);if(!R||!I)return!1;for(const z of I)if(R.has(z))return!0;return!1}function T(E,O){var R,z,ee;const D=E,I=O;return D.nodeType===I.nodeType&&D.tagName===I.tagName&&(!((R=D.getAttribute)!=null&&R.call(D,"id"))||((z=D.getAttribute)==null?void 0:z.call(D,"id"))===((ee=I.getAttribute)==null?void 0:ee.call(I,"id")))}return u})();function x(u,p){var T;if(u.idMap.has(p))v(u.pantry,p,null);else{if(u.callbacks.beforeNodeRemoved(p)===!1)return;(T=p.parentNode)==null||T.removeChild(p),u.callbacks.afterNodeRemoved(p)}}function _(u,p,T){let E=p;for(;E&&E!==T;){let O=E;E=E.nextSibling,x(u,O)}return E}function A(u,p,T,E){var D,I;const O=((I=(D=E.target).getAttribute)==null?void 0:I.call(D,"id"))===p&&E.target||E.target.querySelector(`[id="${p}"]`)||E.pantry.querySelector(`[id="${p}"]`);return y(O,E),v(u,O,T),O}function y(u,p){const T=u.getAttribute("id");for(;u=u.parentNode;){let E=p.idMap.get(u);E&&(E.delete(T),E.size||p.idMap.delete(u))}}function v(u,p,T){if(u.moveBefore)try{u.moveBefore(p,T)}catch{u.insertBefore(p,T)}else u.insertBefore(p,T)}return w})(),a=(function(){function w(y,v,u){return u.ignoreActive&&y===document.activeElement?null:(u.callbacks.beforeNodeMorphed(y,v)===!1||(y instanceof HTMLHeadElement&&u.head.ignore||(y instanceof HTMLHeadElement&&u.head.style!=="morph"?d(y,v,u):(C(y,v,u),A(y,u)||i(u,y,v))),u.callbacks.afterNodeMorphed(y,v)),y)}function C(y,v,u){let p=v.nodeType;if(p===1){const T=y,E=v,O=T.attributes,D=E.attributes;for(const I of D)_(I.name,T,"update",u)||T.getAttribute(I.name)!==I.value&&T.setAttribute(I.name,I.value);for(let I=O.length-1;0<=I;I--){const R=O[I];if(R&&!E.hasAttribute(R.name)){if(_(R.name,T,"remove",u))continue;T.removeAttribute(R.name)}}A(T,u)||S(T,E,u)}(p===8||p===3)&&y.nodeValue!==v.nodeValue&&(y.nodeValue=v.nodeValue)}function S(y,v,u){if(y instanceof HTMLInputElement&&v instanceof HTMLInputElement&&v.type!=="file"){let p=v.value,T=y.value;x(y,v,"checked",u),x(y,v,"disabled",u),v.hasAttribute("value")?T!==p&&(_("value",y,"update",u)||(y.setAttribute("value",p),y.value=p)):_("value",y,"remove",u)||(y.value="",y.removeAttribute("value"))}else if(y instanceof HTMLOptionElement&&v instanceof HTMLOptionElement)x(y,v,"selected",u);else if(y instanceof HTMLTextAreaElement&&v instanceof HTMLTextAreaElement){let p=v.value,T=y.value;if(_("value",y,"update",u))return;p!==T&&(y.value=p),y.firstChild&&y.firstChild.nodeValue!==p&&(y.firstChild.nodeValue=p)}}function x(y,v,u,p){const T=v[u],E=y[u];if(T!==E){const O=_(u,y,"update",p);O||(y[u]=v[u]),T?O||y.setAttribute(u,""):_(u,y,"remove",p)||y.removeAttribute(u)}}function _(y,v,u,p){return y==="value"&&p.ignoreActiveValue&&v===document.activeElement?!0:p.callbacks.beforeAttributeUpdated(y,v,u)===!1}function A(y,v){return!!v.ignoreActiveValue&&y===document.activeElement&&y!==document.body}return w})();function l(w,C,S,x){if(w.head.block){const _=C.querySelector("head"),A=S.querySelector("head");if(_&&A){const y=d(_,A,w);return Promise.all(y).then(()=>{const v=Object.assign(w,{head:{block:!1,ignore:!0}});return x(v)})}}return x(w)}function d(w,C,S){let x=[],_=[],A=[],y=[],v=new Map;for(const p of C.children)v.set(p.outerHTML,p);for(const p of w.children){let T=v.has(p.outerHTML),E=S.head.shouldReAppend(p),O=S.head.shouldPreserve(p);T||O?E?_.push(p):(v.delete(p.outerHTML),A.push(p)):S.head.style==="append"?E&&(_.push(p),y.push(p)):S.head.shouldRemove(p)!==!1&&_.push(p)}y.push(...v.values());let u=[];for(const p of y){let T=document.createRange().createContextualFragment(p.outerHTML).firstChild;if(S.callbacks.beforeNodeAdded(T)!==!1){if("href"in T&&T.href||"src"in T&&T.src){let E,O=new Promise(function(D){E=D});T.addEventListener("load",function(){E()}),u.push(O)}w.appendChild(T),S.callbacks.afterNodeAdded(T),x.push(T)}}for(const p of _)S.callbacks.beforeNodeRemoved(p)!==!1&&(w.removeChild(p),S.callbacks.afterNodeRemoved(p));return S.head.afterHeadMorphed(w,{added:x,kept:A,removed:_}),u}const f=(function(){function w(u,p,T){const{persistentIds:E,idMap:O}=y(u,p),D=C(T),I=D.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(I))throw`Do not understand how to morph style ${I}`;return{target:u,newContent:p,config:D,morphStyle:I,ignoreActive:D.ignoreActive,ignoreActiveValue:D.ignoreActiveValue,restoreFocus:D.restoreFocus,idMap:O,persistentIds:E,pantry:S(),activeElementAndParents:x(u),callbacks:D.callbacks,head:D.head}}function C(u){let p=Object.assign({},t);return Object.assign(p,u),p.callbacks=Object.assign({},t.callbacks,u.callbacks),p.head=Object.assign({},t.head,u.head),p}function S(){const u=document.createElement("div");return u.hidden=!0,document.body.insertAdjacentElement("afterend",u),u}function x(u){let p=[],T=document.activeElement;if((T==null?void 0:T.tagName)!=="BODY"&&u.contains(T))for(;T&&(p.push(T),T!==u);)T=T.parentElement;return p}function _(u){var T;let p=Array.from(u.querySelectorAll("[id]"));return(T=u.getAttribute)!=null&&T.call(u,"id")&&p.push(u),p}function A(u,p,T,E){for(const O of E){const D=O.getAttribute("id");if(p.has(D)){let I=O;for(;I;){let R=u.get(I);if(R==null&&(R=new Set,u.set(I,R)),R.add(D),I===T)break;I=I.parentElement}}}}function y(u,p){const T=_(u),E=_(p),O=v(T,E);let D=new Map;A(D,O,u,T);const I=p.__idiomorphRoot||p;return A(D,O,I,E),{persistentIds:O,idMap:D}}function v(u,p){let T=new Set,E=new Map;for(const{id:D,tagName:I}of u)E.has(D)?T.add(D):E.set(D,I);let O=new Set;for(const{id:D,tagName:I}of p)O.has(D)?T.add(D):E.get(D)===I&&O.add(D);for(const D of T)O.delete(D);return O}return w})(),{normalizeElement:m,normalizeParent:k}=(function(){const w=new WeakSet;function C(A){return A instanceof Document?A.documentElement:A}function S(A){if(A==null)return document.createElement("div");if(typeof A=="string")return S(_(A));if(w.has(A))return A;if(A instanceof Node){if(A.parentNode)return new x(A);{const y=document.createElement("div");return y.append(A),y}}else{const y=document.createElement("div");for(const v of[...A])y.append(v);return y}}class x{constructor(y){this.originalNode=y,this.realParentNode=y.parentNode,this.previousSibling=y.previousSibling,this.nextSibling=y.nextSibling}get childNodes(){const y=[];let v=this.previousSibling?this.previousSibling.nextSibling:this.realParentNode.firstChild;for(;v&&v!=this.nextSibling;)y.push(v),v=v.nextSibling;return y}querySelectorAll(y){return this.childNodes.reduce((v,u)=>{if(u instanceof Element){u.matches(y)&&v.push(u);const p=u.querySelectorAll(y);for(let T=0;T<p.length;T++)v.push(p[T])}return v},[])}insertBefore(y,v){return this.realParentNode.insertBefore(y,v)}moveBefore(y,v){return this.realParentNode.moveBefore(y,v)}get __idiomorphRoot(){return this.originalNode}}function _(A){let y=new DOMParser,v=A.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(v.match(/<\/html>/)||v.match(/<\/head>/)||v.match(/<\/body>/)){let u=y.parseFromString(A,"text/html");if(v.match(/<\/html>/))return w.add(u),u;{let p=u.firstChild;return p&&w.add(p),p}}else{let p=y.parseFromString("<body><template>"+A+"</template></body>","text/html").body.querySelector("template").content;return w.add(p),p}}return{normalizeElement:C,normalizeParent:S}})();return{morph:e,defaults:t}})();function At(r,t,{callbacks:e,...s}={}){Na.morph(r,t,{...s,callbacks:new Ha(e)})}function cs(r,t,e={}){At(r,t.childNodes,{...e,morphStyle:"innerHTML"})}function cn(r,t){return r instanceof fe&&r.shouldReloadWithMorph&&(!t||ja(r,t))&&!r.closest("[data-turbo-permanent]")}function ja(r,t){return t instanceof Element&&t.nodeName==="TURBO-FRAME"&&r.id===t.id&&(!t.getAttribute("src")||Jr(r.src,t.getAttribute("src")))}function dn(r){return r.parentElement.closest("turbo-frame[src][refresh=morph]")}var vt;class Ha{constructor({beforeNodeMorphed:t}={}){U(this,vt);g(this,"beforeNodeAdded",t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id)));g(this,"beforeNodeMorphed",(t,e)=>{if(t instanceof Element)return!t.hasAttribute("data-turbo-permanent")&&B(this,vt).call(this,t,e)?!G("turbo:before-morph-element",{cancelable:!0,target:t,detail:{currentElement:t,newElement:e}}).defaultPrevented:!1});g(this,"beforeAttributeUpdated",(t,e,s)=>!G("turbo:before-morph-attribute",{cancelable:!0,target:e,detail:{attributeName:t,mutationType:s}}).defaultPrevented);g(this,"beforeNodeRemoved",t=>this.beforeNodeMorphed(t));g(this,"afterNodeMorphed",(t,e)=>{t instanceof Element&&G("turbo:morph-element",{target:t,detail:{currentElement:t,newElement:e}})});K(this,vt,t||(()=>!0))}}vt=new WeakMap;class hn extends ls{static renderElement(t,e){G("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:e}}),cs(t,e,{callbacks:{beforeNodeMorphed:(s,n)=>cn(s,n)&&dn(s)===t?(s.reload(),!1):!0}})}async preservingPermanentElements(t){return await t()}}const ye=class ye{constructor(){g(this,"hiding",!1);g(this,"value",0);g(this,"visible",!1);g(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return qr`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${ye.animationDuration}ms ease-out,
          opacity ${ye.animationDuration/2}ms ${ye.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,ye.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,ye.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const t=document.createElement("style");t.type="text/css",t.textContent=ye.defaultCSS;const e=zr();return e&&(t.nonce=e),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}};g(ye,"animationDuration",300);let As=ye;class qa extends os{constructor(){super(...arguments);g(this,"detailsByOuterHTML",this.children.filter(e=>!Wa(e)).map(e=>Ja(e)).reduce((e,s)=>{const{outerHTML:n}=s,i=n in e?e[n]:{type:$a(s),tracked:za(s),elements:[]};return{...e,[n]:{...i,elements:[...i.elements,s]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,s){return Object.keys(this.detailsByOuterHTML).filter(n=>!(n in s.detailsByOuterHTML)).map(n=>this.detailsByOuterHTML[n]).filter(({type:n})=>n==e).map(({elements:[n]})=>n)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,s)=>{const{type:n,tracked:i,elements:a}=this.detailsByOuterHTML[s];return n==null&&!i?[...e,...a]:a.length>1?[...e,...a.slice(1)]:e},[])}getMetaValue(e){const s=this.findMetaElementByName(e);return s?s.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((s,n)=>{const{elements:[i]}=this.detailsByOuterHTML[n];return Ya(i,e)?i:s},void 0|void 0)}}function $a(r){if(Ua(r))return"script";if(Ka(r))return"stylesheet"}function za(r){return r.getAttribute("data-turbo-track")=="reload"}function Ua(r){return r.localName=="script"}function Wa(r){return r.localName=="noscript"}function Ka(r){const t=r.localName;return t=="style"||t=="link"&&r.getAttribute("rel")=="stylesheet"}function Ya(r,t){return r.localName=="meta"&&r.getAttribute("name")==t}function Ja(r){return r.hasAttribute("nonce")&&r.setAttribute("nonce",""),r}class he extends os{static fromHTMLString(t=""){return this.fromDocument(Hr(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({documentElement:t,body:e,head:s}){return new this(t,e,new qa(s))}constructor(t,e,s){super(e),this.documentElement=t,this.headSnapshot=s}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),s=t.querySelectorAll("select");for(const[n,i]of e.entries()){const a=s[n];for(const l of a.selectedOptions)l.selected=!1;for(const l of i.selectedOptions)a.options[l.index].selected=!0}for(const n of t.querySelectorAll('input[type="password"]'))n.value="";return new he(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const t=this.getSetting("root")??"/";return se(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return(this.getSetting("view-transition")==="true"||this.headSnapshot.getMetaValue("view-transition")==="same-origin")&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}var wt,Se;class Ga{constructor(){U(this,wt,!1);U(this,Se,Promise.resolve())}renderChange(t,e){return t&&this.viewTransitionsAvailable&&!B(this,wt)?(K(this,wt,!0),K(this,Se,B(this,Se).then(async()=>{await document.startViewTransition(e).finished}))):K(this,Se,B(this,Se).then(e)),B(this,Se)}get viewTransitionsAvailable(){return document.startViewTransition}}wt=new WeakMap,Se=new WeakMap;const Xa={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Vt={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},be={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},We={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Za={advance:"forward",restore:"back",replace:"none"};class Qa{constructor(t,e,s,n={}){g(this,"identifier",Le());g(this,"timingMetrics",{});g(this,"followedRedirect",!1);g(this,"historyChanged",!1);g(this,"scrolled",!1);g(this,"shouldCacheSnapshot",!0);g(this,"acceptsStreamResponse",!1);g(this,"snapshotCached",!1);g(this,"state",be.initialized);g(this,"viewTransitioner",new Ga);this.delegate=t,this.location=e,this.restorationIdentifier=s||Le();const{action:i,historyChanged:a,referrer:l,snapshot:d,snapshotHTML:f,response:m,visitCachedSnapshot:k,willRender:w,updateHistory:C,shouldCacheSnapshot:S,acceptsStreamResponse:x,direction:_}={...Xa,...n};this.action=i,this.historyChanged=a,this.referrer=l,this.snapshot=d,this.snapshotHTML=f,this.response=m,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=k,this.willRender=w,this.updateHistory=C,this.scrolled=!w,this.shouldCacheSnapshot=S,this.acceptsStreamResponse=x,this.direction=_||Za[i]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==be.initialized&&(this.recordTimingMetric(Vt.visitStart),this.state=be.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==be.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=be.canceled)}complete(){this.state==be.started&&(this.recordTimingMetric(Vt.visitEnd),this.adapter.visitCompleted(this),this.state=be.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==be.started&&(this.state=be.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=this.location.href===((t=this.referrer)==null?void 0:t.href)?"replace":this.action,s=$r(e);this.history.update(s,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new rt(this,ce.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Vt.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;vr(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(Vt.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,vr(t)&&e!=null){const s=he.fromHTMLString(e);await this.renderPageSnapshot(s,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(he.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!Be(this.location)||t.hasAnchor(Be(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return he.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(t,e),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&((t=this.response)!=null&&t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(Ne.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const s=await e.responseHTML,{redirected:n,statusCode:i}=e;s==null?this.recordResponse({statusCode:We.contentTypeMismatch,redirected:n}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:i,responseHTML:s,redirected:n}))}async requestFailedWithResponse(t,e){const s=await e.responseHTML,{redirected:n,statusCode:i}=e;s==null?this.recordResponse({statusCode:We.contentTypeMismatch,redirected:n}):this.recordResponse({statusCode:i,responseHTML:s,redirected:n})}requestErrored(t,e){this.recordResponse({statusCode:We.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=Be(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>e(),0):requestAnimationFrame(()=>e())}),await t(),delete this.frame}async renderPageSnapshot(t,e){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(t),async()=>{await this.view.renderPage(t,e,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function vr(r){return r>=200&&r<300}class eo{constructor(t){g(this,"progressBar",new As);g(this,"showProgressBar",()=>{this.progressBar.show()});this.session=t}visitProposedToLocation(t,e){ke(t,this.navigator.rootLocation)?this.navigator.startVisit(t,(e==null?void 0:e.restorationIdentifier)||Le(),e):window.location.href=t.toString()}visitStarted(t){this.location=t.location,this.redirectedToLocation=null,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse(),t.response.redirected&&(this.redirectedToLocation=t.redirectedToLocation)}visitRequestFailedWithStatusCode(t,e){switch(e){case We.networkFailure:case We.timeoutFailure:case We.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){}visitCompleted(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(t){this.reload(t)}visitFailed(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(t){}linkPrefetchingIsEnabledForLocation(t){return!0}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;G("turbo:reload",{detail:t}),window.location.href=((e=this.redirectedToLocation||this.location)==null?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class to{constructor(){g(this,"selector","[data-turbo-temporary]");g(this,"deprecatedSelector","[data-turbo-cache=false]");g(this,"started",!1);g(this,"removeTemporaryElements",t=>{for(const e of this.temporaryElements)e.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}var ue,un,qt,$t;class so{constructor(t,e){U(this,ue);this.session=t,this.element=e,this.linkInterceptor=new nn(this,e),this.formSubmitObserver=new Zs(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,s){return N(this,ue,qt).call(this,t)}linkClickIntercepted(t,e,s){const n=N(this,ue,$t).call(this,t);n&&n.delegate.linkClickIntercepted(t,e,s)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&N(this,ue,un).call(this,t,e)&&N(this,ue,qt).call(this,t,e)}formSubmitted(t,e){const s=N(this,ue,$t).call(this,t,e);s&&s.delegate.formSubmitted(t,e)}}ue=new WeakSet,un=function(t,e){const s=Gs(t,e),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=se((n==null?void 0:n.content)??"/");return N(this,ue,qt).call(this,t,e)&&ke(s,i)},qt=function(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const n=N(this,ue,$t).call(this,t,e);return n?n!=t.closest("turbo-frame"):!1}else return!1},$t=function(t,e){const s=(e==null?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(s&&s!="_top"){const n=this.element.querySelector(`#${s}:not([disabled])`);if(n instanceof fe)return n}};class ro{constructor(t){g(this,"location");g(this,"restorationIdentifier",Le());g(this,"restorationData",{});g(this,"started",!1);g(this,"pageLoaded",!1);g(this,"currentIndex",0);g(this,"onPopState",t=>{if(this.shouldHandlePopState()){const{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);const{restorationIdentifier:s,restorationIndex:n}=e;this.restorationIdentifier=s;const i=n>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,s,i),this.currentIndex=n}}});g(this,"onPageLoad",async t=>{await na(),this.pageLoaded=!0});this.delegate=t}start(){var t,e;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((e=(t=history.state)==null?void 0:t.turbo)==null?void 0:e.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,s=Le()){t===history.pushState&&++this.currentIndex;const n={turbo:{restorationIdentifier:s,restorationIndex:this.currentIndex}};t.call(history,n,"",e.href),this.location=e,this.restorationIdentifier=s}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,s=this.restorationData[e];this.restorationData[e]={...s,...t}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var Je,Tt,kt,Et,ts,St,tt,fn,mn;class no{constructor(t,e){U(this,tt);g(this,"started",!1);U(this,Je,null);U(this,Tt,()=>{this.eventTarget.addEventListener("mouseenter",B(this,kt),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",B(this,Et),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",B(this,St),!0),this.started=!0});U(this,kt,t=>{if(Gt("turbo-prefetch")==="false")return;const e=t.target;if(e.matches&&e.matches("a[href]:not([target^=_]):not([download])")&&N(this,tt,mn).call(this,e)){const n=e,i=Yr(n);if(this.delegate.canPrefetchRequestToLocation(n,i)){K(this,Je,n);const a=new rt(this,ce.get,i,new URLSearchParams,e);a.fetchOptions.priority="low",ze.setLater(i.toString(),a,B(this,tt,fn))}}});U(this,Et,t=>{t.target===B(this,Je)&&B(this,ts).call(this)});U(this,ts,()=>{ze.clear(),K(this,Je,null)});U(this,St,t=>{if(t.target.tagName!=="FORM"&&t.detail.fetchOptions.method==="GET"){const e=ze.get(t.detail.url.toString());e&&(t.detail.fetchRequest=e),ze.clear()}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",B(this,Tt),{once:!0}):B(this,Tt).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",B(this,kt),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",B(this,Et),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",B(this,St),!0),this.started=!1)}prepareRequest(t){const e=t.target;t.headers["X-Sec-Purpose"]="prefetch";const s=e.closest("turbo-frame"),n=e.getAttribute("data-turbo-frame")||(s==null?void 0:s.getAttribute("target"))||(s==null?void 0:s.id);n&&n!=="_top"&&(t.headers["Turbo-Frame"]=n)}requestSucceededWithResponse(){}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}}Je=new WeakMap,Tt=new WeakMap,kt=new WeakMap,Et=new WeakMap,ts=new WeakMap,St=new WeakMap,tt=new WeakSet,fn=function(){return Number(Gt("turbo-prefetch-cache-time"))||xa},mn=function(t){return!(!t.getAttribute("href")||io(t)||ao(t)||oo(t)||lo(t)||ho(t))};const io=r=>r.origin!==document.location.origin||!["http:","https:"].includes(r.protocol)||r.hasAttribute("target"),ao=r=>r.pathname+r.search===document.location.pathname+document.location.search||r.href.startsWith("#"),oo=r=>{if(r.getAttribute("data-turbo-prefetch")==="false"||r.getAttribute("data-turbo")==="false")return!0;const t=Ue(r,"[data-turbo-prefetch]");return!!(t&&t.getAttribute("data-turbo-prefetch")==="false")},lo=r=>{const t=r.getAttribute("data-turbo-method");return!!(t&&t.toLowerCase()!=="get"||co(r)||r.hasAttribute("data-turbo-confirm")||r.hasAttribute("data-turbo-stream"))},co=r=>r.hasAttribute("data-remote")||r.hasAttribute("data-behavior")||r.hasAttribute("data-confirm")||r.hasAttribute("data-method"),ho=r=>G("turbo:before-prefetch",{target:r,cancelable:!0}).defaultPrevented;var st,gn,pn;class uo{constructor(t){U(this,st);this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,s={}){this.stop(),this.currentVisit=new Qa(this,se(t),e,{referrer:this.location,...s}),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new as(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const s=await e.responseHTML;if(s){const n=t.isSafe;n||this.view.clearSnapshotCache();const{statusCode:i,redirected:a}=e,d={action:N(this,st,gn).call(this,t,e),shouldCacheSnapshot:n,response:{statusCode:i,responseHTML:s,redirected:a}};this.proposeVisit(e.location,d)}}}async formSubmissionFailedWithResponse(t,e){const s=await e.responseHTML;if(s){const n=he.fromHTMLString(s);e.serverError?await this.view.renderError(n,this.currentVisit):await this.view.renderPage(n,!1,!0,this.currentVisit),n.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}linkPrefetchingIsEnabledForLocation(t){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(t):!0}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t),delete this.currentVisit}locationWithActionIsSamePage(t,e){const s=Be(t),n=Be(this.view.lastRenderedLocation),i=e==="restore"&&typeof s>"u";return e!=="replace"&&Ls(t)===Ls(this.view.lastRenderedLocation)&&(i||s!=null&&s!==n)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}st=new WeakSet,gn=function(t,e){const{submitter:s,formElement:n}=t;return Re(s,n)||N(this,st,pn).call(this,e)},pn=function(t){var s;return t.redirected&&t.location.href===((s=this.location)==null?void 0:s.href)?"replace":"advance"};const De={initial:0,loading:1,interactive:2,complete:3};class fo{constructor(t){g(this,"stage",De.initial);g(this,"started",!1);g(this,"interpretReadyState",()=>{const{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()});g(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=t}start(){this.started||(this.stage==De.initial&&(this.stage=De.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==De.loading&&(this.stage=De.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==De.interactive&&(this.stage=De.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class mo{constructor(t){g(this,"started",!1);g(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class go{render({fragment:t}){ln.preservingPermanentElements(this,po(t),()=>{bo(t,()=>{yo(()=>{document.documentElement.appendChild(t)})})})}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}function po(r){const t=sn(document.documentElement),e={};for(const s of t){const{id:n}=s;for(const i of r.querySelectorAll("turbo-stream")){const a=tn(i.templateElement.content,n);a&&(e[n]=[s,a])}}return e}async function bo(r,t){const e=`turbo-stream-autofocus-${Le()}`,s=r.querySelectorAll("turbo-stream"),n=vo(s);let i=null;if(n&&(n.id?i=n.id:i=e,n.id=i),t(),await dt(),(document.activeElement==null||document.activeElement==document.body)&&i){const l=document.getElementById(i);Js(l)&&l.focus(),l&&l.id==e&&l.removeAttribute("id")}}async function yo(r){const[t,e]=await da(r,()=>document.activeElement),s=t&&t.id;if(s){const n=document.getElementById(s);Js(n)&&n!=e&&n.focus()}}function vo(r){for(const t of r){const e=Ur(t.templateElement.content);if(e)return e}return null}var xe;class wo{constructor(t){g(this,"sources",new Set);U(this,xe,!1);g(this,"inspectFetchResponse",t=>{const e=To(t);e&&ko(e)&&(t.preventDefault(),this.receiveMessageResponse(e))});g(this,"receiveMessageEvent",t=>{B(this,xe)&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)});this.delegate=t}start(){B(this,xe)||(K(this,xe,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){B(this,xe)&&(K(this,xe,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(Ne.wrap(t))}}xe=new WeakMap;function To(r){var e;const t=(e=r.detail)==null?void 0:e.fetchResponse;if(t instanceof rs)return t}function ko(r){return(r.contentType??"").startsWith(Ne.contentType)}class Eo extends Qs{static renderElement(t,e){const{documentElement:s,body:n}=document;s.replaceChild(e,n)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const s=ut(t);e.replaceChild(s,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var ss,bn;class ds extends Qs{constructor(){super(...arguments);U(this,ss)}static renderElement(e,s){document.body&&s instanceof HTMLBodyElement?document.body.replaceWith(s):document.documentElement.appendChild(s)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){N(this,ss,bn).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const e=this.mergeProvisionalElements(),s=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await s,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const e=[];for(const s of this.newHeadStylesheetElements)e.push(oa(s)),document.head.appendChild(s);await Promise.all(e)}copyNewHeadScriptElements(){for(const e of this.newHeadScriptElements)document.head.appendChild(ut(e))}removeUnusedDynamicStylesheetElements(){for(const e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){const e=[...this.newHeadProvisionalElements];for(const s of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(s,e)||document.head.removeChild(s);for(const s of e)document.head.appendChild(s)}isCurrentElementInElementList(e,s){for(const[n,i]of s.entries()){if(e.tagName=="TITLE"){if(i.tagName!="TITLE")continue;if(e.innerHTML==i.innerHTML)return s.splice(n,1),!0}if(i.isEqualNode(e))return s.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(const e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const e of this.newBodyScriptElements){const s=ut(e);e.replaceWith(s)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}ss=new WeakSet,bn=function(){const{documentElement:e}=this.currentSnapshot,{lang:s}=this.newSnapshot;s?e.setAttribute("lang",s):e.removeAttribute("lang")};class yn extends ds{static renderElement(t,e){At(t,e,{callbacks:{beforeNodeMorphed:(s,n)=>cn(s,n)&&!dn(s)?(s.reload(),!1):!0}}),G("turbo:morph",{detail:{currentElement:t,newElement:e}})}async preservingPermanentElements(t){return await t()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}class So{constructor(t){g(this,"keys",[]);g(this,"snapshots",{});this.size=t}has(t){return Bt(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[Bt(t)]}write(t,e){this.snapshots[Bt(t)]=e}touch(t){const e=Bt(t),s=this.keys.indexOf(e);s>-1&&this.keys.splice(s,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class xo extends rn{constructor(){super(...arguments);g(this,"snapshotCache",new So(10));g(this,"lastRenderedLocation",new URL(location.href));g(this,"forceReloaded",!1)}shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,s=!1,n=!0,i){const l=this.isPageRefresh(i)&&this.snapshot.shouldMorphPage?yn:ds,d=new l(this.snapshot,e,s,n);return d.shouldRender?i==null||i.changeHistory():this.forceReloaded=!0,this.render(d)}renderError(e,s){s==null||s.changeHistory();const n=new Eo(this.snapshot,e,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:s}=this;await jr();const n=e.clone();return this.snapshotCache.put(s,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return he.fromElement(this.element)}}var xt;class Co{constructor(t,e){g(this,"selector","a[data-turbo-preload]");U(this,xt,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=t,this.snapshotCache=e}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",B(this,xt)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",B(this,xt))}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(e)&&this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(this.snapshotCache.has(e))return;await new rt(this,ce.get,e,new URLSearchParams,t).perform()}prepareRequest(t){t.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(t,e){try{const s=await e.responseHTML,n=he.fromHTMLString(s);this.snapshotCache.put(t.url,n)}catch{}}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}}xt=new WeakMap;var Ge,zt;class Lo{constructor(t){U(this,Ge);this.session=t}clear(){this.session.clearCache()}resetCacheControl(){N(this,Ge,zt).call(this,"")}exemptPageFromCache(){N(this,Ge,zt).call(this,"no-cache")}exemptPageFromPreview(){N(this,Ge,zt).call(this,"no-preview")}}Ge=new WeakSet,zt=function(t){ca("turbo-cache-control",t)};var Ct;class Ao{constructor(t){g(this,"navigator",new uo(this));g(this,"history",new ro(this));g(this,"view",new xo(this,document.documentElement));g(this,"adapter",new eo(this));g(this,"pageObserver",new fo(this));g(this,"cacheObserver",new to);g(this,"linkPrefetchObserver",new no(this,document));g(this,"linkClickObserver",new an(this,window));g(this,"formSubmitObserver",new Zs(this,document));g(this,"scrollObserver",new mo(this));g(this,"streamObserver",new wo(this));g(this,"formLinkClickObserver",new on(this,document.documentElement));g(this,"frameRedirector",new so(this,document.documentElement));g(this,"streamMessageRenderer",new go);g(this,"cache",new Lo(this));g(this,"enabled",!0);g(this,"started",!1);U(this,Ct,150);this.recentRequests=t,this.preloader=new Co(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const s=e.frame?document.getElementById(e.frame):null;if(s instanceof fe){const n=e.action||Re(s);s.delegate.proposeVisitIfNavigatedWithAction(s,n),s.src=t.toString()}else this.navigator.proposeVisit(se(t),e)}refresh(t,e){const s=e&&this.recentRequests.has(e),n=t===document.baseURI;!s&&!this.navigator.currentVisit&&n&&this.visit(t,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(Ne.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=t}set progressBarDelay(t){Q.drive.progressBarDelay=t}get progressBarDelay(){return Q.drive.progressBarDelay}set drive(t){Q.drive.enabled=t}get drive(){return Q.drive.enabled}set formMode(t){Q.forms.mode=t}get formMode(){return Q.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return B(this,Ct)}set pageRefreshDebouncePeriod(t){this.refresh=ha(this.debouncedRefresh.bind(this),t),K(this,Ct,t)}shouldPreloadLink(t){const e=t.hasAttribute("data-turbo-method"),s=t.hasAttribute("data-turbo-stream"),n=t.getAttribute("data-turbo-frame"),i=n=="_top"?null:document.getElementById(n)||Ue(t,"turbo-frame:not([disabled])");if(e||s||i instanceof fe)return!1;{const a=new URL(t.href);return this.elementIsNavigatable(t)&&ke(a,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(t,e,s){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0,direction:s}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&ke(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(t,e){return this.elementIsNavigatable(t)&&ke(e,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(e)}willFollowLinkToLocation(t,e,s){return this.elementIsNavigatable(t)&&ke(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,s)}followedLinkToLocation(t,e){const s=this.getActionForLink(t),n=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:s,acceptsStreamResponse:n})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){wr(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||(Yt(document.documentElement),this.view.markVisitDirection(t.direction)),wr(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.view.unmarkVisitDirection(),Jt(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const s=Gs(t,e);return this.submissionIsNavigatable(t,e)&&ke(se(s),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;(t=this.navigator.currentVisit)!=null&&t.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const s=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:n,detail:{render:i}}=s;return this.view.renderer&&i&&(this.view.renderer.renderElement=i),!n}viewRenderedSnapshot(t,e,s){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(s)}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,s){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,s).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,s){return G("turbo:click",{target:t,detail:{url:e.href,originalEvent:s},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return G("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return G("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return G("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return G("turbo:before-render",{detail:{newBody:t,...e},cancelable:!0})}notifyApplicationAfterRender(t){return G("turbo:render",{detail:{renderMethod:t}})}notifyApplicationAfterPageLoad(t={}){return G("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return G("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return G("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(Q.forms.mode=="off")return!1;{const s=e?this.elementIsNavigatable(e):!0;return Q.forms.mode=="optin"?s&&t.closest('[data-turbo="true"]')!=null:s&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=Ue(t,"[data-turbo]"),s=Ue(t,"turbo-frame");return Q.drive.enabled||s?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return Re(t)||"advance"}get snapshot(){return this.view.snapshot}}Ct=new WeakMap;function wr(r){Object.defineProperties(r,Mo)}const Mo={absoluteURL:{get(){return this.toString()}}},X=new Ao(Gr),{cache:vn,navigator:wn}=X;function er(){X.start()}function Tn(r){X.registerAdapter(r)}function kn(r,t){X.visit(r,t)}function hs(r){X.connectStreamSource(r)}function us(r){X.disconnectStreamSource(r)}function En(r){X.renderStreamMessage(r)}function Sn(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),X.clearCache()}function xn(r){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Q.drive.progressBarDelay=r}function Cn(r){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Q.forms.confirm=r}function Ln(r){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Q.forms.mode=r}function An(r,t){yn.renderElement(r,t)}function Mn(r,t){hn.renderElement(r,t)}var _o=Object.freeze({__proto__:null,navigator:wn,session:X,cache:vn,PageRenderer:ds,PageSnapshot:he,FrameRenderer:ls,fetch:Xs,config:Q,start:er,registerAdapter:Tn,visit:kn,connectStreamSource:hs,disconnectStreamSource:us,renderStreamMessage:En,clearCache:Sn,setProgressBarDelay:xn,setConfirmMethod:Cn,setFormMode:Ln,morphBodyElements:An,morphTurboFrameElements:Mn,morphChildren:cs,morphElements:At});class Do extends Error{}var Xe,ge,Ce,Lt,Ze,Qe,j,qe,_n,Dn,On,Pn,Fn,In,Rn,Ms,$e,Bn,Ut,Vn,Nn,jn;class Oo{constructor(t){U(this,j);g(this,"fetchResponseLoaded",t=>Promise.resolve());U(this,Xe,null);U(this,ge,()=>{});U(this,Ce,!1);U(this,Lt,!1);U(this,Ze,new Set);U(this,Qe,!1);g(this,"action",null);g(this,"visitCachedSnapshot",({element:t})=>{const e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=t,this.view=new Ia(this,this.element),this.appearanceObserver=new Ta(this,this.element),this.formLinkClickObserver=new on(this,this.element),this.linkInterceptor=new nn(this,this.element),this.restorationIdentifier=Le(),this.formSubmitObserver=new Zs(this,this.element)}connect(){B(this,Ce)||(K(this,Ce,!0),this.loadingStyle==Pe.lazy?this.appearanceObserver.start():N(this,j,qe).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){B(this,Ce)&&(K(this,Ce,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Pe.eager&&N(this,j,qe).call(this)}sourceURLChanged(){N(this,j,Vn).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Pe.eager||B(this,Lt))&&N(this,j,qe).call(this))}sourceURLReloaded(){const{refresh:t,src:e}=this.element;return K(this,Qe,e&&t==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Pe.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),N(this,j,qe).call(this))}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const s=Hr(e);he.fromDocument(s).isVisitable?await N(this,j,_n).call(this,t,s):await N(this,j,Pn).call(this,t)}}finally{K(this,Qe,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,Re(t)),N(this,j,qe).call(this)}willSubmitFormLinkToLocation(t){return N(this,j,Ut).call(this,t)}submittedFormLinkToLocation(t,e,s){const n=N(this,j,$e).call(this,t);n&&s.setAttribute("data-turbo-frame",n.id)}shouldInterceptLinkClick(t,e,s){return N(this,j,Ut).call(this,t)}linkClickIntercepted(t,e){N(this,j,On).call(this,t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&N(this,j,Ut).call(this,t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new as(this,t,e);const{fetchRequest:s}=this.formSubmission;this.prepareRequest(s),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,(e=this.currentNavigationElement)!=null&&e.hasAttribute("data-turbo-stream")&&t.acceptResponseType(Ne.contentType)}requestStarted(t){Yt(this.element)}requestPreventedHandlingResponse(t,e){B(this,ge).call(this)}async requestSucceededWithResponse(t,e){await this.loadResponse(e),B(this,ge).call(this)}async requestFailedWithResponse(t,e){await this.loadResponse(e),B(this,ge).call(this)}requestErrored(t,e){console.error(e),B(this,ge).call(this)}requestFinished(t){Jt(this.element)}formSubmissionStarted({formElement:t}){Yt(t,N(this,j,$e).call(this,t))}formSubmissionSucceededWithResponse(t,e){const s=N(this,j,$e).call(this,t.formElement,t.submitter);s.delegate.proposeVisitIfNavigatedWithAction(s,Re(t.submitter,t.formElement,s)),s.delegate.loadResponse(e),t.isSafe||X.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),X.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){Jt(t,N(this,j,$e).call(this,t))}allowsImmediateRender({element:t},e){const s=G("turbo:before-frame-render",{target:this.element,detail:{newFrame:t,...e},cancelable:!0}),{defaultPrevented:n,detail:{render:i}}=s;return this.view.renderer&&i&&(this.view.renderer.renderElement=i),!n}viewRenderedSnapshot(t,e,s){}preloadOnLoadLinksForView(t){X.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}proposeVisitIfNavigatedWithAction(t,e=null){if(this.action=e,this.action){const s=he.fromElement(t).clone(),{visitCachedSnapshot:n}=t.delegate;t.delegate.fetchResponseLoaded=async i=>{if(t.src){const{statusCode:a,redirected:l}=i,d=await i.responseHTML,m={response:{statusCode:a,redirected:l,responseHTML:d},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:s};this.action&&(m.action=this.action),X.visit(t.src,m)}}}}changeHistory(){if(this.action){const t=$r(this.action);X.history.update(t,se(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(t){let e;const s=CSS.escape(this.id);try{if(e=kr(t.querySelector(`turbo-frame#${s}`),this.sourceURL),e)return e;if(e=kr(t.querySelector(`turbo-frame[src][recurse~=${s}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(n){return console.error(n),new fe}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){N(this,j,Nn).call(this,"src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||B(this,ge).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&B(this,Ce)}get rootLocation(){const t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),e=(t==null?void 0:t.content)??"/";return se(e)}}Xe=new WeakMap,ge=new WeakMap,Ce=new WeakMap,Lt=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,j=new WeakSet,qe=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=N(this,j,Dn).call(this,se(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,K(this,Lt,!0))},_n=async function(t,e){const s=await this.extractForeignFrameElement(e.body),n=B(this,Qe)?hn:ls;if(s){const i=new os(s),a=new n(this,this.view.snapshot,i,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(a),this.complete=!0,X.frameRendered(t,this.element),X.frameLoaded(this.element),await this.fetchResponseLoaded(t)}else N(this,j,Fn).call(this,t)&&N(this,j,In).call(this,t)},Dn=async function(t){var s;const e=new rt(this,ce.get,t,new URLSearchParams,this.element);return(s=B(this,Xe))==null||s.cancel(),K(this,Xe,e),new Promise(n=>{K(this,ge,()=>{K(this,ge,()=>{}),K(this,Xe,null),n()}),e.perform()})},On=function(t,e,s){const n=N(this,j,$e).call(this,t,s);n.delegate.proposeVisitIfNavigatedWithAction(n,Re(s,t,n)),N(this,j,jn).call(this,t,()=>{n.src=e})},Pn=async function(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await N(this,j,Ms).call(this,t.response)},Fn=function(t){this.element.setAttribute("complete","");const e=t.response,s=async(i,a)=>{i instanceof Response?N(this,j,Ms).call(this,i):X.visit(i,a)};return!G("turbo:frame-missing",{target:this.element,detail:{response:e,visit:s},cancelable:!0}).defaultPrevented},In=function(t){this.view.missing(),N(this,j,Rn).call(this,t)},Rn=function(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Do(e)},Ms=async function(t){const e=new rs(t),s=await e.responseHTML,{location:n,redirected:i,statusCode:a}=e;return X.visit(n,{response:{redirected:i,statusCode:a,responseHTML:s}})},$e=function(t,e){const s=Kt("data-turbo-frame",e,t)||this.element.getAttribute("target");return Tr(s)??this.element},Bn=function(t,e){const s=Gs(t,e);return ke(se(s),this.rootLocation)},Ut=function(t,e){const s=Kt("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!N(this,j,Bn).call(this,t,e)||!this.enabled||s=="_top")return!1;if(s){const n=Tr(s);if(n)return!n.disabled}return!(!X.elementIsNavigatable(t)||e&&!X.elementIsNavigatable(e))},Vn=function(t){return B(this,Ze).has(t)},Nn=function(t,e){B(this,Ze).add(t),e(),B(this,Ze).delete(t)},jn=function(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement};function Tr(r){if(r!=null){const t=document.getElementById(r);if(t instanceof fe)return t}}function kr(r,t){if(r){const e=r.getAttribute("src");if(e!=null&&t!=null&&Jr(e,t))throw new Error(`Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`);if(r.ownerDocument!==document&&(r=document.importNode(r,!0)),r instanceof fe)return r.connectedCallback(),r.disconnectedCallback(),r}}const tr={after(){this.targetElements.forEach(r=>{var t;return(t=r.parentElement)==null?void 0:t.insertBefore(this.templateContent,r.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.append(this.templateContent))},before(){this.targetElements.forEach(r=>{var t;return(t=r.parentElement)==null?void 0:t.insertBefore(this.templateContent,r)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.prepend(this.templateContent))},remove(){this.targetElements.forEach(r=>r.remove())},replace(){const r=this.getAttribute("method");this.targetElements.forEach(t=>{r==="morph"?At(t,this.templateContent):t.replaceWith(this.templateContent)})},update(){const r=this.getAttribute("method");this.targetElements.forEach(t=>{r==="morph"?cs(t,this.templateContent):(t.innerHTML="",t.append(this.templateContent))})},refresh(){X.refresh(this.baseURI,this.requestId)}};var Ie,ot;const nr=class nr extends HTMLElement{constructor(){super(...arguments);U(this,Ie)}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await dt(),await e.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){var n;const e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.getAttribute("id")),s=[...((n=this.templateContent)==null?void 0:n.children)||[]].filter(i=>!!i.getAttribute("id")).map(i=>i.getAttribute("id"));return e.filter(i=>s.includes(i.getAttribute("id")))}get performAction(){if(this.action){const e=tr[this.action];if(e)return e;N(this,Ie,ot).call(this,"unknown action")}N(this,Ie,ot).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;N(this,Ie,ot).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;N(this,Ie,ot).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:nr.renderElement}})}get targetElementsById(){var s;const e=(s=this.ownerDocument)==null?void 0:s.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){var s;const e=(s=this.ownerDocument)==null?void 0:s.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}};Ie=new WeakSet,ot=function(e){throw new Error(`${this.description}: ${e}`)};let Xt=nr;class Hn extends HTMLElement{constructor(){super(...arguments);g(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),hs(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),us(this.streamSource))}get src(){return this.getAttribute("src")||""}}fe.delegateConstructor=Oo;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",fe);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Xt);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Hn);(()=>{let r=document.currentScript;if(r&&!r.hasAttribute("data-turbo-suppress-warning"))for(r=r.parentElement;r;){if(r==document.body)return console.warn(qr`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applicationâs JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ââ
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,r.outerHTML);r=r.parentElement}})();window.Turbo={..._o,StreamActions:tr};er();const Po=Object.freeze(Object.defineProperty({__proto__:null,FetchEnctype:Ee,FetchMethod:ce,FetchRequest:rt,FetchResponse:rs,FrameElement:fe,FrameLoadingStyle:Pe,FrameRenderer:ls,PageRenderer:ds,PageSnapshot:he,StreamActions:tr,StreamElement:Xt,StreamSourceElement:Hn,cache:vn,clearCache:Sn,config:Q,connectStreamSource:hs,disconnectStreamSource:us,fetch:Xs,fetchEnctypeFromString:Xr,fetchMethodFromString:ns,isSafe:is,morphBodyElements:An,morphChildren:cs,morphElements:At,morphTurboFrameElements:Mn,navigator:wn,registerAdapter:Tn,renderStreamMessage:En,session:X,setConfirmMethod:Cn,setFormMode:Ln,setProgressBarDelay:xn,start:er,visit:kn},Symbol.toStringTag,{value:"Module"})),Fo="modulepreload",Io=function(r){return"/vite/"+r},Er={},Ro=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){let a=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=a(e.map(f=>{if(f=Io(f),f in Er)return;Er[f]=!0;const m=f.endsWith(".css"),k=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${k}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":Fo,m||(w.as="script"),w.crossOrigin="",w.href=f,d&&w.setAttribute("nonce",d),document.head.appendChild(w),m)return new Promise((C,S)=>{w.addEventListener("load",C),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};let qn;async function Bo(){return qn||Sr(Vo().then(Sr))}function Sr(r){return qn=r}async function Vo(){const{createConsumer:r}=await Ro(async()=>{const{createConsumer:t}=await import("./index-lVzqX2jn.js");return{createConsumer:t}},[]);return r()}async function No(r,t){const{subscriptions:e}=await Bo();return e.create(r,t)}function _s(r){return!r||typeof r!="object"||r instanceof Date||r instanceof RegExp?r:Array.isArray(r)?r.map(_s):Object.keys(r).reduce(function(t,e){var s=e[0].toLowerCase()+e.slice(1).replace(/([A-Z]+)/g,function(n,i){return"_"+i.toLowerCase()});return t[s]=_s(r[e]),t},{})}class $n extends HTMLElement{async connectedCallback(){hs(this),this.subscription=await No(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){us(this),this.subscription&&this.subscription.unsubscribe(),this.subscriptionDisconnected()}attributeChangedCallback(){this.subscription&&(this.disconnectedCallback(),this.connectedCallback())}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){const t=this.getAttribute("channel"),e=this.getAttribute("signed-stream-name");return{channel:t,signed_stream_name:e,..._s({...this.dataset})}}}g($n,"observedAttributes",["channel","signed-stream-name"]);customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",$n);function jo(r){if(r.target instanceof HTMLFormElement){const{target:t,detail:{fetchOptions:e}}=r;t.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:s}}})=>{const n=$o(e.body)?e.body:new URLSearchParams,i=Ho(s,n,t);/get/i.test(i)||(/post/i.test(i)?n.delete("_method"):n.set("_method",i),e.method="post")},{once:!0})}}function Ho(r,t,e){const s=qo(r),n=t.get("_method"),i=e.getAttribute("method")||"get";return typeof s=="string"?s:typeof n=="string"?n:i}function qo(r){return r instanceof HTMLButtonElement||r instanceof HTMLInputElement?r.name==="_method"?r.value:r.hasAttribute("formmethod")?r.formMethod:null:null}function $o(r){return r instanceof FormData||r instanceof URLSearchParams}window.Turbo=Po;addEventListener("turbo:before-fetch-request",jo);class zo{constructor(t,e,s){this.eventTarget=t,this.eventName=e,this.eventOptions=s,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=Uo(t);for(const s of this.bindings){if(e.immediatePropagationStopped)break;s.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{const s=t.index,n=e.index;return s<n?-1:s>n?1:0})}}function Uo(r){if("immediatePropagationStopped"in r)return r;{const{stopImmediatePropagation:t}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}class Wo{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,s={}){this.application.handleError(t,`Error ${e}`,s)}clearEventListenersForBinding(t){const e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:e,eventName:s,eventOptions:n}=t,i=this.fetchEventListenerMapForEventTarget(e),a=this.cacheKey(s,n);i.delete(a),i.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:s,eventOptions:n}=t;return this.fetchEventListener(e,s,n)}fetchEventListener(t,e,s){const n=this.fetchEventListenerMapForEventTarget(t),i=this.cacheKey(e,s);let a=n.get(i);return a||(a=this.createEventListener(t,e,s),n.set(i,a)),a}createEventListener(t,e,s){const n=new zo(t,e,s);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const s=[t];return Object.keys(e).sort().forEach(n=>{s.push(`${e[n]?"":"!"}${n}`)}),s.join(":")}}const Ko={stop({event:r,value:t}){return t&&r.stopPropagation(),!0},prevent({event:r,value:t}){return t&&r.preventDefault(),!0},self({event:r,value:t,element:e}){return t?e===r.target:!0}},Yo=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Jo(r){const e=r.trim().match(Yo)||[];let s=e[2],n=e[3];return n&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${n}`,n=""),{eventTarget:Go(e[4]),eventName:s,eventOptions:e[7]?Xo(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||n}}function Go(r){if(r=="window")return window;if(r=="document")return document}function Xo(r){return r.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function Zo(r){if(r==window)return"window";if(r==document)return"document"}function sr(r){return r.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Ds(r){return sr(r.replace(/--/g,"-").replace(/__/g,"_"))}function Mt(r){return r.charAt(0).toUpperCase()+r.slice(1)}function zn(r){return r.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function Qo(r){return r.match(/[^\s]+/g)||[]}function xr(r){return r!=null}function Os(r,t){return Object.prototype.hasOwnProperty.call(r,t)}const Cr=["meta","ctrl","alt","shift"];class el{constructor(t,e,s,n){this.element=t,this.index=e,this.eventTarget=s.eventTarget||t,this.eventName=s.eventName||tl(t)||Nt("missing event name"),this.eventOptions=s.eventOptions||{},this.identifier=s.identifier||Nt("missing identifier"),this.methodName=s.methodName||Nt("missing method name"),this.keyFilter=s.keyFilter||"",this.schema=n}static forToken(t,e){return new this(t.element,t.index,Jo(t.content),e)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;const e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;const s=e.filter(n=>!Cr.includes(n))[0];return s?(Os(this.keyMappings,s)||Nt(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[s].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;const e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){const t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:s,value:n}of Array.from(this.element.attributes)){const i=s.match(e),a=i&&i[1];a&&(t[sr(a)]=sl(n))}return t}get eventTargetName(){return Zo(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){const[s,n,i,a]=Cr.map(l=>e.includes(l));return t.metaKey!==s||t.ctrlKey!==n||t.altKey!==i||t.shiftKey!==a}}const Lr={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function tl(r){const t=r.tagName.toLowerCase();if(t in Lr)return Lr[t](r)}function Nt(r){throw new Error(r)}function sl(r){try{return JSON.parse(r)}catch{return r}}class rl{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){const e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:e}=this.action,{actionDescriptorFilters:s}=this.context.application,{controller:n}=this.context;let i=!0;for(const[a,l]of Object.entries(this.eventOptions))if(a in s){const d=s[a];i=i&&d({name:a,value:l,event:t,element:e,controller:n})}else continue;return i}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){const{target:e,currentTarget:s}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:s,action:this.methodName})}catch(n){const{identifier:i,controller:a,element:l,index:d}=this,f={identifier:i,controller:a,element:l,index:d,event:t};this.context.handleError(n,`invoking action "${this.action}"`,f)}}willBeInvokedByEvent(t){const e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Un{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(const e of Array.from(t)){const s=this.elementFromNode(e);s&&this.processTree(s,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const s=this.elementFromNode(e);s&&this.elementIsActive(s)&&this.processTree(s,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const s of this.matchElementsInTree(t))e.call(this,s)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class Wn{constructor(t,e,s){this.attributeName=e,this.delegate=s,this.elementObserver=new Un(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],s=Array.from(t.querySelectorAll(this.selector));return e.concat(s)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}function nl(r,t,e){Kn(r,t).add(e)}function il(r,t,e){Kn(r,t).delete(e),al(r,t)}function Kn(r,t){let e=r.get(t);return e||(e=new Set,r.set(t,e)),e}function al(r,t){const e=r.get(t);e!=null&&e.size==0&&r.delete(t)}class Ve{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,s)=>e.concat(Array.from(s)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,s)=>e+s.size,0)}add(t,e){nl(this.valuesByKey,t,e)}delete(t,e){il(this.valuesByKey,t,e)}has(t,e){const s=this.valuesByKey.get(t);return s!=null&&s.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(s=>s.has(t))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,s])=>s.has(t)).map(([e,s])=>e)}}class ol{constructor(t,e,s,n){this._selector=e,this.details=n,this.elementObserver=new Un(t,this),this.delegate=s,this.matchesByElement=new Ve}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const{selector:e}=this;if(e){const s=t.matches(e);return this.delegate.selectorMatchElement?s&&this.delegate.selectorMatchElement(t,this.details):s}else return!1}matchElementsInTree(t){const{selector:e}=this;if(e){const s=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(e)).filter(i=>this.matchElement(i));return s.concat(n)}else return[]}elementMatched(t){const{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){const e=this.matchesByElement.getKeysForValue(t);for(const s of e)this.selectorUnmatched(t,s)}elementAttributeChanged(t,e){const{selector:s}=this;if(s){const n=this.matchElement(t),i=this.matchesByElement.has(s,t);n&&!i?this.selectorMatched(t,s):!n&&i&&this.selectorUnmatched(t,s)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}}class ll{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const s=this.delegate.getStringMapKeyForAttribute(t);if(s!=null){this.stringMap.has(t)||this.stringMapKeyAdded(s,t);const n=this.element.getAttribute(t);if(this.stringMap.get(t)!=n&&this.stringMapValueChanged(n,s,e),n==null){const i=this.stringMap.get(t);this.stringMap.delete(t),i&&this.stringMapKeyRemoved(s,t,i)}else this.stringMap.set(t,n)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,s){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,s)}stringMapKeyRemoved(t,e,s){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,s)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class Yn{constructor(t,e,s){this.attributeObserver=new Wn(t,e,this),this.delegate=s,this.tokensByElement=new Ve}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,s]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(s)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),s=this.readTokensForElement(t),n=dl(e,s).findIndex(([i,a])=>!hl(i,a));return n==-1?[[],[]]:[e.slice(n),s.slice(n)]}readTokensForElement(t){const e=this.attributeName,s=t.getAttribute(e)||"";return cl(s,t,e)}}function cl(r,t,e){return r.trim().split(/\s+/).filter(s=>s.length).map((s,n)=>({element:t,attributeName:e,content:s,index:n}))}function dl(r,t){const e=Math.max(r.length,t.length);return Array.from({length:e},(s,n)=>[r[n],t[n]])}function hl(r,t){return r&&t&&r.index==t.index&&r.content==t.content}class Jn{constructor(t,e,s){this.tokenListObserver=new Yn(t,e,this),this.delegate=s,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:s}=this.fetchParseResultForToken(t);s&&(this.fetchValuesByTokenForElement(e).set(t,s),this.delegate.elementMatchedValue(e,s))}tokenUnmatched(t){const{element:e}=t,{value:s}=this.fetchParseResultForToken(t);s&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,s))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}}class ul{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Jn(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new rl(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){const e=el.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class fl{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new ll(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const s=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,s.writer(this.receiver[t]),s.writer(s.defaultValue))}stringMapValueChanged(t,e,s){const n=this.valueDescriptorNameMap[e];t!==null&&(s===null&&(s=n.writer(n.defaultValue)),this.invokeChangedCallback(e,t,s))}stringMapKeyRemoved(t,e,s){const n=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,n.writer(this.receiver[t]),s):this.invokeChangedCallback(t,n.writer(n.defaultValue),s)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:s,writer:n}of this.valueDescriptors)s!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,n(s),void 0)}invokeChangedCallback(t,e,s){const n=`${t}Changed`,i=this.receiver[n];if(typeof i=="function"){const a=this.valueDescriptorNameMap[t];try{const l=a.reader(e);let d=s;s&&(d=a.reader(s)),i.call(this.receiver,l,d)}catch(l){throw l instanceof TypeError&&(l.message=`Stimulus Value "${this.context.identifier}.${a.name}" - ${l.message}`),l}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{const s=this.valueDescriptorMap[e];t[s.name]=s}),t}hasValue(t){const e=this.valueDescriptorNameMap[t],s=`has${Mt(e.name)}`;return this.receiver[s]}}class ml{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new Ve}start(){this.tokenListObserver||(this.tokenListObserver=new Yn(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var s;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var s;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function _t(r,t){const e=Gn(r);return Array.from(e.reduce((s,n)=>(pl(n,t).forEach(i=>s.add(i)),s),new Set))}function gl(r,t){return Gn(r).reduce((s,n)=>(s.push(...bl(n,t)),s),[])}function Gn(r){const t=[];for(;r;)t.push(r),r=Object.getPrototypeOf(r);return t.reverse()}function pl(r,t){const e=r[t];return Array.isArray(e)?e:[]}function bl(r,t){const e=r[t];return e?Object.keys(e).map(s=>[s,e[s]]):[]}class yl{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new Ve,this.outletElementsByName=new Ve,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:s}){const n=this.getOutlet(t,s);n&&this.connectOutlet(n,t,s)}selectorUnmatched(t,e,{outletName:s}){const n=this.getOutletFromMap(t,s);n&&this.disconnectOutlet(n,t,s)}selectorMatchElement(t,{outletName:e}){const s=this.selector(e),n=this.hasOutlet(t,e),i=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return s?n&&i&&t.matches(s):!1}elementMatchedAttribute(t,e){const s=this.getOutletNameFromOutletAttributeName(e);s&&this.updateSelectorObserverForOutlet(s)}elementAttributeValueChanged(t,e){const s=this.getOutletNameFromOutletAttributeName(e);s&&this.updateSelectorObserverForOutlet(s)}elementUnmatchedAttribute(t,e){const s=this.getOutletNameFromOutletAttributeName(e);s&&this.updateSelectorObserverForOutlet(s)}connectOutlet(t,e,s){var n;this.outletElementsByName.has(s,e)||(this.outletsByName.add(s,t),this.outletElementsByName.add(s,e),(n=this.selectorObserverMap.get(s))===null||n===void 0||n.pause(()=>this.delegate.outletConnected(t,e,s)))}disconnectOutlet(t,e,s){var n;this.outletElementsByName.has(s,e)&&(this.outletsByName.delete(s,t),this.outletElementsByName.delete(s,e),(n=this.selectorObserverMap.get(s))===null||n===void 0||n.pause(()=>this.delegate.outletDisconnected(t,e,s)))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const e of this.outletElementsByName.getValuesForKey(t))for(const s of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(s,e,t)}updateSelectorObserverForOutlet(t){const e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){const e=this.selector(t),s=new ol(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,s),s.start()}setupAttributeObserverForOutlet(t){const e=this.attributeNameForOutletName(t),s=new Wn(this.scope.element,e,this);this.attributeObserverMap.set(t,s),s.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){const t=new Ve;return this.router.modules.forEach(e=>{const s=e.definition.controllerConstructor;_t(s,"outlets").forEach(i=>t.add(i,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(s=>s.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class vl{constructor(t,e){this.logDebugActivity=(s,n={})=>{const{identifier:i,controller:a,element:l}=this;n=Object.assign({identifier:i,controller:a,element:l},n),this.application.logDebugActivity(this.identifier,s,n)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new ul(this,this.dispatcher),this.valueObserver=new fl(this,this.controller),this.targetObserver=new ml(this,this),this.outletObserver=new yl(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(s){this.handleError(s,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,s={}){const{identifier:n,controller:i,element:a}=this;s=Object.assign({identifier:n,controller:i,element:a},s),this.application.handleError(t,`Error ${e}`,s)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,s){this.invokeControllerMethod(`${Ds(s)}OutletConnected`,t,e)}outletDisconnected(t,e,s){this.invokeControllerMethod(`${Ds(s)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){const s=this.controller;typeof s[t]=="function"&&s[t](...e)}}function wl(r){return Tl(r,kl(r))}function Tl(r,t){const e=Cl(r),s=El(r.prototype,t);return Object.defineProperties(e.prototype,s),e}function kl(r){return _t(r,"blessings").reduce((e,s)=>{const n=s(r);for(const i in n){const a=e[i]||{};e[i]=Object.assign(a,n[i])}return e},{})}function El(r,t){return xl(t).reduce((e,s)=>{const n=Sl(r,t,s);return n&&Object.assign(e,{[s]:n}),e},{})}function Sl(r,t,e){const s=Object.getOwnPropertyDescriptor(r,e);if(!(s&&"value"in s)){const i=Object.getOwnPropertyDescriptor(t,e).value;return s&&(i.get=s.get||i.get,i.set=s.set||i.set),i}}const xl=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,Cl=(()=>{function r(e){function s(){return Reflect.construct(e,arguments,new.target)}return s.prototype=Object.create(e.prototype,{constructor:{value:s}}),Reflect.setPrototypeOf(s,e),s}function t(){const s=r(function(){this.a.call(this)});return s.prototype.a=function(){},new s}try{return t(),r}catch{return s=>class extends s{}}})();function Ll(r){return{identifier:r.identifier,controllerConstructor:wl(r.controllerConstructor)}}class Al{constructor(t,e){this.application=t,this.definition=Ll(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new vl(this,t),this.contextsByScope.set(t,e)),e}}class Ml{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const e=this.data.get(this.getDataKey(t))||"";return Qo(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class _l{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const s=this.getAttributeNameForKey(t);return this.element.setAttribute(s,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${zn(t)}`}}class Dl{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,s){let n=this.warnedKeysByObject.get(t);n||(n=new Set,this.warnedKeysByObject.set(t,n)),n.has(e)||(n.add(e),this.logger.warn(s,t))}}function Ps(r,t){return`[${r}~="${t}"]`}class Ol{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,s)=>e||this.findTarget(s)||this.findLegacyTarget(s),void 0)}findAll(...t){return t.reduce((e,s)=>[...e,...this.findAllTargets(s),...this.findAllLegacyTargets(s)],[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){const e=this.schema.targetAttributeForScope(this.identifier);return Ps(e,t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(s=>this.deprecate(s,t))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return Ps(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:s}=this,n=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(s);this.guide.warn(t,`target:${e}`,`Please replace ${n}="${s}.${e}" with ${i}="${e}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class Pl{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,s)=>e||this.findOutlet(s),void 0)}findAll(...t){return t.reduce((e,s)=>[...e,...this.findAllOutlets(s)],[])}getSelectorForOutletName(t){const e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){const e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){const e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(n=>this.matchesElement(n,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(n=>this.matchesElement(n,t,e))}matchesElement(t,e,s){const n=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&n.split(" ").includes(s)}}class rr{constructor(t,e,s,n){this.targets=new Ol(this),this.classes=new Ml(this),this.data=new _l(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=s,this.guide=new Dl(n),this.outlets=new Pl(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return Ps(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new rr(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Fl{constructor(t,e,s){this.element=t,this.schema=e,this.delegate=s,this.valueListObserver=new Jn(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:s}=t;return this.parseValueForElementAndIdentifier(e,s)}parseValueForElementAndIdentifier(t,e){const s=this.fetchScopesByIdentifierForElement(t);let n=s.get(e);return n||(n=this.delegate.createScopeForElementAndIdentifier(t,e),s.set(e,n)),n}elementMatchedValue(t,e){const s=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,s),s==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const s=this.scopeReferenceCounts.get(e);s&&(this.scopeReferenceCounts.set(e,s-1),s==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class Il{constructor(t){this.application=t,this.scopeObserver=new Fl(this.element,this.schema,this),this.scopesByIdentifier=new Ve,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new Al(this.application,t);this.connectModule(e);const s=t.controllerConstructor.afterLoad;s&&s.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const s=this.modulesByIdentifier.get(e);if(s)return s.contexts.find(n=>n.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){const s=this.scopeObserver.parseValueForElementAndIdentifier(t,e);s?this.scopeObserver.elementMatchedValue(s.element,s):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,s){this.application.handleError(t,e,s)}createScopeForElementAndIdentifier(t,e){return new rr(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(s=>t.connectContextForScope(s))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(s=>t.disconnectContextForScope(s))}}const Rl={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,t)=>`data-${r}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Ar("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),Ar("0123456789".split("").map(r=>[r,r])))};function Ar(r){return r.reduce((t,[e,s])=>Object.assign(Object.assign({},t),{[e]:s}),{})}class Bl{constructor(t=document.documentElement,e=Rl){this.logger=console,this.debug=!1,this.logDebugActivity=(s,n,i={})=>{this.debug&&this.logFormattedMessage(s,n,i)},this.element=t,this.schema=e,this.dispatcher=new Wo(this),this.router=new Il(this),this.actionDescriptorFilters=Object.assign({},Ko)}static start(t,e){const s=new this(t,e);return s.start(),s}async start(){await Vl(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(n=>{n.controllerConstructor.shouldLoad&&this.router.loadDefinition(n)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){const s=this.router.getContextForElementAndIdentifier(t,e);return s?s.controller:null}handleError(t,e,s){var n;this.logger.error(`%s

%o

%o`,e,t,s),(n=window.onerror)===null||n===void 0||n.call(window,e,"",0,0,t)}logFormattedMessage(t,e,s={}){s=Object.assign({application:this},s),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},s)),this.logger.groupEnd()}}function Vl(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function Nl(r){return _t(r,"classes").reduce((e,s)=>Object.assign(e,jl(s)),{})}function jl(r){return{[`${r}Class`]:{get(){const{classes:t}=this;if(t.has(r))return t.get(r);{const e=t.getAttributeName(r);throw new Error(`Missing attribute "${e}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${Mt(r)}Class`]:{get(){return this.classes.has(r)}}}}function Hl(r){return _t(r,"outlets").reduce((e,s)=>Object.assign(e,ql(s)),{})}function Mr(r,t,e){return r.application.getControllerForElementAndIdentifier(t,e)}function _r(r,t,e){let s=Mr(r,t,e);if(s||(r.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),s=Mr(r,t,e),s))return s}function ql(r){const t=Ds(r);return{[`${t}Outlet`]:{get(){const e=this.outlets.find(r),s=this.outlets.getSelectorForOutletName(r);if(e){const n=_r(this,e,r);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${t}Outlets`]:{get(){const e=this.outlets.findAll(r);return e.length>0?e.map(s=>{const n=_r(this,s,r);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,s)}).filter(s=>s):[]}},[`${t}OutletElement`]:{get(){const e=this.outlets.find(r),s=this.outlets.getSelectorForOutletName(r);if(e)return e;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${Mt(t)}Outlet`]:{get(){return this.outlets.has(r)}}}}function $l(r){return _t(r,"targets").reduce((e,s)=>Object.assign(e,zl(s)),{})}function zl(r){return{[`${r}Target`]:{get(){const t=this.targets.find(r);if(t)return t;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${Mt(r)}Target`]:{get(){return this.targets.has(r)}}}}function Ul(r){const t=gl(r,"values"),e={valueDescriptorMap:{get(){return t.reduce((s,n)=>{const i=Xn(n,this.identifier),a=this.data.getAttributeNameForKey(i.key);return Object.assign(s,{[a]:i})},{})}}};return t.reduce((s,n)=>Object.assign(s,Wl(n)),e)}function Wl(r,t){const e=Xn(r,t),{key:s,name:n,reader:i,writer:a}=e;return{[n]:{get(){const l=this.data.get(s);return l!==null?i(l):e.defaultValue},set(l){l===void 0?this.data.delete(s):this.data.set(s,a(l))}},[`has${Mt(n)}`]:{get(){return this.data.has(s)||e.hasCustomDefaultValue}}}}function Xn([r,t],e){return Gl({controller:e,token:r,typeDefinition:t})}function Zt(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ft(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function Kl(r){const{controller:t,token:e,typeObject:s}=r,n=xr(s.type),i=xr(s.default),a=n&&i,l=n&&!i,d=!n&&i,f=Zt(s.type),m=ft(r.typeObject.default);if(l)return f;if(d)return m;if(f!==m){const k=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${k}" must match the defined type "${f}". The provided default value of "${s.default}" is of type "${m}".`)}if(a)return f}function Yl(r){const{controller:t,token:e,typeDefinition:s}=r,i=Kl({controller:t,token:e,typeObject:s}),a=ft(s),l=Zt(s),d=i||a||l;if(d)return d;const f=t?`${t}.${s}`:e;throw new Error(`Unknown value type "${f}" for "${e}" value`)}function Jl(r){const t=Zt(r);if(t)return Dr[t];const e=Os(r,"default"),s=Os(r,"type"),n=r;if(e)return n.default;if(s){const{type:i}=n,a=Zt(i);if(a)return Dr[a]}return r}function Gl(r){const{token:t,typeDefinition:e}=r,s=`${zn(t)}-value`,n=Yl(r);return{type:n,key:s,name:sr(s),get defaultValue(){return Jl(e)},get hasCustomDefaultValue(){return ft(e)!==void 0},reader:Xl[n],writer:Or[n]||Or.default}}const Dr={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Xl={array(r){const t=JSON.parse(r);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${ft(t)}"`);return t},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){const t=JSON.parse(r);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${ft(t)}"`);return t},string(r){return r}},Or={default:Zl,array:Pr,object:Pr};function Pr(r){return JSON.stringify(r)}function Zl(r){return`${r}`}class H{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:s={},prefix:n=this.identifier,bubbles:i=!0,cancelable:a=!0}={}){const l=n?`${n}:${t}`:t,d=new CustomEvent(l,{detail:s,bubbles:i,cancelable:a});return e.dispatchEvent(d),d}}H.blessings=[Nl,$l,Ul,Hl];H.targets=[];H.outlets=[];H.values={};class Fs extends H{async load(t){t.preventDefault(),this.hasButtonTarget&&(this.buttonTarget.disabled=!0,this.buttonTarget.classList.add("opacity-50","cursor-not-allowed")),this.hasLoadingIndicatorTarget&&this.loadingIndicatorTarget.classList.remove("hidden"),this.hasErrorMessageTarget&&this.errorMessageTarget.classList.add("hidden");try{const e=await fetch(this.urlValue,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const s=await e.json();if(!s.success)throw new Error(s.error||"Unknown error occurred");this.injectExdecs(s.exdec_html),this.showSuccessMessage(s.count)}catch(e){console.error("Failed to load article exdecs:",e),this.showErrorMessage(e.message)}finally{this.hasLoadingIndicatorTarget&&this.loadingIndicatorTarget.classList.add("hidden")}}injectExdecs(t){Object.entries(t).forEach(([e,s])=>{const n=document.getElementById(`art-${e}`);if(n){const i=n.querySelector("[data-exdec-section]");i&&i.remove();const a=document.createElement("div");a.setAttribute("data-exdec-section",""),a.innerHTML=s,n.appendChild(a)}})}showSuccessMessage(t){const e=document.querySelector("[data-exdec-warning]");e&&e.classList.add("hidden"),this.hasErrorMessageTarget&&this.errorMessageTarget.classList.add("hidden"),this.hasSuccessMessageTarget&&this.successMessageTarget.classList.remove("hidden"),this.hasToggleButtonTarget&&this.toggleButtonTarget.classList.remove("hidden")}showErrorMessage(t){this.hasSuccessMessageTarget&&this.successMessageTarget.classList.add("hidden"),this.hasErrorMessageTarget&&(this.errorMessageTarget.textContent=t,this.errorMessageTarget.classList.remove("hidden")),this.hasButtonTarget&&(this.buttonTarget.disabled=!1,this.buttonTarget.classList.remove("opacity-50","cursor-not-allowed"))}toggleExdecs(t){var n;t.preventDefault();const e=document.querySelectorAll("[data-exdec-section]"),s=(n=e[0])==null?void 0:n.classList.contains("hidden");e.forEach(i=>{s?i.classList.remove("hidden"):i.classList.add("hidden")}),this.hasToggleButtonTarget&&(s?(this.toggleButtonTarget.classList.remove("btn-toggle-inactive"),this.toggleButtonTarget.classList.add("btn-toggle-active","btn-toggle-exdecs"),this.hasToggleButtonTextTarget&&(this.toggleButtonTextTarget.textContent="Verberg uitvoeringsbesluiten")):(this.toggleButtonTarget.classList.remove("btn-toggle-active","btn-toggle-exdecs"),this.toggleButtonTarget.classList.add("btn-toggle-inactive"),this.hasToggleButtonTextTarget&&(this.toggleButtonTextTarget.textContent="Toon uitvoeringsbesluiten")))}}g(Fs,"values",{url:String}),g(Fs,"targets",["button","loadingIndicator","errorMessage","successMessage","toggleButton","toggleButtonText"]);const Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Fs},Symbol.toStringTag,{value:"Module"}));class Is extends H{connect(){this.loadPreferences(),this.showColorsValue?document.body.classList.remove("ww-hide-ref-colors"):document.body.classList.add("ww-hide-ref-colors"),this.showReferencesValue?document.body.classList.remove("ww-hide-references"):(document.body.classList.add("ww-hide-references"),document.body.classList.add("ww-hide-ref-colors")),this.showHighlightValue?document.body.classList.remove("ww-hide-highlight"):document.body.classList.add("ww-hide-highlight"),this.syncColorsButton(),this.syncHighlightButton(),this.syncReferencesButton(),setTimeout(()=>this.applyPreferencesToFrame(),100),document.addEventListener("turbo:frame-load",this.handleFrameLoad.bind(this)),document.addEventListener("turbo:before-fetch-request",this.handleBeforeFetch.bind(this))}disconnect(){document.removeEventListener("turbo:frame-load",this.handleFrameLoad.bind(this)),document.removeEventListener("turbo:before-fetch-request",this.handleBeforeFetch.bind(this))}loadPreferences(){const t=localStorage.getItem("ww_show_colors"),e=localStorage.getItem("ww_show_exdecs");t!==null&&(this.showColorsValue=t==="true"),e!==null&&(this.showExdecsValue=e==="true");const s=localStorage.getItem("ww_show_highlight");s!==null&&(this.showHighlightValue=s==="true");const n=localStorage.getItem("ww_show_references");n!==null&&(this.showReferencesValue=n==="true")}applyPreferencesToFrame(){const t=this.element.querySelector("#law_articles")||document.getElementById("law_articles");if(!t||t.hasAttribute("busy")||t.hasAttribute("complete"))return;const e=t.getAttribute("src");if(!e)return;let s;try{e.startsWith("http://")||e.startsWith("https://")?s=new URL(e):s=new URL(e,window.location.href)}catch(l){console.error("Failed to parse frame src:",e,l);return}const n=s.searchParams.get("show_colors"),i=s.searchParams.get("show_exdecs");(this.showColorsValue===!1&&n!=="false"||this.showExdecsValue===!1&&i!=="false")&&(s.searchParams.set("show_colors",this.showColorsValue.toString()),s.searchParams.set("show_exdecs",this.showExdecsValue.toString()),t.setAttribute("src",s.toString()))}toggleColors(t){if(t.preventDefault(),!this.showReferencesValue){this.showReferencesDisabledMessage();return}const e=!this.showColorsValue;this.showColorsValue=e,localStorage.setItem("ww_show_colors",e.toString()),e?document.body.classList.remove("ww-hide-ref-colors"):document.body.classList.add("ww-hide-ref-colors"),this.syncColorsButton()}toggleExdecs(t){t.preventDefault();const e=!this.showExdecsValue;this.showExdecsValue=e,localStorage.setItem("ww_show_exdecs",e.toString()),this.showSpinner(),this.navigateWithPreferences()}navigateWithPreferences(){var n;const t=this.element.querySelector("#law_articles")||((n=this.element.closest("#tekst"))==null?void 0:n.querySelector("#law_articles"))||document.getElementById("law_articles");if(!t)return;const e=t.getAttribute("src")||t.getAttribute("data-src");if(!e)return;const s=new URL(e,window.location.origin);s.searchParams.set("show_colors",this.showColorsValue.toString()),s.searchParams.set("show_exdecs",this.showExdecsValue.toString()),t.setAttribute("src",s.toString())}showSpinner(){this.hasSpinnerTarget&&this.spinnerTarget.classList.remove("hidden")}hideSpinner(){this.hasSpinnerTarget&&this.spinnerTarget.classList.add("hidden")}handleBeforeFetch(t){const e=t.target;e&&e.id==="law_articles"&&this.showSpinner()}handleFrameLoad(t){const e=t.target;e&&e.id==="law_articles"&&this.hideSpinner()}syncColorsButton(){const t=this.element.querySelector("[data-colors-toggle]");if(!t)return;const e=this.showColorsValue,s=document.documentElement.lang==="fr";e?(t.classList.remove("btn-toggle-inactive"),t.classList.add("btn-toggle-active"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
          <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
        </svg>
        ${s?"Masquer les couleurs":"Verberg kleuren"}
      `):(t.classList.remove("btn-toggle-active"),t.classList.add("btn-toggle-inactive"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"/>
          <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"/>
        </svg>
        ${s?"Afficher les couleurs":"Toon kleuren"}
      `)}syncHighlightButton(){const t=this.element.querySelector("[data-highlight-toggle]");if(!t)return;const e=this.showHighlightValue,s=document.documentElement.lang==="fr";e?(t.classList.remove("btn-toggle-inactive"),t.classList.add("btn-toggle-active"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
        </svg>
        ${s?"Masquer le surlignage":"Verberg markering"}
      `):(t.classList.remove("btn-toggle-active"),t.classList.add("btn-toggle-inactive"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
        </svg>
        ${s?"Afficher le surlignage":"Toon markering"}
      `)}toggleHighlight(t){if(t.preventDefault(),!this.showReferencesValue){this.showReferencesDisabledMessage();return}const e=!this.showHighlightValue;this.showHighlightValue=e,localStorage.setItem("ww_show_highlight",e.toString()),e?document.body.classList.remove("ww-hide-highlight"):document.body.classList.add("ww-hide-highlight"),this.syncHighlightButton()}toggleReferences(t){t.preventDefault();const e=!this.showReferencesValue;this.showReferencesValue=e,localStorage.setItem("ww_show_references",e.toString()),e?(document.body.classList.remove("ww-hide-references"),this.showColorsValue&&document.body.classList.remove("ww-hide-ref-colors"),this.showHighlightValue&&document.body.classList.remove("ww-hide-highlight")):(document.body.classList.add("ww-hide-references"),document.body.classList.add("ww-hide-ref-colors"),document.body.classList.add("ww-hide-highlight")),this.syncReferencesButton(),this.syncColorsButton(),this.syncHighlightButton()}showReferencesDisabledMessage(){const e=document.documentElement.lang==="fr"?"Activez d'abord 'Afficher les modifications' pour utiliser les couleurs et le surlignage.":"Schakel eerst 'Toon wijzigingen' in om kleuren en markering te kunnen gebruiken.";this.showToast(e)}showToast(t){const e=document.querySelector(".ww-toast");e&&e.remove();const s=document.createElement("div");s.className="ww-toast fixed bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-3 bg-gray-800 dark:bg-gray-700 text-white text-sm rounded-lg shadow-lg z-50 animate-fade-in",s.textContent=t,document.body.appendChild(s),setTimeout(()=>{s.classList.add("opacity-0","transition-opacity","duration-300"),setTimeout(()=>s.remove(),300)},3e3)}showColorsValueChanged(){}showExdecsValueChanged(){}showHighlightValueChanged(){}showReferencesValueChanged(){}syncReferencesButton(){const t=this.element.querySelector("[data-references-toggle]");if(!t)return;const e=this.showReferencesValue,s=document.documentElement.lang==="fr";if(e?(t.classList.remove("btn-toggle-inactive"),t.classList.add("btn-toggle-active"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
        </svg>
        ${s?"Masquer les modifications":"Verberg wijzigingen"}
      `):(t.classList.remove("btn-toggle-active"),t.classList.add("btn-toggle-inactive"),t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
        </svg>
        ${s?"Afficher les modifications":"Toon wijzigingen"}
      `),e){const n=this.element.querySelector("[data-colors-toggle]"),i=this.element.querySelector("[data-highlight-toggle]");n&&n.classList.remove("opacity-50","cursor-not-allowed"),i&&i.classList.remove("opacity-50","cursor-not-allowed")}else{const n=this.element.querySelector("[data-colors-toggle]"),i=this.element.querySelector("[data-highlight-toggle]");n&&n.classList.add("opacity-50","cursor-not-allowed"),i&&i.classList.add("opacity-50","cursor-not-allowed")}}}g(Is,"targets",["spinner"]),g(Is,"values",{showColors:{type:Boolean,default:!0},showExdecs:{type:Boolean,default:!0},showHighlight:{type:Boolean,default:!0},showReferences:{type:Boolean,default:!0}});const ec=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));class Rs extends H{connect(){this.onFrameLoad=this.onFrameLoad.bind(this);const t=this.hasFrameValue?this.frameValue:"law_articles";this.frame=document.getElementById(t),this.frame&&this.frame.addEventListener("turbo:frame-load",this.onFrameLoad),document.addEventListener("turbo:frame-load",this.onFrameLoad)}disconnect(){this.frame&&this.frame.removeEventListener("turbo:frame-load",this.onFrameLoad),document.removeEventListener("turbo:frame-load",this.onFrameLoad)}onFrameLoad(t){const e=this.hasFrameValue?this.frameValue:"law_articles",s=t.target;s&&s.id===e&&this.hideIndicator()}hideIndicator(){this.hasIndicatorTarget&&(this.indicatorTarget.classList.add("opacity-0","transition-opacity","duration-300"),setTimeout(()=>{this.indicatorTarget.classList.add("hidden")},300))}}g(Rs,"targets",["indicator"]),g(Rs,"values",{frame:String});const tc=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"}));class Bs extends H{connect(){this.updateUI(),window.addEventListener("storage",this.handleStorageChange.bind(this)),document.addEventListener("bookmark:updated",this.handleBookmarkUpdate.bind(this))}disconnect(){window.removeEventListener("storage",this.handleStorageChange.bind(this)),document.removeEventListener("bookmark:updated",this.handleBookmarkUpdate.bind(this))}toggle(t){var i,a;(i=t==null?void 0:t.preventDefault)==null||i.call(t),(a=t==null?void 0:t.stopPropagation)==null||a.call(t);const e=this.getBookmarks(),s=this.numacValue,n=e.findIndex(l=>l.numac===s);n>-1?(e.splice(n,1),this.showToast(this.isFrench?"Signet supprimÃ©":"Bladwijzer verwijderd")):(e.push({numac:s,title:this.titleValue||"",addedAt:new Date().toISOString(),url:window.location.href}),this.showToast(this.isFrench?"Signet ajoutÃ©":"Bladwijzer toegevoegd")),this.saveBookmarks(e),this.dispatchUpdate()}remove(t){var i;(i=t==null?void 0:t.preventDefault)==null||i.call(t);const e=t.currentTarget.dataset.numac;if(!e)return;const n=this.getBookmarks().filter(a=>a.numac!==e);this.saveBookmarks(n),this.dispatchUpdate(),this.showToast(this.isFrench?"Signet supprimÃ©":"Bladwijzer verwijderd")}clearAll(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=this.isFrench?"Supprimer tous les signets ?":"Alle bladwijzers verwijderen?";confirm(e)&&(this.saveBookmarks([]),this.dispatchUpdate(),this.showToast(this.isFrench?"Tous les signets supprimÃ©s":"Alle bladwijzers verwijderd"))}exportBookmarks(t){var l;(l=t==null?void 0:t.preventDefault)==null||l.call(t);const e=this.getBookmarks();if(e.length===0){this.showToast(this.isFrench?"Aucun signet Ã  exporter":"Geen bladwijzers om te exporteren");return}const s=JSON.stringify(e,null,2),n=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`wetwijzer-bookmarks-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),this.showToast(this.isFrench?"Signets exportÃ©s":"Bladwijzers geÃ«xporteerd")}importBookmarks(t){const e=t.target.files[0];if(!e)return;const s=new FileReader;s.onload=n=>{try{const i=JSON.parse(n.target.result);if(!Array.isArray(i))throw new Error("Invalid format");const a=this.getBookmarks(),l=new Set(a.map(m=>m.numac));let d=0;i.forEach(m=>{m.numac&&!l.has(m.numac)&&(a.push({numac:m.numac,title:m.title||"",addedAt:m.addedAt||new Date().toISOString(),url:m.url||""}),d++)}),this.saveBookmarks(a),this.dispatchUpdate();const f=this.isFrench?`${d} signet(s) importÃ©(s)`:`${d} bladwijzer(s) geÃ¯mporteerd`;this.showToast(f)}catch{this.showToast(this.isFrench?"Fichier invalide":"Ongeldig bestand")}},s.readAsText(e),t.target.value=""}getBookmarks(){try{const t=localStorage.getItem(this.storageKeyValue);return t?JSON.parse(t):[]}catch(t){return console.warn("Failed to read bookmarks:",t),[]}}saveBookmarks(t){try{localStorage.setItem(this.storageKeyValue,JSON.stringify(t))}catch(e){console.warn("Failed to save bookmarks:",e)}}isBookmarked(){return this.numacValue?this.getBookmarks().some(e=>e.numac===this.numacValue):!1}updateUI(){if(this.hasIconTarget){const t=this.isBookmarked();this.iconTarget.classList.toggle("bookmarked",t),this.iconTarget.setAttribute("aria-pressed",t.toString())}if(this.hasCountTarget){const t=this.getBookmarks().length;this.countTarget.textContent=t}if(this.hasListTarget&&this.renderList(),this.hasEmptyMessageTarget){const t=this.getBookmarks().length===0;this.emptyMessageTarget.classList.toggle("hidden",!t)}if(this.hasExportBtnTarget){const t=this.getBookmarks().length===0;this.exportBtnTarget.disabled=t,this.exportBtnTarget.classList.toggle("opacity-50",t)}}renderList(){if(!this.hasListTarget)return;const t=this.getBookmarks();if(t.length===0){this.listTarget.innerHTML="";return}t.sort((e,s)=>new Date(s.addedAt)-new Date(e.addedAt)),this.listTarget.innerHTML=t.map(e=>`
      <div class="flex items-start justify-between gap-2 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700">
        <a href="/laws/${e.numac}" class="flex-1 min-w-0 text-sm font-medium text-[var(--accent-600)] dark:text-[var(--accent-400)] hover:underline truncate">
          ${this.escapeHtml(e.title||e.numac)}
        </a>
        <button type="button" 
                class="shrink-0 p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors"
                data-action="click->bookmark#remove"
                data-numac="${e.numac}"
                title="${this.isFrench?"Supprimer":"Verwijderen"}">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
        </button>
      </div>
    `).join("")}handleStorageChange(t){t.key===this.storageKeyValue&&this.updateUI()}handleBookmarkUpdate(){this.updateUI()}dispatchUpdate(){document.dispatchEvent(new CustomEvent("bookmark:updated"))}showToast(t){const e=document.querySelector(".bookmark-toast");e&&e.remove();const s=document.createElement("div");s.className="bookmark-toast fixed bottom-6 left-1/2 -translate-x-1/2 z-[9999] px-4 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium rounded-lg shadow-lg animate-fade-in-up",s.textContent=t,s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},2e3)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}get isFrench(){return document.documentElement.lang==="fr"}}g(Bs,"targets",["icon","count","list","emptyMessage","exportBtn","importInput"]),g(Bs,"values",{numac:String,title:String,storageKey:{type:String,default:"wetwijzer_bookmarks"}});const sc=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"}));class Zn extends H{connect(){this.loadBookmarks()}loadBookmarks(){const t=this.getBookmarks(),e=this.getLocale();if(t.length===0){this.showEmpty();return}this.hideEmpty(),this.updateCount(t.length),this.listTarget.innerHTML="";const s=document.getElementById("bookmark-item-template");s&&t.forEach(n=>{const i=s.content.cloneNode(!0);i.querySelector(".bookmark-item");const a=i.querySelector(".bookmark-link"),l=i.querySelector(".bookmark-numac"),d=i.querySelector(".bookmark-remove"),f=n.title||n.numac;a.textContent=f,a.href=`/laws/${n.numac}?language_id=${e==="fr"?2:1}`,l.textContent=`NUMAC ${n.numac}`,d.addEventListener("click",()=>this.removeBookmark(n.numac)),this.listTarget.appendChild(i)})}removeBookmark(t){const e=this.getBookmarks().filter(s=>s.numac!==t);this.saveBookmarks(e),this.loadBookmarks(),this.showToast(this.getLocale()==="fr"?"Signet supprimÃ©":"Bladwijzer verwijderd")}exportBookmarks(){const t=this.getBookmarks();if(t.length===0){this.showToast(this.getLocale()==="fr"?"Aucun signet Ã  exporter":"Geen bladwijzers om te exporteren");return}const e=JSON.stringify(t,null,2),s=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download=`wetwijzer-bookmarks-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),this.showToast(this.getLocale()==="fr"?"Signets exportÃ©s":"Bladwijzers geÃ«xporteerd")}importBookmarks(t){const e=t.target.files[0];if(!e)return;const s=new FileReader;s.onload=n=>{try{const i=JSON.parse(n.target.result);if(!Array.isArray(i))throw new Error("Invalid format");const a=this.getBookmarks(),l=new Set(a.map(m=>m.numac));let d=0;i.forEach(m=>{m.numac&&!l.has(m.numac)&&(a.push({numac:m.numac,title:m.title||m.numac,addedAt:m.addedAt||new Date().toISOString()}),d++)}),this.saveBookmarks(a),this.loadBookmarks();const f=this.getLocale();this.showToast(f==="fr"?`${d} signet(s) importÃ©(s)`:`${d} bladwijzer(s) geÃ¯mporteerd`)}catch{this.showToast(this.getLocale()==="fr"?"Fichier invalide":"Ongeldig bestand")}},s.readAsText(e),t.target.value=""}clearAll(){const t=this.getLocale()==="fr"?"Supprimer tous les signets ?":"Alle bladwijzers verwijderen?";confirm(t)&&(this.saveBookmarks([]),this.loadBookmarks(),this.showToast(this.getLocale()==="fr"?"Signets supprimÃ©s":"Bladwijzers verwijderd"))}getBookmarks(){try{const t=localStorage.getItem("wetwijzer_bookmarks");if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.map(s=>typeof s=="string"?{numac:s,title:s,addedAt:null}:s):[]}catch{return[]}}saveBookmarks(t){localStorage.setItem("wetwijzer_bookmarks",JSON.stringify(t))}updateCount(t){if(this.hasCountTarget){const s=this.getLocale()==="fr"?"signets":"bladwijzers";this.countTarget.textContent=`${t} ${s}`}}showEmpty(){this.hasEmptyTarget&&this.emptyTarget.classList.remove("hidden"),this.hasListTarget&&this.listTarget.classList.add("hidden"),this.updateCount(0)}hideEmpty(){this.hasEmptyTarget&&this.emptyTarget.classList.add("hidden"),this.hasListTarget&&this.listTarget.classList.remove("hidden")}showToast(t){const e=document.querySelector(".bookmarks-toast");e&&e.remove();const s=document.createElement("div");s.className="bookmarks-toast fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in-up",s.textContent=t,document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},2500)}getLocale(){return document.documentElement.lang||"nl"}}g(Zn,"targets",["list","empty","count"]);const rc=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"}));class Vs extends H{connect(){this.conversationHistory=[],this.conversationId=null,this.messageCount=0,this.loadPreferences(),this.hasWidgetTarget&&this.widgetTarget.classList.toggle("hidden",!this.openValue),this.hasMessagesTarget&&this.messagesTarget.children.length===0&&this.addWelcomeMessage()}disconnect(){this.savePreferences()}toggle(){this.openValue=!this.openValue,this.hasWidgetTarget&&this.widgetTarget.classList.toggle("hidden",!this.openValue),this.openValue&&this.hasInputTarget&&this.inputTarget.focus(),this.openValue&&this.hasBadgeTarget&&this.badgeTarget.classList.add("hidden")}close(){this.openValue=!1,this.hasWidgetTarget&&this.widgetTarget.classList.add("hidden")}handleKeydown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.send())}updateLanguage(t){this.languageValue=t.target.value,this.savePreferences()}updateSource(t){this.sourceValue=t.target.value,this.savePreferences()}updateSources(){const t=[];this.hasSourceLegislationTarget&&this.sourceLegislationTarget.checked&&t.push("legislation"),this.hasSourceJurisprudenceTarget&&this.sourceJurisprudenceTarget.checked&&t.push("jurisprudence"),this.hasSourceParliamentaryTarget&&this.sourceParliamentaryTarget.checked&&t.push("parliamentary"),t.length===0?(this.sourceValue="legislation",this.hasSourceLegislationTarget&&(this.sourceLegislationTarget.checked=!0)):t.length===1?this.sourceValue=t[0]:this.sourceValue=t.join(","),this.savePreferences()}getSelectedSources(){const t=[];return this.hasSourceLegislationTarget&&this.sourceLegislationTarget.checked&&t.push("legislation"),this.hasSourceJurisprudenceTarget&&this.sourceJurisprudenceTarget.checked&&t.push("jurisprudence"),this.hasSourceParliamentaryTarget&&this.sourceParliamentaryTarget.checked&&t.push("parliamentary"),t.length>0?t:["legislation"]}toggleLocal(t){this.useLocalValue=t.target.checked,this.savePreferences()}async send(){if(this.loadingValue)return;const t=this.inputTarget.value.trim();if(t){this.addMessage("user",t),this.inputTarget.value="",this.conversationHistory.push({role:"user",content:t}),this.loadingValue=!0,this.updateLoadingState(),this.startProgress();try{const e=this.useLocalValue?this.localEndpointValue:this.apiEndpointValue,n=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":this.csrfToken},body:JSON.stringify({question:t,language:this.languageValue,source:this.sourceValue,sources:this.getSelectedSources(),pass:this.passValue,conversation_id:this.conversationId})})).json();this.stopProgress(),this.loadingValue=!1,this.updateLoadingState(),n.error?this.addMessage("error",n.error):(n.conversation_id&&(this.conversationId=n.conversation_id),await this.streamMessage("assistant",n.answer,n.sources,n.response_time),this.conversationHistory.push({role:"assistant",content:n.answer}),n.suggestions&&n.suggestions.length>0&&this.showSuggestions(n.suggestions))}catch(e){console.error("Chatbot error:",e),this.stopProgress(),this.loadingValue=!1,this.updateLoadingState(),this.addMessage("error",this.languageValue==="fr"?"Erreur de connexion. Veuillez rÃ©essayer.":"Verbindingsfout. Probeer opnieuw.")}}}addMessage(t,e,s=null,n=null){const i=document.createElement("div");i.className=this.getMessageClasses(t),i.dataset.messageId=++this.messageCount;const a=document.createElement("div");if(a.className="message-content",a.innerHTML=this.formatMessage(e),i.appendChild(a),s&&s.length>0){const l=this.createSourcesElement(s);i.appendChild(l)}if(t==="assistant"){const l=this.createMetaElement(n,this.messageCount);i.appendChild(l)}this.messagesTarget.appendChild(i),this.scrollToBottom()}async streamMessage(t,e,s=null,n=null){const i=document.createElement("div");i.className=this.getMessageClasses(t),i.dataset.messageId=++this.messageCount;const a=document.createElement("div");a.className="message-content",i.appendChild(a),this.messagesTarget.appendChild(i);const l=e.split("");let d="";for(let m=0;m<l.length;m++){d+=l[m],a.innerHTML=this.formatMessage(d),m%10===0&&this.scrollToBottom();const k=e.length>500?5:15;await new Promise(w=>setTimeout(w,k))}if(s&&s.length>0){const m=this.createSourcesElement(s);i.appendChild(m)}const f=this.createMetaElement(n,this.messageCount);i.appendChild(f),this.scrollToBottom()}createSourcesElement(t){const e=document.createElement("div");e.className="message-sources mt-2 pt-2 border-t border-gray-200 dark:border-gray-600 text-xs";let n=`<div class="font-medium text-gray-500 dark:text-gray-400 mb-1">${this.languageValue==="fr"?"Sources:":"Bronnen:"}</div>`;return t.forEach((i,a)=>{const l=i.law_title||i.title||"Unknown",d=i.relevance?` (${(i.relevance*100).toFixed(0)}%)`:"";let f=l;if(i.article_title){const m=i.article_title.match(/Art\.?\s*(\d+\S*)/i);if(m){const k=m[1];f=(this.languageValue==="fr"?`Article ${k} de la `:`Artikel ${k} van de `)+l}else f=i.article_title+" "+l}i.url?n+=`<div class="text-blue-600 dark:text-blue-400 hover:underline">
          <a href="${i.url}" target="_blank">${a+1}. ${f}${d}</a>
        </div>`:n+=`<div class="text-gray-600 dark:text-gray-300">${a+1}. ${f}${d}</div>`}),e.innerHTML=n,e}createMetaElement(t,e){const s=document.createElement("div");s.className="message-meta mt-2 flex items-center justify-between text-xs text-gray-400";const n=t?`${t}s`:"",i=this.languageValue==="fr"?"Utile":"Nuttig",a=this.languageValue==="fr"?"Pas utile":"Niet nuttig",l=this.languageValue==="fr"?"Copier":"KopiÃ«ren";return s.innerHTML=`
      <span>${n}</span>
      <div class="feedback-buttons flex gap-2" data-message-id="${e}">
        <button type="button" 
                class="copy-btn hover:text-blue-500 transition-colors p-1 rounded"
                data-action="click->chatbot#copyAnswer"
                title="${l}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
          </svg>
        </button>
        <button type="button" 
                class="word-btn hover:text-blue-500 transition-colors p-1 rounded"
                data-action="click->chatbot#exportWord"
                title="Word">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
        </button>
        <button type="button" 
                class="save-btn hover:text-yellow-500 transition-colors p-1 rounded"
                data-action="click->chatbot#saveAnswer"
                title="${this.languageValue==="fr"?"Sauvegarder":"Opslaan"}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
          </svg>
        </button>
        <button type="button" 
                class="feedback-btn hover:text-green-500 transition-colors p-1 rounded"
                data-action="click->chatbot#feedback"
                data-feedback="positive"
                title="${i}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/>
          </svg>
        </button>
        <button type="button"
                class="feedback-btn hover:text-red-500 transition-colors p-1 rounded"
                data-action="click->chatbot#feedback"
                data-feedback="negative"
                title="${a}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"/>
          </svg>
        </button>
      </div>
    `,s}feedback(t){const e=t.currentTarget,s=e.dataset.feedback,n=e.closest(".feedback-buttons"),i=n.dataset.messageId;n.querySelectorAll(".feedback-btn").forEach(a=>{a.classList.remove("text-green-500","text-red-500"),a.disabled=!0}),s==="positive"?e.classList.add("text-green-500"):e.classList.add("text-red-500"),this.sendFeedback(i,s)}async sendFeedback(t,e){var a,l;const s=this.conversationHistory.length;if(s<2)return;const n=((a=this.conversationHistory[s-2])==null?void 0:a.content)||"",i=((l=this.conversationHistory[s-1])==null?void 0:l.content)||"";try{await fetch("/api/chatbot/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:n,answer:i,feedback_type:e,language:this.languageValue,source:this.sourceValue})})}catch(d){console.error("Failed to send feedback:",d)}}exportWord(t){var k,w;const e=t.currentTarget,s=(w=(k=e.closest("[data-message-id]"))==null?void 0:k.parentElement)==null?void 0:w.parentElement;if(!s)return;const n=s.querySelector(".message-content"),i=s.querySelector(".message-sources");if(!n)return;let a=n.innerHTML;i&&(a+=i.innerHTML);const l=`
      <html xmlns:o="urn:schemas-microsoft-com:office:office" 
            xmlns:w="urn:schemas-microsoft-com:office:word" 
            xmlns="http://www.w3.org/TR/REC-html40">
      <head>
        <meta charset="utf-8">
        <title>WetWijzer Chatbot Antwoord</title>
        <style>
          body { font-family: Calibri, Arial, sans-serif; font-size: 11pt; line-height: 1.5; }
          h1, h2, h3 { color: #1e3a5f; }
          strong { font-weight: bold; }
          ul, ol { margin-left: 20px; }
          a { color: #2563eb; text-decoration: underline; }
          .message-sources { margin-top: 20px; padding-top: 10px; border-top: 1px solid #ccc; font-size: 10pt; }
        </style>
      </head>
      <body>
        <h2>WetWijzer Juridisch Antwoord</h2>
        <p><em>Gegenereerd op: ${new Date().toLocaleString()}</em></p>
        <hr>
        ${a}
        <hr>
        <p style="font-size: 9pt; color: #666;">
          Dit is geen officieel juridisch advies. Verifieer altijd bij officiÃ«le bronnen.<br>
          Bron: WetWijzer.be / LisLoi.be
        </p>
      </body>
      </html>
    `,d=new Blob([l],{type:"application/msword"}),f=URL.createObjectURL(d),m=document.createElement("a");m.href=f,m.download=`wetwijzer-antwoord-${Date.now()}.doc`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f),e.classList.add("text-green-500"),setTimeout(()=>e.classList.remove("text-green-500"),2e3)}async saveAnswer(t){var d,f,m;const e=t.currentTarget,s=(f=(d=e.closest("[data-message-id]"))==null?void 0:d.parentElement)==null?void 0:f.parentElement;if(!s)return;const n=s.querySelector(".message-content");if(!n)return;const i=this.conversationHistory.length;if(i<2){alert(this.languageValue==="fr"?"Aucune question Ã  sauvegarder":"Geen vraag om op te slaan");return}const a=((m=this.conversationHistory[i-2])==null?void 0:m.content)||"",l=n.innerText||n.textContent;try{const k=await fetch("/api/chatbot/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:a,answer:l,language:this.languageValue})}),w=await k.json();if(k.ok)e.innerHTML=`<svg class="w-4 h-4 text-yellow-500" fill="currentColor" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
        </svg>`,e.classList.add("text-yellow-500"),e.disabled=!0;else if(k.status===401){const C=this.languageValue==="fr"?"Connectez-vous pour sauvegarder les rÃ©ponses":"Log in om antwoorden op te slaan";alert(C)}else console.error("Save failed:",w.error)}catch(k){console.error("Failed to save:",k)}}copyAnswer(t){var a,l;const e=t.currentTarget,s=(l=(a=e.closest("[data-message-id]"))==null?void 0:a.parentElement)==null?void 0:l.parentElement;if(!s)return;const n=s.querySelector(".message-content");if(!n)return;const i=n.innerText||n.textContent;navigator.clipboard.writeText(i).then(()=>{const d=e.innerHTML;e.innerHTML=`<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
      </svg>`,e.classList.add("text-green-500"),setTimeout(()=>{e.innerHTML=d,e.classList.remove("text-green-500")},2e3)}).catch(d=>{console.error("Failed to copy:",d)})}clear(){this.conversationHistory=[],this.conversationId=null,this.messagesTarget.innerHTML="",this.addWelcomeMessage()}addWelcomeMessage(){let t;this.languageValue==="fr"?t="Bonjour! Je suis l'assistant juridique LisLoi. Posez-moi une question sur la lÃ©gislation belge. Je rÃ©ponds dans la langue de votre question.":this.languageValue==="en"?t="Hi! I'm the WetWijzer legal assistant. Ask me a question about Belgian law. I respond in your input language.":t="Hallo! Ik ben de WetWijzer juridische assistent. Stel me een vraag over Belgische wetgeving. Ik antwoord in de taal van je vraag.",this.addMessage("assistant",t)}showSuggestions(t){const e=this.messagesTarget.querySelector(".suggestions-container");e&&e.remove();const s=document.createElement("div");s.className="suggestions-container flex flex-wrap gap-2 mt-3 mb-2 px-2",t.forEach(n=>{const i=document.createElement("button");i.type="button",i.className="suggestion-btn text-xs px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors border border-blue-200 dark:border-blue-800",i.textContent=n,i.addEventListener("click",()=>{s.remove(),this.inputTarget.value=n,this.ask()}),s.appendChild(i)}),this.messagesTarget.appendChild(s),this.scrollToBottom()}formatMessage(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\[([^\]]+)\]\((https?:\/\/[^\)]+)\)/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code class='bg-gray-100 dark:bg-gray-700 px-1 rounded'>$1</code>").replace(/\n/g,"<br>"):""}getMessageClasses(t){const e="message p-3 rounded-lg mb-3 max-w-[85%]";switch(t){case"user":return`${e} ml-auto bg-blue-500 text-white`;case"assistant":return`${e} bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200`;case"error":return`${e} bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200`;default:return e}}updateLoadingState(){this.hasSendButtonTarget&&(this.sendButtonTarget.disabled=this.loadingValue),this.hasLoadingTarget&&this.loadingTarget.classList.toggle("hidden",!this.loadingValue),this.hasTypingIndicatorTarget&&this.typingIndicatorTarget.classList.toggle("hidden",!this.loadingValue),this.hasInputTarget&&(this.inputTarget.disabled=this.loadingValue)}scrollToBottom(){this.hasMessagesTarget&&(this.messagesTarget.scrollTop=this.messagesTarget.scrollHeight)}get csrfToken(){const t=document.querySelector('meta[name="csrf-token"]');return t?t.content:""}savePreferences(){try{localStorage.setItem("chatbot_preferences",JSON.stringify({language:this.languageValue,source:this.sourceValue,useLocal:this.useLocalValue}))}catch{}}loadPreferences(){try{const t=JSON.parse(localStorage.getItem("chatbot_preferences")||"{}");t.language&&(this.languageValue=t.language),t.source&&(this.sourceValue=t.source),t.useLocal!==void 0&&(this.useLocalValue=t.useLocal),this.hasLanguageSelectTarget&&(this.languageSelectTarget.value=this.languageValue),this.hasSourceSelectTarget&&(this.sourceSelectTarget.value=this.sourceValue),this.hasLocalToggleTarget&&(this.localToggleTarget.checked=this.useLocalValue)}catch{}}startProgress(){this.currentProgress=0,this.updateProgressBar(5,this.languageValue==="fr"?"Traitement...":"Verwerken...");const t=this.languageValue==="fr"?[{progress:15,text:"GÃ©nÃ©ration embedding",duration:1e3},{progress:30,text:"Recherche base de donnÃ©es",duration:2e3},{progress:50,text:"Recherche articles",duration:4e3},{progress:70,text:"Analyse des rÃ©sultats",duration:5e3},{progress:85,text:"Construction contexte",duration:4e3},{progress:95,text:"GÃ©nÃ©ration rÃ©ponse",duration:3e3}]:[{progress:15,text:"Embedding genereren",duration:1e3},{progress:30,text:"Database doorzoeken",duration:2e3},{progress:50,text:"Artikelen zoeken",duration:4e3},{progress:70,text:"Resultaten analyseren",duration:5e3},{progress:85,text:"Context opbouwen",duration:4e3},{progress:95,text:"Antwoord genereren",duration:3e3}];let e=0;const s=()=>{if(e<t.length&&this.progressInterval){const n=t[e];this.updateProgressBar(n.progress,`${n.text}... (${n.progress}%)`),e++,this.progressInterval=setTimeout(s,n.duration)}};this.progressInterval=setTimeout(s,500)}stopProgress(){this.progressInterval&&(clearTimeout(this.progressInterval),this.progressInterval=null),this.updateProgressBar(100,"â Voltooid!"),setTimeout(()=>{this.currentProgress=0},300)}updateProgressBar(t,e){this.currentProgress=t,this.hasProgressBarTarget&&(this.progressBarTarget.style.width=`${t}%`),this.hasProgressTextTarget&&(this.progressTextTarget.textContent=e)}}g(Vs,"targets",["input","messages","sendButton","typingIndicator","widget","toggleButton","badge","languageSelect","sourceSelect","sourceLegislation","sourceJurisprudence","sourceParliamentary","localToggle","loading","progressBar","progressText"]),g(Vs,"values",{open:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},apiEndpoint:{type:String,default:"/api/chatbot/ask"},localEndpoint:{type:String,default:"/api/local_chatbot/ask"},language:{type:String,default:"nl"},source:{type:String,default:"legislation,jurisprudence,parliamentary"},useLocal:{type:Boolean,default:!1},pass:{type:String,default:""}});const nc=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"}));class Qn extends H{showToast(t){const e=document.querySelector(".clipboard-toast");e&&e.remove();const s=document.createElement("div");s.className="clipboard-toast fixed bottom-6 left-1/2 -translate-x-1/2 z-[9999] px-4 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium rounded-lg shadow-lg animate-fade-in-up",s.textContent=t,s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},2e3)}copy(t){var m,k,w,C,S;try{(m=t==null?void 0:t.preventDefault)==null||m.call(t),(k=t==null?void 0:t.stopPropagation)==null||k.call(t)}catch{}const e=this.hasFragmentValue?this.fragmentValue:this.element.dataset.clipboardFragment,s=window.location.origin+window.location.pathname+window.location.search,n=e?`${s}#${e}`:s,i=(t==null?void 0:t.currentTarget)||this.element,a=((w=i==null?void 0:i.getAttribute)==null?void 0:w.call(i,"title"))||"",l=this.hasCopiedLabelValue?this.copiedLabelValue:((C=i==null?void 0:i.getAttribute)==null?void 0:C.call(i,"data-copied-label"))||"Copied!",d=()=>{i&&(i.setAttribute("title",l),i.setAttribute("aria-label",l),this.showToast(l),setTimeout(()=>{i.setAttribute("title",a),i.setAttribute("aria-label",a)},2e3))},f=x=>{try{const _=document.createElement("textarea");_.value=x,_.style.position="fixed",_.style.top="-9999px",_.style.opacity="0",document.body.appendChild(_),_.focus(),_.select();const A=document.execCommand("copy");document.body.removeChild(_),A&&d()}catch{}};(S=navigator==null?void 0:navigator.clipboard)!=null&&S.writeText?navigator.clipboard.writeText(n).then(d).catch(()=>f(n)):f(n)}copyText(t){var d,f,m,k,w;try{(d=t==null?void 0:t.preventDefault)==null||d.call(t),(f=t==null?void 0:t.stopPropagation)==null||f.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((m=e==null?void 0:e.getAttribute)==null?void 0:m.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((k=e==null?void 0:e.getAttribute)==null?void 0:k.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=C=>{try{const S=document.createElement("textarea");S.value=C,S.style.position="fixed",S.style.top="-9999px",S.style.opacity="0",document.body.appendChild(S),S.focus(),S.select();const x=document.execCommand("copy");document.body.removeChild(S),x&&i()}catch{}};let l=null;if(this.hasTextValue)l=this.textValue;else if(this.hasSourceSelectorValue)try{const C=document.querySelector(this.sourceSelectorValue);C&&(l=(C.innerText||"").trim())}catch{}l&&((w=navigator==null?void 0:navigator.clipboard)!=null&&w.writeText?navigator.clipboard.writeText(l).then(i).catch(()=>a(l)):a(l))}copyCleanText(t){var d,f,m,k,w;try{(d=t==null?void 0:t.preventDefault)==null||d.call(t),(f=t==null?void 0:t.stopPropagation)==null||f.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((m=e==null?void 0:e.getAttribute)==null?void 0:m.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((k=e==null?void 0:e.getAttribute)==null?void 0:k.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=C=>{try{const S=document.createElement("textarea");S.value=C,S.style.position="fixed",S.style.top="-9999px",S.style.opacity="0",document.body.appendChild(S),S.focus(),S.select();const x=document.execCommand("copy");document.body.removeChild(S),x&&i()}catch{}};let l=null;if(this.hasSourceSelectorValue)try{const C=document.querySelector(this.sourceSelectorValue);if(C){const S=C.cloneNode(!0),x=S.querySelector(".references-section");x&&x.remove(),S.querySelectorAll(".ref-marker").forEach(A=>A.remove()),S.querySelectorAll(".modification-marker").forEach(A=>A.remove()),S.querySelectorAll(".domain-tag").forEach(A=>A.remove()),S.querySelectorAll("br").forEach(A=>{A.insertAdjacentText("beforebegin",`
`)}),S.querySelectorAll("p, div").forEach(A=>{A.insertAdjacentText("beforebegin",`
`),A.insertAdjacentText("afterend",`
`)}),l=(S.innerText||"").replace(/\t/g," ").split(`
`).map(A=>A.replace(/ +/g," ").trim()).filter((A,y,v)=>!!(A||y>0&&v[y-1])).join(`
`).replace(/\n{3,}/g,`

`).trim()}}catch{}l&&((w=navigator==null?void 0:navigator.clipboard)!=null&&w.writeText?navigator.clipboard.writeText(l).then(i).catch(()=>a(l)):a(l))}copyAllArticles(t){var S,x,_,A,y;try{(S=t==null?void 0:t.preventDefault)==null||S.call(t),(x=t==null?void 0:t.stopPropagation)==null||x.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((_=e==null?void 0:e.getAttribute)==null?void 0:_.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((A=e==null?void 0:e.getAttribute)==null?void 0:A.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=v=>{try{const u=document.createElement("textarea");u.value=v,u.style.position="fixed",u.style.top="-9999px",u.style.opacity="0",document.body.appendChild(u),u.focus(),u.select();const p=document.execCommand("copy");document.body.removeChild(u),p&&i()}catch{}},l=document.getElementById("tekst");if(!l)return;const d=[],f=document.querySelector("[data-law-title]");if(f){const v=f.dataset.extractionDate;v&&d.push(`Geraadpleegd op: ${v}
`);const u=f.innerText.trim();u&&d.push(u+`
`+"=".repeat(80)+`
`)}const m=[],k=l.querySelectorAll(".section-heading h2");k.length>0&&(m.push(`
`+"=".repeat(80)+`
INHOUD
`+"=".repeat(80)+`
`),k.forEach(v=>{const u=v.innerText.trim();u&&m.push(u)}),m.push(`
`)),d.push(m.join(`
`)),l.querySelectorAll(".section-heading h2, article").forEach(v=>{if(v.matches(".section-heading h2")){const u=v.innerText.trim();u&&d.push(`
`+"=".repeat(80)+`
`+u+`
`+"=".repeat(80)+`
`)}else if(v.matches("article")){const u=v.querySelector("h3, strong"),p=u?u.innerText.trim():"",T=v.querySelector('[id^="article-text-"]'),E=T?T.innerText.trim():"";p&&E?d.push(`${p}
${E}
`):E&&d.push(`${E}
`)}});const C=d.join(`
`);C.trim()&&((y=navigator==null?void 0:navigator.clipboard)!=null&&y.writeText?navigator.clipboard.writeText(C).then(i).catch(()=>a(C)):a(C))}copyAllArticlesCitation(t){var S,x,_,A,y;try{(S=t==null?void 0:t.preventDefault)==null||S.call(t),(x=t==null?void 0:t.stopPropagation)==null||x.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((_=e==null?void 0:e.getAttribute)==null?void 0:_.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((A=e==null?void 0:e.getAttribute)==null?void 0:A.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=v=>{try{const u=document.createElement("textarea");u.value=v,u.style.position="fixed",u.style.top="-9999px",u.style.opacity="0",document.body.appendChild(u),u.focus(),u.select();const p=document.execCommand("copy");document.body.removeChild(u),p&&i()}catch{}},l=v=>v.replace(/\t/g," ").split(`
`).map(u=>u.replace(/ +/g," ").trim()).filter((u,p,T)=>!!(u||p>0&&T[p-1])).join(`
`).replace(/\n{3,}/g,`

`).trim(),d=v=>{if(!v)return"";const u=v.cloneNode(!0),p=u.querySelector(".references-section");return p&&p.remove(),u.querySelectorAll(".ref-marker").forEach(T=>T.remove()),u.querySelectorAll(".modification-marker").forEach(T=>T.remove()),u.querySelectorAll(".domain-tag").forEach(T=>T.remove()),u.querySelectorAll("br").forEach(T=>T.insertAdjacentText("beforebegin",`
`)),u.querySelectorAll("p, div").forEach(T=>{T.insertAdjacentText("beforebegin",`
`),T.insertAdjacentText("afterend",`
`)}),l(u.innerText||"")},f=document.getElementById("tekst");if(!f)return;const m=[],k=document.querySelector("[data-law-title]");if(k){const v=k.dataset.extractionDate;v&&m.push(`Geraadpleegd op: ${v}`);const u=k.innerText.trim();u&&m.push(u+`
`)}f.querySelectorAll(".section-heading h2, article").forEach(v=>{if(v.matches(".section-heading h2")){const u=v.innerText.trim();u&&m.push(`
`+u+`
`)}else if(v.matches("article")){const u=v.querySelector("h3, strong"),p=u?u.innerText.trim():"",T=v.querySelector('[id^="article-text-"]'),E=d(T);p&&E?m.push(`${p}
${E}
`):E&&m.push(`${E}
`)}});const C=m.join(`
`).replace(/\n{3,}/g,`

`).trim();C&&((y=navigator==null?void 0:navigator.clipboard)!=null&&y.writeText?navigator.clipboard.writeText(C).then(i).catch(()=>a(C)):a(C))}copyCompareArticles(t){var x,_,A,y,v,u,p,T,E,O,D;try{(x=t==null?void 0:t.preventDefault)==null||x.call(t),(_=t==null?void 0:t.stopPropagation)==null||_.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((A=e==null?void 0:e.getAttribute)==null?void 0:A.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((y=e==null?void 0:e.getAttribute)==null?void 0:y.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=I=>{try{const R=document.createElement("textarea");R.value=I,R.style.position="fixed",R.style.top="-9999px",R.style.opacity="0",document.body.appendChild(R),R.focus(),R.select();const z=document.execCommand("copy");document.body.removeChild(R),z&&i()}catch{}},l=document.querySelectorAll(".flex.gap-2.mb-1");if(!l.length)return;const d=document.querySelectorAll(".flex.gap-2.mb-2.sticky h2"),f=((p=(u=(v=d[0])==null?void 0:v.innerText)==null?void 0:u.match(/\((\w+)\)/))==null?void 0:p[1])||"NL",m=((O=(E=(T=d[1])==null?void 0:T.innerText)==null?void 0:E.match(/\((\w+)\)/))==null?void 0:O[1])||"FR",k=[],C=document.documentElement.lang==="fr"?"ConsultÃ© le":"Geraadpleegd op";k.push(`${C}: ${new Date().toLocaleDateString("nl-BE")}`),k.push(`
${f} / ${m}
${"=".repeat(80)}
`),l.forEach(I=>{var te,Te,Ae,Me;const R=I.querySelectorAll(".flex-1");if(R.length<2)return;const z=((Te=(te=R[0])==null?void 0:te.innerText)==null?void 0:Te.trim())||"-",ee=((Me=(Ae=R[1])==null?void 0:Ae.innerText)==null?void 0:Me.trim())||"-";k.push(`[${f}] ${z}`),k.push(`[${m}] ${ee}`),k.push("---")});const S=k.join(`
`).replace(/\n{3,}/g,`

`).trim();S&&((D=navigator==null?void 0:navigator.clipboard)!=null&&D.writeText?navigator.clipboard.writeText(S).then(i).catch(()=>a(S)):a(S))}copyCompareArticlesCitation(t){var _,A,y,v,u,p,T,E,O,D,I;try{(_=t==null?void 0:t.preventDefault)==null||_.call(t),(A=t==null?void 0:t.stopPropagation)==null||A.call(t)}catch{}const e=(t==null?void 0:t.currentTarget)||this.element,s=((y=e==null?void 0:e.getAttribute)==null?void 0:y.call(e,"title"))||"",n=this.hasCopiedLabelValue?this.copiedLabelValue:((v=e==null?void 0:e.getAttribute)==null?void 0:v.call(e,"data-copied-label"))||"Copied!",i=()=>{e&&(e.setAttribute("title",n),e.setAttribute("aria-label",n),this.showToast(n),setTimeout(()=>{e.setAttribute("title",s),e.setAttribute("aria-label",s)},2e3))},a=R=>{try{const z=document.createElement("textarea");z.value=R,z.style.position="fixed",z.style.top="-9999px",z.style.opacity="0",document.body.appendChild(z),z.focus(),z.select();const ee=document.execCommand("copy");document.body.removeChild(z),ee&&i()}catch{}},l=R=>R&&R.replace(/\[\d+\s*\]\d+/g,"").replace(/\[\d+\]/g,"").replace(/\(\d+\)<[^>]*>/g,"").replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim()||"-",d=document.querySelectorAll(".flex.gap-2.mb-1");if(!d.length)return;const f=document.querySelectorAll(".flex.gap-2.mb-2.sticky h2"),m=((T=(p=(u=f[0])==null?void 0:u.innerText)==null?void 0:p.match(/\((\w+)\)/))==null?void 0:T[1])||"NL",k=((D=(O=(E=f[1])==null?void 0:E.innerText)==null?void 0:O.match(/\((\w+)\)/))==null?void 0:D[1])||"FR",w=[],C=document.documentElement.lang==="fr",S=C?"ConsultÃ© le":"Geraadpleegd op";w.push(`${S}: ${new Date().toLocaleDateString("nl-BE")}`),w.push(`
${m} / ${k} (${C?"citation":"citaat"})
${"=".repeat(80)}
`),d.forEach(R=>{var Te,Ae,Me,nt;const z=R.querySelectorAll(".flex-1");if(z.length<2)return;const ee=l((Ae=(Te=z[0])==null?void 0:Te.innerText)==null?void 0:Ae.trim()),te=l((nt=(Me=z[1])==null?void 0:Me.innerText)==null?void 0:nt.trim());w.push(`[${m}] ${ee}`),w.push(`[${k}] ${te}`),w.push("---")});const x=w.join(`
`).replace(/\n{3,}/g,`

`).trim();x&&((I=navigator==null?void 0:navigator.clipboard)!=null&&I.writeText?navigator.clipboard.writeText(x).then(i).catch(()=>a(x)):a(x))}}g(Qn,"values",{fragment:String,copiedLabel:String,text:String,sourceSelector:String});const ic=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));class Ns extends H{connect(){const t=this.element.classList.contains("is-collapsed"),e=this.expandedValue;t===e&&this.syncNow(),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded",e?"true":"false")}toggle(t){t==null||t.preventDefault(),this.expandedValue=!this.expandedValue,this.syncNow()}syncNow(){const t=this.expandedValue;if(this.element.classList.toggle("is-collapsed",!t),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded",t?"true":"false"),this.hasToggleTextTarget){const e=this.toggleTextTarget.dataset.collapseShowText,s=this.toggleTextTarget.dataset.collapseHideText;this.toggleTextTarget.textContent=t?s:e}}}g(Ns,"targets",["content","icon","button","toggleText"]),g(Ns,"values",{expanded:{type:Boolean,default:!0}});const ac=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"}));class ei extends H{connect(){(this.element.querySelector('select option:checked:not([value=""])')||this.element.querySelector('input[type="date"]:not([value=""])'))&&this.show()}toggle(){this.contentTarget.classList.contains("hidden")?this.show():this.hide()}show(){this.contentTarget.classList.remove("hidden"),this.contentTarget.classList.add("block")}hide(){this.contentTarget.classList.add("hidden"),this.contentTarget.classList.remove("block")}}g(ei,"targets",["content","toggleBtn"]);const oc=Object.freeze(Object.defineProperty({__proto__:null,default:ei},Symbol.toStringTag,{value:"Module"}));class ti extends H{connect(){!this.acceptedValue&&!this.hasConsent()&&setTimeout(()=>{this.element.classList.remove("translate-y-full")},500)}hasConsent(){return document.cookie.includes("cookie_consent=")}accept(){this.setCookie("cookie_consent","accepted",365),this.hideBanner()}decline(){this.setCookie("cookie_consent","declined",365),this.hideBanner()}hideBanner(){this.element.classList.add("translate-y-full"),setTimeout(()=>{this.element.remove()},300)}setCookie(t,e,s){let n="";if(s>0){const i=new Date;i.setTime(i.getTime()+s*24*60*60*1e3),n="; expires="+i.toUTCString()}document.cookie=t+"="+e+n+"; path=/; SameSite=Lax"}}g(ti,"values",{accepted:Boolean});const lc=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"}));class js extends H{connect(){this.closeOnClickOutside=this.closeOnClickOutside.bind(this),document.addEventListener("click",this.closeOnClickOutside),this.preferredFormat=localStorage.getItem("wetwijzer_copy_format")||"full"}disconnect(){document.removeEventListener("click",this.closeOnClickOutside)}toggle(t){var e,s;if((e=t==null?void 0:t.preventDefault)==null||e.call(t),(s=t==null?void 0:t.stopPropagation)==null||s.call(t),this.hasMenuTarget){const n=this.menuTarget.classList.contains("hidden");this.menuTarget.classList.toggle("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded",n?"true":"false")}}closeOnClickOutside(t){!this.element.contains(t.target)&&this.hasMenuTarget&&(this.menuTarget.classList.add("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded","false"))}copyPreferred(t){var s;switch((s=t==null?void 0:t.preventDefault)==null||s.call(t),this.preferredFormat||"full"){case"short":this.copyShort(t);break;case"legal":this.copyLegal(t);break;case"numac":this.copyNumac(t);break;case"url":this.copyUrl(t);break;default:this.copyFull(t)}}copyFull(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=this.buildFullCitation();this.copyToClipboard(e),this.savePreferredFormat("full")}copyShort(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=this.buildShortCitation();this.copyToClipboard(e),this.savePreferredFormat("short")}copyLegal(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=this.buildLegalCitation();this.copyToClipboard(e),this.savePreferredFormat("legal")}copyNumac(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=`NUMAC ${this.numacValue}`;this.copyToClipboard(e),this.savePreferredFormat("numac")}copyUrl(t){var s;(s=t==null?void 0:t.preventDefault)==null||s.call(t);const e=window.location.href;this.copyToClipboard(e),this.savePreferredFormat("url")}savePreferredFormat(t){this.preferredFormat=t,localStorage.setItem("wetwijzer_copy_format",t)}buildFullCitation(){const t=[];if(this.hasArticleValue&&this.articleValue){const e=this.isFrench?"l'article":"artikel";t.push(`${e} ${this.articleValue}`),this.hasParagraphValue&&this.paragraphValue&&t.push(`Â§ ${this.paragraphValue}`);const s=this.isFrench?"du":"van het";t.push(s)}if(t.push(this.titleValue||this.numacValue),this.hasDateValue&&this.dateValue){const e=this.isFrench?"MB":"BS";t.push(`(${e} ${this.formatDate(this.dateValue)})`)}return t.join(" ")}buildShortCitation(){const t=[];return this.hasArticleValue&&this.articleValue&&(t.push(`Art. ${this.articleValue}`),this.hasParagraphValue&&this.paragraphValue&&t.push(`Â§${this.paragraphValue}`)),this.hasAbbreviationValue&&this.abbreviationValue?t.push(this.abbreviationValue):t.push(this.numacValue),t.join(" ")}buildLegalCitation(){const t=[];return this.hasAbbreviationValue&&this.abbreviationValue?t.push(this.abbreviationValue):t.push(this.numacValue),this.hasArticleValue&&this.articleValue&&(t.push(`art. ${this.articleValue}`),this.hasParagraphValue&&this.paragraphValue&&t.push(`Â§${this.paragraphValue}`)),t.join(", ").replace(/, Â§/,", Â§")}formatDate(t){if(!t)return"";try{const e=new Date(t);if(isNaN(e.getTime()))return t;const s=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return`${s}-${n}-${i}`}catch{return t}}copyToClipboard(t){var n;const e=()=>{this.showToast(this.isFrench?"RÃ©fÃ©rence copiÃ©e!":"Referentie gekopieerd!"),this.hasMenuTarget&&(this.menuTarget.classList.add("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded","false"))},s=i=>{try{const a=document.createElement("textarea");a.value=i,a.style.position="fixed",a.style.top="-9999px",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select();const l=document.execCommand("copy");document.body.removeChild(a),l&&e()}catch(a){console.warn("Copy failed:",a)}};(n=navigator==null?void 0:navigator.clipboard)!=null&&n.writeText?navigator.clipboard.writeText(t).then(e).catch(()=>s(t)):s(t)}showToast(t){const e=document.querySelector(".copy-ref-toast");e&&e.remove();const s=document.createElement("div");s.className="copy-ref-toast fixed bottom-6 left-1/2 -translate-x-1/2 z-[9999] px-4 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium rounded-lg shadow-lg animate-fade-in-up",s.textContent=t,s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},2e3)}get isFrench(){return document.documentElement.lang==="fr"}}g(js,"targets",["menu","button"]),g(js,"values",{numac:String,title:String,abbreviation:String,date:String,article:String,paragraph:String});const cc=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"}));class si extends H{connect(){this.applyTheme(),this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQuery.addEventListener("change",this.handleSystemThemeChange.bind(this))}disconnect(){this.mediaQuery&&this.mediaQuery.removeEventListener("change",this.handleSystemThemeChange.bind(this))}toggle(t){t==null||t.preventDefault();try{const s=document.documentElement.classList.contains(this.darkClassValue)?"light":"dark";this.setTheme(s),this.applyTheme()}catch(e){console.warn("Failed to toggle theme:",e)}}applyTheme(){try{const t=this.shouldUseDarkTheme();t?document.documentElement.classList.add(this.darkClassValue):document.documentElement.classList.remove(this.darkClassValue),document.dispatchEvent(new CustomEvent("theme:change",{detail:{theme:t?"dark":"light",darkMode:t}}))}catch(t){console.warn("Failed to apply theme:",t)}}shouldUseDarkTheme(){const t=this.getStoredTheme();return t==="dark"?!0:t==="light"?!1:this.systemPrefersDark()}getStoredTheme(){try{return localStorage.getItem(this.storageKeyValue)}catch(t){return console.warn("Failed to read theme from localStorage:",t),null}}setTheme(t){try{localStorage.setItem(this.storageKeyValue,t)}catch(e){console.warn("Failed to save theme to localStorage:",e)}}systemPrefersDark(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(t){return console.warn("Failed to check system theme preference:",t),!1}}handleSystemThemeChange(){this.getStoredTheme()||this.applyTheme()}}g(si,"values",{storageKey:{type:String,default:"theme"},darkClass:{type:String,default:"dark"}});const dc=Object.freeze(Object.defineProperty({__proto__:null,default:si},Symbol.toStringTag,{value:"Module"}));class ri extends H{connect(){this.clickOutsideHandler=this.clickOutside.bind(this),document.addEventListener("click",this.clickOutsideHandler)}disconnect(){document.removeEventListener("click",this.clickOutsideHandler)}toggle(t){t.stopPropagation(),this.menuTarget.classList.contains("hidden")?this.open():this.close()}open(){this.menuTarget.classList.remove("hidden"),this.buttonTarget.setAttribute("aria-expanded","true"),this.hasArrowTarget&&this.arrowTarget.classList.add("rotate-180")}close(){this.menuTarget.classList.add("hidden"),this.buttonTarget.setAttribute("aria-expanded","false"),this.hasArrowTarget&&this.arrowTarget.classList.remove("rotate-180")}clickOutside(t){this.element.contains(t.target)||this.close()}}g(ri,"targets",["button","menu","arrow"]);const hc=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"}));class Hs extends H{async download(t){t.preventDefault(),this.element.disabled=!0,this.iconTarget.classList.add("hidden"),this.spinnerTarget.classList.remove("hidden"),this.hasLabelTarget&&(this.labelTarget.textContent="Bezig...");try{const e=await fetch(this.urlValue);if(!e.ok)throw new Error(`Export failed: ${e.status}`);const s=await e.blob(),n=window.URL.createObjectURL(s),i=document.createElement("a");i.style.display="none",i.href=n,i.download=this.filenameValue,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i),this.showSuccess()}catch(e){console.error("Export error:",e),this.showError()}finally{setTimeout(()=>{this.reset()},2e3)}}showSuccess(){this.hasLabelTarget&&(this.labelTarget.textContent="GeÃ«xporteerd!"),this.element.classList.add("text-green-600","dark:text-green-400")}showError(){this.hasLabelTarget&&(this.labelTarget.textContent="Fout"),this.element.classList.add("text-red-600","dark:text-red-400")}reset(){this.element.disabled=!1,this.spinnerTarget.classList.add("hidden"),this.iconTarget.classList.remove("hidden"),this.hasLabelTarget&&(this.labelTarget.textContent="Word"),this.element.classList.remove("text-green-600","dark:text-green-400","text-red-600","dark:text-red-400")}}g(Hs,"targets",["icon","spinner","label"]),g(Hs,"values",{url:String,filename:String});const uc=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"}));class ni extends H{connect(){this.syncAria()}toggle(){this.hasPanelTarget&&(this.panelTarget.classList.toggle("hidden"),this.syncAria())}syncAria(){if(!this.hasPanelTarget)return;const t=!this.panelTarget.classList.contains("hidden");this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded",t?"true":"false")}}g(ni,"targets",["panel","button"]);const fc=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"}));var Ts=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ke={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var t=new Date(r.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},mt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var t=r%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ie=function(r,t){return t===void 0&&(t=2),("000"+r).slice(t*-1)},de=function(r){return r===!0?1:0};function Fr(r,t){var e;return function(){var s=this,n=arguments;clearTimeout(e),e=setTimeout(function(){return r.apply(s,n)},t)}}var ks=function(r){return r instanceof Array?r:[r]};function ne(r,t,e){if(e===!0)return r.classList.add(t);r.classList.remove(t)}function W(r,t,e){var s=window.document.createElement(r);return t=t||"",e=e||"",s.className=t,e!==void 0&&(s.textContent=e),s}function jt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ii(r,t){if(t(r))return r;if(r.parentNode)return ii(r.parentNode,t)}function Ht(r,t){var e=W("div","numInputWrapper"),s=W("input","numInput "+r),n=W("span","arrowUp"),i=W("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),t!==void 0)for(var a in t)s.setAttribute(a,t[a]);return e.appendChild(s),e.appendChild(n),e.appendChild(i),e}function oe(r){try{if(typeof r.composedPath=="function"){var t=r.composedPath();return t[0]}return r.target}catch{return r.target}}var Es=function(){},Qt=function(r,t,e){return e.months[t?"shorthand":"longhand"][r]},mc={D:Es,F:function(r,t,e){r.setMonth(e.months.longhand.indexOf(t))},G:function(r,t){r.setHours((r.getHours()>=12?12:0)+parseFloat(t))},H:function(r,t){r.setHours(parseFloat(t))},J:function(r,t){r.setDate(parseFloat(t))},K:function(r,t,e){r.setHours(r.getHours()%12+12*de(new RegExp(e.amPM[1],"i").test(t)))},M:function(r,t,e){r.setMonth(e.months.shorthand.indexOf(t))},S:function(r,t){r.setSeconds(parseFloat(t))},U:function(r,t){return new Date(parseFloat(t)*1e3)},W:function(r,t,e){var s=parseInt(t),n=new Date(r.getFullYear(),0,2+(s-1)*7,0,0,0,0);return n.setDate(n.getDate()-n.getDay()+e.firstDayOfWeek),n},Y:function(r,t){r.setFullYear(parseFloat(t))},Z:function(r,t){return new Date(t)},d:function(r,t){r.setDate(parseFloat(t))},h:function(r,t){r.setHours((r.getHours()>=12?12:0)+parseFloat(t))},i:function(r,t){r.setMinutes(parseFloat(t))},j:function(r,t){r.setDate(parseFloat(t))},l:Es,m:function(r,t){r.setMonth(parseFloat(t)-1)},n:function(r,t){r.setMonth(parseFloat(t)-1)},s:function(r,t){r.setSeconds(parseFloat(t))},u:function(r,t){return new Date(parseFloat(t))},w:Es,y:function(r,t){r.setFullYear(2e3+parseFloat(t))}},Oe={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ht={Z:function(r){return r.toISOString()},D:function(r,t,e){return t.weekdays.shorthand[ht.w(r,t,e)]},F:function(r,t,e){return Qt(ht.n(r,t,e)-1,!1,t)},G:function(r,t,e){return ie(ht.h(r,t,e))},H:function(r){return ie(r.getHours())},J:function(r,t){return t.ordinal!==void 0?r.getDate()+t.ordinal(r.getDate()):r.getDate()},K:function(r,t){return t.amPM[de(r.getHours()>11)]},M:function(r,t){return Qt(r.getMonth(),!0,t)},S:function(r){return ie(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,t,e){return e.getWeek(r)},Y:function(r){return ie(r.getFullYear(),4)},d:function(r){return ie(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return ie(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,t){return t.weekdays.longhand[r.getDay()]},m:function(r){return ie(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}},ai=function(r){var t=r.config,e=t===void 0?Ke:t,s=r.l10n,n=s===void 0?mt:s,i=r.isMobile,a=i===void 0?!1:i;return function(l,d,f){var m=f||n;return e.formatDate!==void 0&&!a?e.formatDate(l,d,m):d.split("").map(function(k,w,C){return ht[k]&&C[w-1]!=="\\"?ht[k](l,m,e):k!=="\\"?k:""}).join("")}},qs=function(r){var t=r.config,e=t===void 0?Ke:t,s=r.l10n,n=s===void 0?mt:s;return function(i,a,l,d){if(!(i!==0&&!i)){var f=d||n,m,k=i;if(i instanceof Date)m=new Date(i.getTime());else if(typeof i!="string"&&i.toFixed!==void 0)m=new Date(i);else if(typeof i=="string"){var w=a||(e||Ke).dateFormat,C=String(i).trim();if(C==="today")m=new Date,l=!0;else if(e&&e.parseDate)m=e.parseDate(i,w);else if(/Z$/.test(C)||/GMT$/.test(C))m=new Date(i);else{for(var S=void 0,x=[],_=0,A=0,y="";_<w.length;_++){var v=w[_],u=v==="\\",p=w[_-1]==="\\"||u;if(Oe[v]&&!p){y+=Oe[v];var T=new RegExp(y).exec(i);T&&(S=!0)&&x[v!=="Y"?"push":"unshift"]({fn:mc[v],val:T[++A]})}else u||(y+=".")}m=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),x.forEach(function(E){var O=E.fn,D=E.val;return m=O(m,D,f)||m}),m=S?m:void 0}}if(!(m instanceof Date&&!isNaN(m.getTime()))){e.errorHandler(new Error("Invalid date provided: "+k));return}return l===!0&&m.setHours(0,0,0,0),m}}};function le(r,t,e){return e===void 0&&(e=!0),e!==!1?new Date(r.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):r.getTime()-t.getTime()}var gc=function(r,t,e){return r>Math.min(t,e)&&r<Math.max(t,e)},Ss=function(r,t,e){return r*3600+t*60+e},pc=function(r){var t=Math.floor(r/3600),e=(r-t*3600)/60;return[t,e,r-t*3600-e*60]},bc={DAY:864e5};function xs(r){var t=r.defaultHour,e=r.defaultMinute,s=r.defaultSeconds;if(r.minDate!==void 0){var n=r.minDate.getHours(),i=r.minDate.getMinutes(),a=r.minDate.getSeconds();t<n&&(t=n),t===n&&e<i&&(e=i),t===n&&e===i&&s<a&&(s=r.minDate.getSeconds())}if(r.maxDate!==void 0){var l=r.maxDate.getHours(),d=r.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(d,e)),t===l&&e===d&&(s=r.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!r)throw TypeError("Cannot convert undefined or null to object");for(var s=function(l){l&&Object.keys(l).forEach(function(d){return r[d]=l[d]})},n=0,i=t;n<i.length;n++){var a=i[n];s(a)}return r});var re=function(){return re=Object.assign||function(r){for(var t,e=1,s=arguments.length;e<s;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},re.apply(this,arguments)},Ir=function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var s=Array(r),n=0,t=0;t<e;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,n++)s[n]=i[a];return s},yc=300;function vc(r,t){var e={config:re(re({},Ke),Z.defaultConfig),l10n:mt};e.parseDate=qs({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=x,e._setHoursFromDate=w,e._positionCalendar=Ft,e.changeMonth=fs,e.changeYear=Dt,e.clear=Ei,e.close=Si,e.onMouseOver=Pt,e._createElement=W,e.createDay=T,e.destroy=xi,e.isEnabled=_e,e.jumpToDate=y,e.updateValue=pe,e.open=Ai,e.redraw=dr,e.set=Oi,e.setDate=Pi,e.toggle=Bi;function s(){e.utils={getDaysInMonth:function(o,c){return o===void 0&&(o=e.currentMonth),c===void 0&&(c=e.currentYear),o===1&&(c%4===0&&c%100!==0||c%400===0)?29:e.l10n.daysInMonth[o]}}}function n(){e.element=e.input=r,e.isOpen=!1,Mi(),cr(),Ii(),Fi(),s(),e.isMobile||p(),A(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&w(e.config.noCalendar?e.latestSelectedDateObj:void 0),pe(!1)),l();var o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&o&&Ft(),J("onReady")}function i(){var o;return((o=e.calendarContainer)===null||o===void 0?void 0:o.getRootNode()).activeElement||document.activeElement}function a(o){return o.bind(e)}function l(){var o=e.config;o.weekNumbers===!1&&o.showMonths===1||o.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var c=(e.days.offsetWidth+1)*o.showMonths;e.daysContainer.style.width=c+"px",e.calendarContainer.style.width=c+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function d(o){if(e.selectedDates.length===0){var c=e.config.minDate===void 0||le(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),h=xs(e.config);c.setHours(h.hours,h.minutes,h.seconds,c.getMilliseconds()),e.selectedDates=[c],e.latestSelectedDateObj=c}o!==void 0&&o.type!=="blur"&&ji(o);var b=e._input.value;k(),pe(),e._input.value!==b&&e._debouncedChange()}function f(o,c){return o%12+12*de(c===e.l10n.amPM[1])}function m(o){switch(o%24){case 0:case 12:return 12;default:return o%12}}function k(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var o=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,c=(parseInt(e.minuteElement.value,10)||0)%60,h=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(o=f(o,e.amPM.textContent));var b=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.minDate,!0)===0,L=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var M=Ss(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),q=Ss(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),F=Ss(o,c,h);if(F>q&&F<M){var $=pc(M);o=$[0],c=$[1],h=$[2]}}else{if(L){var P=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;o=Math.min(o,P.getHours()),o===P.getHours()&&(c=Math.min(c,P.getMinutes())),c===P.getMinutes()&&(h=Math.min(h,P.getSeconds()))}if(b){var V=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;o=Math.max(o,V.getHours()),o===V.getHours()&&c<V.getMinutes()&&(c=V.getMinutes()),c===V.getMinutes()&&(h=Math.max(h,V.getSeconds()))}}C(o,c,h)}}function w(o){var c=o||e.latestSelectedDateObj;c&&c instanceof Date&&C(c.getHours(),c.getMinutes(),c.getSeconds())}function C(o,c,h){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(o%24,c,h||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ie(e.config.time_24hr?o:(12+o)%12+12*de(o%12===0)),e.minuteElement.value=ie(c),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[de(o>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ie(h)))}function S(o){var c=oe(o),h=parseInt(c.value)+(o.delta||0);(h/1e3>1||o.key==="Enter"&&!/[^\d]/.test(h.toString()))&&Dt(h)}function x(o,c,h,b){if(c instanceof Array)return c.forEach(function(L){return x(o,L,h,b)});if(o instanceof Array)return o.forEach(function(L){return x(L,c,h,b)});o.addEventListener(c,h,b),e._handlers.push({remove:function(){return o.removeEventListener(c,h,b)}})}function _(){J("onChange")}function A(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(h){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+h+"]"),function(b){return x(b,"click",e[h])})}),e.isMobile){Ri();return}var o=Fr(Li,50);if(e._debouncedChange=Fr(_,yc),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&x(e.daysContainer,"mouseover",function(h){e.config.mode==="range"&&Pt(oe(h))}),x(e._input,"keydown",ar),e.calendarContainer!==void 0&&x(e.calendarContainer,"keydown",ar),!e.config.inline&&!e.config.static&&x(window,"resize",o),window.ontouchstart!==void 0?x(window.document,"touchstart",ms):x(window.document,"mousedown",ms),x(window.document,"focus",ms,{capture:!0}),e.config.clickOpens===!0&&(x(e._input,"focus",e.open),x(e._input,"click",e.open)),e.daysContainer!==void 0&&(x(e.monthNav,"click",Ni),x(e.monthNav,["keyup","increment"],S),x(e.daysContainer,"click",hr)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var c=function(h){return oe(h).select()};x(e.timeContainer,["increment"],d),x(e.timeContainer,"blur",d,{capture:!0}),x(e.timeContainer,"click",v),x([e.hourElement,e.minuteElement],["focus","click"],c),e.secondElement!==void 0&&x(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&x(e.amPM,"click",function(h){d(h)})}e.config.allowInput&&x(e._input,"blur",Ci)}function y(o,c){var h=o!==void 0?e.parseDate(o):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),b=e.currentYear,L=e.currentMonth;try{h!==void 0&&(e.currentYear=h.getFullYear(),e.currentMonth=h.getMonth())}catch(M){M.message="Invalid date supplied: "+h,e.config.errorHandler(M)}c&&e.currentYear!==b&&(J("onYearChange"),ee()),c&&(e.currentYear!==b||e.currentMonth!==L)&&J("onMonthChange"),e.redraw()}function v(o){var c=oe(o);~c.className.indexOf("arrow")&&u(o,c.classList.contains("arrowUp")?1:-1)}function u(o,c,h){var b=o&&oe(o),L=h||b&&b.parentNode&&b.parentNode.firstChild,M=ps("increment");M.delta=c,L&&L.dispatchEvent(M)}function p(){var o=window.document.createDocumentFragment();if(e.calendarContainer=W("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(o.appendChild(Ae()),e.innerContainer=W("div","flatpickr-innerContainer"),e.config.weekNumbers){var c=ki(),h=c.weekWrapper,b=c.weekNumbers;e.innerContainer.appendChild(h),e.weekNumbers=b,e.weekWrapper=h}e.rContainer=W("div","flatpickr-rContainer"),e.rContainer.appendChild(nt()),e.daysContainer||(e.daysContainer=W("div","flatpickr-days"),e.daysContainer.tabIndex=-1),z(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),o.appendChild(e.innerContainer)}e.config.enableTime&&o.appendChild(Me()),ne(e.calendarContainer,"rangeMode",e.config.mode==="range"),ne(e.calendarContainer,"animate",e.config.animate===!0),ne(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(o);var L=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!L&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var M=W("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(M,e.element),M.appendChild(e.element),e.altInput&&M.appendChild(e.altInput),M.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function T(o,c,h,b){var L=_e(c,!0),M=W("span",o,c.getDate().toString());return M.dateObj=c,M.$i=b,M.setAttribute("aria-label",e.formatDate(c,e.config.ariaDateFormat)),o.indexOf("hidden")===-1&&le(c,e.now)===0&&(e.todayDateElem=M,M.classList.add("today"),M.setAttribute("aria-current","date")),L?(M.tabIndex=-1,bs(c)&&(M.classList.add("selected"),e.selectedDateElem=M,e.config.mode==="range"&&(ne(M,"startRange",e.selectedDates[0]&&le(c,e.selectedDates[0],!0)===0),ne(M,"endRange",e.selectedDates[1]&&le(c,e.selectedDates[1],!0)===0),o==="nextMonthDay"&&M.classList.add("inRange")))):M.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Vi(c)&&!bs(c)&&M.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&o!=="prevMonthDay"&&b%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(c)+"</span>"),J("onDayCreate",M),M}function E(o){o.focus(),e.config.mode==="range"&&Pt(o)}function O(o){for(var c=o>0?0:e.config.showMonths-1,h=o>0?e.config.showMonths:-1,b=c;b!=h;b+=o)for(var L=e.daysContainer.children[b],M=o>0?0:L.children.length-1,q=o>0?L.children.length:-1,F=M;F!=q;F+=o){var $=L.children[F];if($.className.indexOf("hidden")===-1&&_e($.dateObj))return $}}function D(o,c){for(var h=o.className.indexOf("Month")===-1?o.dateObj.getMonth():e.currentMonth,b=c>0?e.config.showMonths:-1,L=c>0?1:-1,M=h-e.currentMonth;M!=b;M+=L)for(var q=e.daysContainer.children[M],F=h-e.currentMonth===M?o.$i+c:c<0?q.children.length-1:0,$=q.children.length,P=F;P>=0&&P<$&&P!=(c>0?$:-1);P+=L){var V=q.children[P];if(V.className.indexOf("hidden")===-1&&_e(V.dateObj)&&Math.abs(o.$i-P)>=Math.abs(c))return E(V)}e.changeMonth(L),I(O(L),0)}function I(o,c){var h=i(),b=Ot(h||document.body),L=o!==void 0?o:b?h:e.selectedDateElem!==void 0&&Ot(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ot(e.todayDateElem)?e.todayDateElem:O(c>0?1:-1);L===void 0?e._input.focus():b?D(L,c):E(L)}function R(o,c){for(var h=(new Date(o,c,1).getDay()-e.l10n.firstDayOfWeek+7)%7,b=e.utils.getDaysInMonth((c-1+12)%12,o),L=e.utils.getDaysInMonth(c,o),M=window.document.createDocumentFragment(),q=e.config.showMonths>1,F=q?"prevMonthDay hidden":"prevMonthDay",$=q?"nextMonthDay hidden":"nextMonthDay",P=b+1-h,V=0;P<=b;P++,V++)M.appendChild(T("flatpickr-day "+F,new Date(o,c-1,P),P,V));for(P=1;P<=L;P++,V++)M.appendChild(T("flatpickr-day",new Date(o,c,P),P,V));for(var Y=L+1;Y<=42-h&&(e.config.showMonths===1||V%7!==0);Y++,V++)M.appendChild(T("flatpickr-day "+$,new Date(o,c+1,Y%L),Y,V));var me=W("div","dayContainer");return me.appendChild(M),me}function z(){if(e.daysContainer!==void 0){jt(e.daysContainer),e.weekNumbers&&jt(e.weekNumbers);for(var o=document.createDocumentFragment(),c=0;c<e.config.showMonths;c++){var h=new Date(e.currentYear,e.currentMonth,1);h.setMonth(e.currentMonth+c),o.appendChild(R(h.getFullYear(),h.getMonth()))}e.daysContainer.appendChild(o),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Pt()}}function ee(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var o=function(b){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&b<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&b>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var c=0;c<12;c++)if(o(c)){var h=W("option","flatpickr-monthDropdown-month");h.value=new Date(e.currentYear,c).getMonth().toString(),h.textContent=Qt(c,e.config.shorthandCurrentMonth,e.l10n),h.tabIndex=-1,e.currentMonth===c&&(h.selected=!0),e.monthsDropdownContainer.appendChild(h)}}}function te(){var o=W("div","flatpickr-month"),c=window.document.createDocumentFragment(),h;e.config.showMonths>1||e.config.monthSelectorType==="static"?h=W("span","cur-month"):(e.monthsDropdownContainer=W("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),x(e.monthsDropdownContainer,"change",function(q){var F=oe(q),$=parseInt(F.value,10);e.changeMonth($-e.currentMonth),J("onMonthChange")}),ee(),h=e.monthsDropdownContainer);var b=Ht("cur-year",{tabindex:"-1"}),L=b.getElementsByTagName("input")[0];L.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&L.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(L.setAttribute("max",e.config.maxDate.getFullYear().toString()),L.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var M=W("div","flatpickr-current-month");return M.appendChild(h),M.appendChild(b),c.appendChild(M),o.appendChild(c),{container:o,yearElement:L,monthElement:h}}function Te(){jt(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var o=e.config.showMonths;o--;){var c=te();e.yearElements.push(c.yearElement),e.monthElements.push(c.monthElement),e.monthNav.appendChild(c.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ae(){return e.monthNav=W("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=W("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=W("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Te(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(o){e.__hidePrevMonthArrow!==o&&(ne(e.prevMonthNav,"flatpickr-disabled",o),e.__hidePrevMonthArrow=o)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(o){e.__hideNextMonthArrow!==o&&(ne(e.nextMonthNav,"flatpickr-disabled",o),e.__hideNextMonthArrow=o)}}),e.currentYearElement=e.yearElements[0],Rt(),e.monthNav}function Me(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var o=xs(e.config);e.timeContainer=W("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var c=W("span","flatpickr-time-separator",":"),h=Ht("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=h.getElementsByTagName("input")[0];var b=Ht("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=b.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?o.hours:m(o.hours)),e.minuteElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():o.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(h),e.timeContainer.appendChild(c),e.timeContainer.appendChild(b),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var L=Ht("flatpickr-second");e.secondElement=L.getElementsByTagName("input")[0],e.secondElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():o.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(W("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(L)}return e.config.time_24hr||(e.amPM=W("span","flatpickr-am-pm",e.l10n.amPM[de((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function nt(){e.weekdayContainer?jt(e.weekdayContainer):e.weekdayContainer=W("div","flatpickr-weekdays");for(var o=e.config.showMonths;o--;){var c=W("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(c)}return ir(),e.weekdayContainer}function ir(){if(e.weekdayContainer){var o=e.l10n.firstDayOfWeek,c=Ir(e.l10n.weekdays.shorthand);o>0&&o<c.length&&(c=Ir(c.splice(o,c.length),c.splice(0,o)));for(var h=e.config.showMonths;h--;)e.weekdayContainer.children[h].innerHTML=`
      <span class='flatpickr-weekday'>
        `+c.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function ki(){e.calendarContainer.classList.add("hasWeeks");var o=W("div","flatpickr-weekwrapper");o.appendChild(W("span","flatpickr-weekday",e.l10n.weekAbbreviation));var c=W("div","flatpickr-weeks");return o.appendChild(c),{weekWrapper:o,weekNumbers:c}}function fs(o,c){c===void 0&&(c=!0);var h=c?o:o-e.currentMonth;h<0&&e._hidePrevMonthArrow===!0||h>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=h,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,J("onYearChange"),ee()),z(),J("onMonthChange"),Rt())}function Ei(o,c){if(o===void 0&&(o=!0),c===void 0&&(c=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,c===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var h=xs(e.config),b=h.hours,L=h.minutes,M=h.seconds;C(b,L,M)}e.redraw(),o&&J("onChange")}function Si(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),J("onClose")}function xi(){e.config!==void 0&&J("onDestroy");for(var o=e._handlers.length;o--;)e._handlers[o].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var c=e.calendarContainer.parentNode;if(c.lastChild&&c.removeChild(c.lastChild),c.parentNode){for(;c.firstChild;)c.parentNode.insertBefore(c.firstChild,c);c.parentNode.removeChild(c)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(h){try{delete e[h]}catch{}})}function it(o){return e.calendarContainer.contains(o)}function ms(o){if(e.isOpen&&!e.config.inline){var c=oe(o),h=it(c),b=c===e.input||c===e.altInput||e.element.contains(c)||o.path&&o.path.indexOf&&(~o.path.indexOf(e.input)||~o.path.indexOf(e.altInput)),L=!b&&!h&&!it(o.relatedTarget),M=!e.config.ignoredFocusElements.some(function(q){return q.contains(c)});L&&M&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&d(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Dt(o){if(!(!o||e.config.minDate&&o<e.config.minDate.getFullYear()||e.config.maxDate&&o>e.config.maxDate.getFullYear())){var c=o,h=e.currentYear!==c;e.currentYear=c||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),h&&(e.redraw(),J("onYearChange"),ee())}}function _e(o,c){var h;c===void 0&&(c=!0);var b=e.parseDate(o,void 0,c);if(e.config.minDate&&b&&le(b,e.config.minDate,c!==void 0?c:!e.minDateHasTime)<0||e.config.maxDate&&b&&le(b,e.config.maxDate,c!==void 0?c:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(b===void 0)return!1;for(var L=!!e.config.enable,M=(h=e.config.enable)!==null&&h!==void 0?h:e.config.disable,q=0,F=void 0;q<M.length;q++){if(F=M[q],typeof F=="function"&&F(b))return L;if(F instanceof Date&&b!==void 0&&F.getTime()===b.getTime())return L;if(typeof F=="string"){var $=e.parseDate(F,void 0,!0);return $&&$.getTime()===b.getTime()?L:!L}else if(typeof F=="object"&&b!==void 0&&F.from&&F.to&&b.getTime()>=F.from.getTime()&&b.getTime()<=F.to.getTime())return L}return!L}function Ot(o){return e.daysContainer!==void 0?o.className.indexOf("hidden")===-1&&o.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(o):!1}function Ci(o){var c=o.target===e._input,h=e._input.value.trimEnd()!==ys();c&&h&&!(o.relatedTarget&&it(o.relatedTarget))&&e.setDate(e._input.value,!0,o.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function ar(o){var c=oe(o),h=e.config.wrap?r.contains(c):c===e._input,b=e.config.allowInput,L=e.isOpen&&(!b||!h),M=e.config.inline&&h&&!b;if(o.keyCode===13&&h){if(b)return e.setDate(e._input.value,!0,c===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),c.blur();e.open()}else if(it(c)||L||M){var q=!!e.timeContainer&&e.timeContainer.contains(c);switch(o.keyCode){case 13:q?(o.preventDefault(),d(),gs()):hr(o);break;case 27:o.preventDefault(),gs();break;case 8:case 46:h&&!e.config.allowInput&&(o.preventDefault(),e.clear());break;case 37:case 39:if(!q&&!h){o.preventDefault();var F=i();if(e.daysContainer!==void 0&&(b===!1||F&&Ot(F))){var $=o.keyCode===39?1:-1;o.ctrlKey?(o.stopPropagation(),fs($),I(O(1),0)):I(void 0,$)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:o.preventDefault();var P=o.keyCode===40?1:-1;e.daysContainer&&c.$i!==void 0||c===e.input||c===e.altInput?o.ctrlKey?(o.stopPropagation(),Dt(e.currentYear-P),I(O(1),0)):q||I(void 0,P*7):c===e.currentYearElement?Dt(e.currentYear-P):e.config.enableTime&&(!q&&e.hourElement&&e.hourElement.focus(),d(o),e._debouncedChange());break;case 9:if(q){var V=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(ae){return ae}),Y=V.indexOf(c);if(Y!==-1){var me=V[Y+(o.shiftKey?-1:1)];o.preventDefault(),(me||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(c)&&o.shiftKey&&(o.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&c===e.amPM)switch(o.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],k(),pe();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],k(),pe();break}(h||it(c))&&J("onKeyDown",o)}function Pt(o,c){if(c===void 0&&(c="flatpickr-day"),!(e.selectedDates.length!==1||o&&(!o.classList.contains(c)||o.classList.contains("flatpickr-disabled")))){for(var h=o?o.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),b=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),L=Math.min(h,e.selectedDates[0].getTime()),M=Math.max(h,e.selectedDates[0].getTime()),q=!1,F=0,$=0,P=L;P<M;P+=bc.DAY)_e(new Date(P),!0)||(q=q||P>L&&P<M,P<b&&(!F||P>F)?F=P:P>b&&(!$||P<$)&&($=P));var V=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+c));V.forEach(function(Y){var me=Y.dateObj,ae=me.getTime(),at=F>0&&ae<F||$>0&&ae>$;if(at){Y.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(je){Y.classList.remove(je)});return}else if(q&&!at)return;["startRange","inRange","endRange","notAllowed"].forEach(function(je){Y.classList.remove(je)}),o!==void 0&&(o.classList.add(h<=e.selectedDates[0].getTime()?"startRange":"endRange"),b<h&&ae===b?Y.classList.add("startRange"):b>h&&ae===b&&Y.classList.add("endRange"),ae>=F&&($===0||ae<=$)&&gc(ae,b,h)&&Y.classList.add("inRange"))})}}function Li(){e.isOpen&&!e.config.static&&!e.config.inline&&Ft()}function Ai(o,c){if(c===void 0&&(c=e._positionElement),e.isMobile===!0){if(o){o.preventDefault();var h=oe(o);h&&h.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),J("onOpen");return}else if(e._input.disabled||e.config.inline)return;var b=e.isOpen;e.isOpen=!0,b||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),J("onOpen"),Ft(c)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(o===void 0||!e.timeContainer.contains(o.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function or(o){return function(c){var h=e.config["_"+o+"Date"]=e.parseDate(c,e.config.dateFormat),b=e.config["_"+(o==="min"?"max":"min")+"Date"];h!==void 0&&(e[o==="min"?"minDateHasTime":"maxDateHasTime"]=h.getHours()>0||h.getMinutes()>0||h.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(L){return _e(L)}),!e.selectedDates.length&&o==="min"&&w(h),pe()),e.daysContainer&&(dr(),h!==void 0?e.currentYearElement[o]=h.getFullYear().toString():e.currentYearElement.removeAttribute(o),e.currentYearElement.disabled=!!b&&h!==void 0&&b.getFullYear()===h.getFullYear())}}function Mi(){var o=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],c=re(re({},JSON.parse(JSON.stringify(r.dataset||{}))),t),h={};e.config.parseDate=c.parseDate,e.config.formatDate=c.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(V){e.config._enable=fr(V)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(V){e.config._disable=fr(V)}});var b=c.mode==="time";if(!c.dateFormat&&(c.enableTime||b)){var L=Z.defaultConfig.dateFormat||Ke.dateFormat;h.dateFormat=c.noCalendar||b?"H:i"+(c.enableSeconds?":S":""):L+" H:i"+(c.enableSeconds?":S":"")}if(c.altInput&&(c.enableTime||b)&&!c.altFormat){var M=Z.defaultConfig.altFormat||Ke.altFormat;h.altFormat=c.noCalendar||b?"h:i"+(c.enableSeconds?":S K":" K"):M+(" h:i"+(c.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:or("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:or("max")});var q=function(V){return function(Y){e.config[V==="min"?"_minTime":"_maxTime"]=e.parseDate(Y,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:q("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:q("max")}),c.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,h,c);for(var F=0;F<o.length;F++)e.config[o[F]]=e.config[o[F]]===!0||e.config[o[F]]==="true";Ts.filter(function(V){return e.config[V]!==void 0}).forEach(function(V){e.config[V]=ks(e.config[V]||[]).map(a)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var F=0;F<e.config.plugins.length;F++){var $=e.config.plugins[F](e)||{};for(var P in $)Ts.indexOf(P)>-1?e.config[P]=ks($[P]).map(a).concat(e.config[P]):typeof c[P]>"u"&&(e.config[P]=$[P])}c.altInputClass||(e.config.altInputClass=lr().className+" "+e.config.altInputClass),J("onParseConfig")}function lr(){return e.config.wrap?r.querySelector("[data-input]"):r}function cr(){typeof e.config.locale!="object"&&typeof Z.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=re(re({},Z.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?Z.l10ns[e.config.locale]:void 0),Oe.D="("+e.l10n.weekdays.shorthand.join("|")+")",Oe.l="("+e.l10n.weekdays.longhand.join("|")+")",Oe.M="("+e.l10n.months.shorthand.join("|")+")",Oe.F="("+e.l10n.months.longhand.join("|")+")",Oe.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var o=re(re({},t),JSON.parse(JSON.stringify(r.dataset||{})));o.time_24hr===void 0&&Z.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=ai(e),e.parseDate=qs({config:e.config,l10n:e.l10n})}function Ft(o){if(typeof e.config.position=="function")return void e.config.position(e,o);if(e.calendarContainer!==void 0){J("onPreCalendarPosition");var c=o||e._positionElement,h=Array.prototype.reduce.call(e.calendarContainer.children,(function(Yi,Ji){return Yi+Ji.offsetHeight}),0),b=e.calendarContainer.offsetWidth,L=e.config.position.split(" "),M=L[0],q=L.length>1?L[1]:null,F=c.getBoundingClientRect(),$=window.innerHeight-F.bottom,P=M==="above"||M!=="below"&&$<h&&F.top>h,V=window.pageYOffset+F.top+(P?-h-2:c.offsetHeight+2);if(ne(e.calendarContainer,"arrowTop",!P),ne(e.calendarContainer,"arrowBottom",P),!e.config.inline){var Y=window.pageXOffset+F.left,me=!1,ae=!1;q==="center"?(Y-=(b-F.width)/2,me=!0):q==="right"&&(Y-=b-F.width,ae=!0),ne(e.calendarContainer,"arrowLeft",!me&&!ae),ne(e.calendarContainer,"arrowCenter",me),ne(e.calendarContainer,"arrowRight",ae);var at=window.document.body.offsetWidth-(window.pageXOffset+F.right),je=Y+b>window.document.body.offsetWidth,Hi=at+b>window.document.body.offsetWidth;if(ne(e.calendarContainer,"rightMost",je),!e.config.static)if(e.calendarContainer.style.top=V+"px",!je)e.calendarContainer.style.left=Y+"px",e.calendarContainer.style.right="auto";else if(!Hi)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=at+"px";else{var vs=_i();if(vs===void 0)return;var qi=window.document.body.offsetWidth,$i=Math.max(0,qi/2-b/2),zi=".flatpickr-calendar.centerMost:before",Ui=".flatpickr-calendar.centerMost:after",Wi=vs.cssRules.length,Ki="{left:"+F.left+"px;right:auto;}";ne(e.calendarContainer,"rightMost",!1),ne(e.calendarContainer,"centerMost",!0),vs.insertRule(zi+","+Ui+Ki,Wi),e.calendarContainer.style.left=$i+"px",e.calendarContainer.style.right="auto"}}}}function _i(){for(var o=null,c=0;c<document.styleSheets.length;c++){var h=document.styleSheets[c];if(h.cssRules){try{h.cssRules}catch{continue}o=h;break}}return o??Di()}function Di(){var o=document.createElement("style");return document.head.appendChild(o),o.sheet}function dr(){e.config.noCalendar||e.isMobile||(ee(),Rt(),z())}function gs(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function hr(o){o.preventDefault(),o.stopPropagation();var c=function(V){return V.classList&&V.classList.contains("flatpickr-day")&&!V.classList.contains("flatpickr-disabled")&&!V.classList.contains("notAllowed")},h=ii(oe(o),c);if(h!==void 0){var b=h,L=e.latestSelectedDateObj=new Date(b.dateObj.getTime()),M=(L.getMonth()<e.currentMonth||L.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=b,e.config.mode==="single")e.selectedDates=[L];else if(e.config.mode==="multiple"){var q=bs(L);q?e.selectedDates.splice(parseInt(q),1):e.selectedDates.push(L)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=L,e.selectedDates.push(L),le(L,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(V,Y){return V.getTime()-Y.getTime()}));if(k(),M){var F=e.currentYear!==L.getFullYear();e.currentYear=L.getFullYear(),e.currentMonth=L.getMonth(),F&&(J("onYearChange"),ee()),J("onMonthChange")}if(Rt(),z(),pe(),!M&&e.config.mode!=="range"&&e.config.showMonths===1?E(b):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var $=e.config.mode==="single"&&!e.config.enableTime,P=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;($||P)&&gs()}_()}}var It={locale:[cr,ir],showMonths:[Te,l,nt],minDate:[y],maxDate:[y],positionElement:[mr],clickOpens:[function(){e.config.clickOpens===!0?(x(e._input,"focus",e.open),x(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Oi(o,c){if(o!==null&&typeof o=="object"){Object.assign(e.config,o);for(var h in o)It[h]!==void 0&&It[h].forEach(function(b){return b()})}else e.config[o]=c,It[o]!==void 0?It[o].forEach(function(b){return b()}):Ts.indexOf(o)>-1&&(e.config[o]=ks(c));e.redraw(),pe(!0)}function ur(o,c){var h=[];if(o instanceof Array)h=o.map(function(b){return e.parseDate(b,c)});else if(o instanceof Date||typeof o=="number")h=[e.parseDate(o,c)];else if(typeof o=="string")switch(e.config.mode){case"single":case"time":h=[e.parseDate(o,c)];break;case"multiple":h=o.split(e.config.conjunction).map(function(b){return e.parseDate(b,c)});break;case"range":h=o.split(e.l10n.rangeSeparator).map(function(b){return e.parseDate(b,c)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(o)));e.selectedDates=e.config.allowInvalidPreload?h:h.filter(function(b){return b instanceof Date&&_e(b,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(b,L){return b.getTime()-L.getTime()})}function Pi(o,c,h){if(c===void 0&&(c=!1),h===void 0&&(h=e.config.dateFormat),o!==0&&!o||o instanceof Array&&o.length===0)return e.clear(c);ur(o,h),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),y(void 0,c),w(),e.selectedDates.length===0&&e.clear(!1),pe(c),c&&J("onChange")}function fr(o){return o.slice().map(function(c){return typeof c=="string"||typeof c=="number"||c instanceof Date?e.parseDate(c,void 0,!0):c&&typeof c=="object"&&c.from&&c.to?{from:e.parseDate(c.from,void 0),to:e.parseDate(c.to,void 0)}:c}).filter(function(c){return c})}function Fi(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var o=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);o&&ur(o,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Ii(){if(e.input=lr(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=W(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),mr()}function mr(){e._positionElement=e.config.positionElement||e._input}function Ri(){var o=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=W("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=o,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=o==="datetime-local"?"Y-m-d\\TH:i:S":o==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}x(e.mobileInput,"change",function(c){e.setDate(oe(c).value,!1,e.mobileFormatStr),J("onChange"),J("onClose")})}function Bi(o){if(e.isOpen===!0)return e.close();e.open(o)}function J(o,c){if(e.config!==void 0){var h=e.config[o];if(h!==void 0&&h.length>0)for(var b=0;h[b]&&b<h.length;b++)h[b](e.selectedDates,e.input.value,e,c);o==="onChange"&&(e.input.dispatchEvent(ps("change")),e.input.dispatchEvent(ps("input")))}}function ps(o){var c=document.createEvent("Event");return c.initEvent(o,!0,!0),c}function bs(o){for(var c=0;c<e.selectedDates.length;c++){var h=e.selectedDates[c];if(h instanceof Date&&le(h,o)===0)return""+c}return!1}function Vi(o){return e.config.mode!=="range"||e.selectedDates.length<2?!1:le(o,e.selectedDates[0])>=0&&le(o,e.selectedDates[1])<=0}function Rt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(o,c){var h=new Date(e.currentYear,e.currentMonth,1);h.setMonth(e.currentMonth+c),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[c].textContent=Qt(h.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=h.getMonth().toString(),o.value=h.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function ys(o){var c=o||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(h){return e.formatDate(h,c)}).filter(function(h,b,L){return e.config.mode!=="range"||e.config.enableTime||L.indexOf(h)===b}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function pe(o){o===void 0&&(o=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=ys(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=ys(e.config.altFormat)),o!==!1&&J("onValueUpdate")}function Ni(o){var c=oe(o),h=e.prevMonthNav.contains(c),b=e.nextMonthNav.contains(c);h||b?fs(h?-1:1):e.yearElements.indexOf(c)>=0?c.select():c.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):c.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function ji(o){o.preventDefault();var c=o.type==="keydown",h=oe(o),b=h;e.amPM!==void 0&&h===e.amPM&&(e.amPM.textContent=e.l10n.amPM[de(e.amPM.textContent===e.l10n.amPM[0])]);var L=parseFloat(b.getAttribute("min")),M=parseFloat(b.getAttribute("max")),q=parseFloat(b.getAttribute("step")),F=parseInt(b.value,10),$=o.delta||(c?o.which===38?1:-1:0),P=F+q*$;if(typeof b.value<"u"&&b.value.length===2){var V=b===e.hourElement,Y=b===e.minuteElement;P<L?(P=M+P+de(!V)+(de(V)&&de(!e.amPM)),Y&&u(void 0,-1,e.hourElement)):P>M&&(P=b===e.hourElement?P-M-de(!e.amPM):L,Y&&u(void 0,1,e.hourElement)),e.amPM&&V&&(q===1?P+F===23:Math.abs(P-F)>q)&&(e.amPM.textContent=e.l10n.amPM[de(e.amPM.textContent===e.l10n.amPM[0])]),b.value=ie(P)}}return n(),e}function Ye(r,t){for(var e=Array.prototype.slice.call(r).filter(function(a){return a instanceof HTMLElement}),s=[],n=0;n<e.length;n++){var i=e[n];try{if(i.getAttribute("data-fp-omit")!==null)continue;i._flatpickr!==void 0&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=vc(i,t||{}),s.push(i._flatpickr)}catch(a){console.error(a)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return Ye(this,r)},HTMLElement.prototype.flatpickr=function(r){return Ye([this],r)});var Z=function(r,t){return typeof r=="string"?Ye(window.document.querySelectorAll(r),t):r instanceof Node?Ye([r],t):Ye(r,t)};Z.defaultConfig={};Z.l10ns={en:re({},mt),default:re({},mt)};Z.localize=function(r){Z.l10ns.default=re(re({},Z.l10ns.default),r)};Z.setDefaults=function(r){Z.defaultConfig=re(re({},Z.defaultConfig),r)};Z.parseDate=qs({});Z.formatDate=ai({});Z.compareDates=le;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return Ye(this,r)});Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof r=="string"?parseInt(r,10):r))};typeof window<"u"&&(window.flatpickr=Z);var lt={exports:{}},wc=lt.exports,Rr;function Tc(){return Rr||(Rr=1,(function(r,t){(function(e,s){s(t)})(wc,(function(e){var s=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["zo","ma","di","wo","do","vr","za"],longhand:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},months:{shorthand:["jan","feb","mrt","apr","mei","jun","jul","aug","sept","okt","nov","dec"],longhand:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},firstDayOfWeek:1,weekAbbreviation:"wk",rangeSeparator:" t/m ",scrollTitle:"Scroll voor volgende / vorige",toggleTitle:"Klik om te wisselen",time_24hr:!0,ordinal:function(a){return a===1||a===8||a>=20?"ste":"de"}};s.l10ns.nl=n;var i=s.l10ns;e.Dutch=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})}))})(lt,lt.exports)),lt.exports}var kc=Tc(),ct={exports:{}},Ec=ct.exports,Br;function Sc(){return Br||(Br=1,(function(r,t){(function(e,s){s(t)})(Ec,(function(e){var s=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},n={firstDayOfWeek:1,weekdays:{shorthand:["dim","lun","mar","mer","jeu","ven","sam"],longhand:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},months:{shorthand:["janv","fÃ©vr","mars","avr","mai","juin","juil","aoÃ»t","sept","oct","nov","dÃ©c"],longhand:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"]},ordinal:function(a){return a>1?"":"er"},rangeSeparator:" au ",weekAbbreviation:"Sem",scrollTitle:"DÃ©filer pour augmenter la valeur",toggleTitle:"Cliquer pour basculer",time_24hr:!0};s.l10ns.fr=n;var i=s.l10ns;e.French=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})}))})(ct,ct.exports)),ct.exports}var xc=Sc();class oi extends H{connect(){const t=this.localeValue||"nl";Z(this.element,{locale:t==="fr"?xc.French:kc.Dutch,dateFormat:"d/m/Y",altInput:!1,allowInput:!0,disableMobile:!0})}disconnect(){this.element._flatpickr&&this.element._flatpickr.destroy()}}g(oi,"values",{locale:String});const Cc=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"}));class li extends H{connect(){this.onFrameLoad=this.onFrameLoad.bind(this),this.onFrameRequestStart=this.onFrameRequestStart.bind(this),this.element.addEventListener("turbo:before-fetch-request",this.onFrameRequestStart),this.element.addEventListener("turbo:frame-load",this.onFrameLoad)}disconnect(){this.element.removeEventListener("turbo:before-fetch-request",this.onFrameRequestStart),this.element.removeEventListener("turbo:frame-load",this.onFrameLoad)}onFrameLoad(){this.showCompletedPill()}onFrameRequestStart(){const t=this.mountTarget();this.hasDurationValue&&this.durationValue<=0||this.clearExisting(t)}mountTarget(){if(this.hasMountSelectorValue)try{const t=document.querySelector(this.mountSelectorValue);if(t)return t}catch{}return this.element}clearExisting(t){[".frame-status-progress",".frame-status-pill"].forEach(s=>{const n=t.querySelector(s);n&&n.remove()})}buildMessageText(){const t=this.hasCompletedValue?this.completedValue:"";let e="";if(this.hasResultsValue&&this.resultsValue)e=this.resultsValue;else{const s=this.element.querySelector("[data-frame-status-results]");s&&(e=s.textContent.trim())}return e||t}showLoadingPill(t){const e=document.createElement("div");e.className=["frame-status-progress","not-prose","flex items-center justify-start gap-2 w-full","px-4 py-2 rounded-md","text-sm font-medium","bg-gray-100 text-gray-700 border border-gray-300","dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700","my-4"].join(" "),e.setAttribute("role","status"),e.setAttribute("aria-live","polite");const s=document.createElement("span");s.setAttribute("aria-hidden","true"),s.className="inline-block w-2 h-2 rounded-full bg-gray-500 dark:bg-gray-400 animate-pulse";const n=document.createElement("span"),i=this.hasLoadingValue?this.loadingValue:this.hasCompletedValue?this.completedValue:"Loading...";n.textContent=i,e.appendChild(s),e.appendChild(n);const a=t.firstElementChild;a?t.insertBefore(e,a):t.appendChild(e)}showCompletedPill(){const t=this.mountTarget();this.clearExisting(t);const e=document.documentElement,s=e.classList.contains("theme-slate")||e.classList.contains("theme-indigo")||e.classList.contains("theme-sky")||e.classList.contains("theme-teal")||e.classList.contains("theme-cyan")||e.classList.contains("theme-green")||e.classList.contains("theme-purple")||e.classList.contains("theme-red"),n=document.createElement("div");s?n.className=["frame-status-pill","not-prose","flex items-center justify-start gap-2 w-full","px-4 py-2 rounded-md","text-sm font-medium","bg-gray-100 text-gray-700 border border-gray-300","dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700","my-4"].join(" "):n.className=["frame-status-pill","not-prose","flex items-center justify-start gap-2 w-full","px-4 py-2 rounded-md","text-sm font-medium","bg-green-50 text-green-800 border border-green-200","dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700/50","my-4"].join(" "),n.setAttribute("role","status"),n.setAttribute("aria-live","polite");const i=document.createElement("span");i.setAttribute("aria-hidden","true"),s?i.className="inline-block w-2 h-2 rounded-full bg-gray-500 dark:bg-gray-400":i.className="inline-block w-2 h-2 rounded-full bg-green-500";const a=document.createElement("span");a.className="flex-1",a.textContent=this.buildMessageText();const l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("aria-label","Close"),s?l.className="ml-auto p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 transition-colors":l.className="ml-auto p-1 rounded hover:bg-green-100 dark:hover:bg-emerald-800/50 text-green-600 dark:text-emerald-300 transition-colors",l.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>',l.addEventListener("click",()=>n.remove()),n.appendChild(i),n.appendChild(a),n.appendChild(l);const d=t.firstElementChild;d?t.insertBefore(n,d):t.appendChild(n),(!this.hasDurationValue||this.durationValue>0)&&window.setTimeout(()=>{n.classList.add("opacity-0"),window.setTimeout(()=>n.remove(),300)},this.durationValue||1200)}escape(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}}g(li,"values",{completed:String,results:String,loading:String,duration:{type:Number,default:1200},mountSelector:String});const Lc=Object.freeze(Object.defineProperty({__proto__:null,default:li},Symbol.toStringTag,{value:"Module"}));class $s extends H{connect(){this.timeout=null,this.abortController=null}disconnect(){this.clearTimeout(),this.abortRequest()}search(){const t=this.inputTarget.value.trim();if(t.length<2){this.hideResults();return}this.clearTimeout(),this.timeout=setTimeout(()=>this.performSearch(t),200)}async performSearch(t){this.abortRequest(),this.abortController=new AbortController;try{const e=await fetch(`/api/search?q=${encodeURIComponent(t)}`,{signal:this.abortController.signal,headers:{Accept:"application/json"}});if(!e.ok)throw new Error("Search failed");const s=await e.json();this.renderResults(s)}catch(e){e.name!=="AbortError"&&console.error("Global search error:",e)}}renderResults(t){var a,l,d;const e=((a=t.legislation)==null?void 0:a.length)>0,s=((l=t.jurisprudence)==null?void 0:l.length)>0,n=((d=t.parliamentary)==null?void 0:d.length)>0;if(!e&&!s&&!n){this.resultsTarget.innerHTML=`
        <div class="p-4 text-sm text-gray-500 dark:text-gray-400">
          ${this.noResultsText()}
        </div>
      `,this.showResults();return}let i="";e&&(i+=`
        <div class="p-2 border-b border-gray-200 dark:border-gray-700">
          <div class="flex items-center justify-between px-2">
            <span class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
              ${this.legislationLabel()}
            </span>
            <a href="/?q=${encodeURIComponent(t.query)}" class="text-xs text-[var(--accent-600)] hover:underline">
              ${this.viewAllText()}
            </a>
          </div>
          <div class="mt-1">
            ${t.legislation.map(f=>this.renderItem(f,"law")).join("")}
          </div>
        </div>
      `),s&&(i+=`
        <div class="p-2 ${n?"border-b border-gray-200 dark:border-gray-700":""}">
          <div class="flex items-center justify-between px-2">
            <span class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
              ${this.jurisprudenceLabel()}
            </span>
            <a href="/rechtspraak?q=${encodeURIComponent(t.query)}" class="text-xs text-[var(--accent-600)] hover:underline">
              ${this.viewAllText()}
            </a>
          </div>
          <div class="mt-1">
            ${t.jurisprudence.map(f=>this.renderItem(f,"case")).join("")}
          </div>
        </div>
      `),n&&(i+=`
        <div class="p-2">
          <div class="flex items-center justify-between px-2">
            <span class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide">
              ${this.parliamentaryLabel()}
            </span>
          </div>
          <div class="mt-1">
            ${t.parliamentary.map(f=>this.renderItem(f,"doc")).join("")}
          </div>
        </div>
      `),this.resultsTarget.innerHTML=i,this.showResults()}renderItem(t,e){const s=e==="law"?this.lawIcon():e==="case"?this.caseIcon():this.docIcon();return`
      <a href="${t.url}" class="flex items-start gap-2 px-2 py-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
        <span class="flex-shrink-0 mt-0.5 text-gray-400">${s}</span>
        <div class="min-w-0 flex-1">
          <div class="text-sm text-gray-900 dark:text-gray-100 truncate">${this.escapeHtml(t.title)}</div>
          <div class="text-xs text-gray-500 dark:text-gray-400 truncate">${this.escapeHtml(t.subtitle||"")}</div>
        </div>
      </a>
    `}lawIcon(){return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>'}caseIcon(){return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/></svg>'}docIcon(){return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>'}showResults(){this.resultsTarget.classList.remove("hidden"),this.backdropTarget.classList.remove("hidden")}hideResults(){this.resultsTarget.classList.add("hidden"),this.backdropTarget.classList.add("hidden")}close(){this.hideResults()}handleKeydown(t){t.key==="Escape"&&(this.hideResults(),this.inputTarget.blur())}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}abortRequest(){this.abortController&&(this.abortController.abort(),this.abortController=null)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}get locale(){return document.documentElement.lang||"nl"}legislationLabel(){return this.locale==="fr"?"LÃ©gislation":"Wetgeving"}jurisprudenceLabel(){return this.locale==="fr"?"Jurisprudence":"Rechtspraak"}parliamentaryLabel(){return this.locale==="fr"?"Travaux parlementaires":"Parlementaire stukken"}viewAllText(){return this.locale==="fr"?"Voir tout â":"Bekijk alle â"}noResultsText(){return this.locale==="fr"?"Aucun rÃ©sultat trouvÃ©":"Geen resultaten gevonden"}}g($s,"targets",["input","results","backdrop"]),g($s,"values",{url:String});const Ac=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"}));class zs extends H{connect(){this.boundOutside=this.handleOutsideClick.bind(this),this.boundKeydown=this.handleKeydown.bind(this),this.boundMenuClick=this.onMenuClick.bind(this),this.portaled=!1,this.placeholder=null,this.simpleFixed=!1,this.menuEl=this.hasMenuTarget?this.menuTarget:null,this.buttonEl=this.hasButtonTarget?this.buttonTarget:null;try{console.debug("jump-select: connect",{element:this.element})}catch{}}toggle(t){if(t.preventDefault(),!this.menuEl)try{console.warn("jump-select: no menuEl")}catch{}const e=this.menuEl?this.menuEl.classList.contains("hidden"):!0;try{console.debug("jump-select: toggle",{hidden:e})}catch{}e?this.open():this.close()}open(){var e,s,n;try{console.debug("jump-select: open")}catch{}(e=this.menuEl)==null||e.classList.remove("hidden"),(s=this.buttonEl)==null||s.setAttribute("aria-expanded","true"),document.addEventListener("click",this.boundOutside,{capture:!0}),document.addEventListener("keydown",this.boundKeydown,{capture:!0}),this.portalMenu(),(n=this.menuEl)==null||n.addEventListener("click",this.boundMenuClick);const t=this.menuEl;if(t){try{t.style.willChange="opacity, transform"}catch{}try{t.style.transformOrigin="top right"}catch{}try{t.style.transition="opacity 120ms ease-out, transform 120ms ease-out"}catch{}try{t.style.opacity="0",t.style.transform="scale(0.98)"}catch{}requestAnimationFrame(()=>{try{t.style.opacity="1",t.style.transform="scale(1)"}catch{}})}}close(){var e,s;try{console.debug("jump-select: close")}catch{}(e=this.buttonEl)==null||e.setAttribute("aria-expanded","false"),document.removeEventListener("click",this.boundOutside,{capture:!0}),document.removeEventListener("keydown",this.boundKeydown,{capture:!0}),(s=this.menuEl)==null||s.removeEventListener("click",this.boundMenuClick);const t=this.menuEl;if(t&&this.portaled){const n=()=>{t.removeEventListener("transitionend",n),this.finalizeClose()};try{t.style.transition="opacity 120ms ease-in, transform 120ms ease-in"}catch{}try{t.style.willChange="opacity, transform"}catch{}requestAnimationFrame(()=>{try{t.style.opacity="0",t.style.transform="scale(0.98)"}catch{}}),this._closeTimeout=setTimeout(n,160),t.addEventListener("transitionend",n,{once:!0})}else this.finalizeClose()}finalizeClose(){var t;if(this._closeTimeout){try{clearTimeout(this._closeTimeout)}catch{}this._closeTimeout=null}try{(t=this.menuEl)==null||t.classList.add("hidden")}catch{}if(this.menuEl)try{this.menuEl.style.transition="",this.menuEl.style.willChange="",this.menuEl.style.opacity="",this.menuEl.style.transform=""}catch{}this.unportalMenu()}handleOutsideClick(t){const e=this.element.contains(t.target),s=this.portaled&&this.menuEl&&this.menuEl.contains(t.target);!e&&!s&&this.close()}handleKeydown(t){var e;t.key==="Escape"&&(this.close(),(e=this.buttonEl)==null||e.focus())}go(t){t.preventDefault();const e=t.currentTarget.getAttribute("data-target"),s=document.querySelector(e);try{console.debug("jump-select: go",{target:e})}catch{}this.navigateToTarget(e,s)}onMenuClick(t){var i;const e=t.target.closest('[role="menuitem"][data-target]');if(!e||!((i=this.menuEl)!=null&&i.contains(e)))return;t.preventDefault();const s=e.getAttribute("data-target"),n=document.querySelector(s);try{console.debug("jump-select: go (delegated)",{target:s})}catch{}this.navigateToTarget(s,n)}navigateToTarget(t,e){this.close(),e&&(t.startsWith("#")?window.location.hash=t:e.id?window.location.hash=`#${e.id}`:e.scrollIntoView({behavior:"smooth",block:"start"}))}portalMenu(){var s;if(this.portaled){this.positionPortaledMenu();return}if(!this.menuEl){try{console.error("jump-select: portalMenu called without menuEl")}catch{}return}this.placeholder=document.createComment("jump-select-menu"),(s=this.menuEl)==null||s.after(this.placeholder),this.menuEl&&this.menuEl.parentNode&&document.body.appendChild(this.menuEl),this.menuEl.style.position="fixed",this.menuEl.style.left="auto",this.menuEl.style.transform="none",this.menuEl.style.zIndex=this.menuEl.style.zIndex||"999",this.portaled=!0;const t=this.hasFallbackValue?this.fallbackValue:!1,e=window.innerWidth<768;if(t||e){this.simpleFixed=!0;try{this.positionSimpleFixed()}catch{}requestAnimationFrame(()=>{try{this.positionSimpleFixed()}catch{}}),setTimeout(()=>{try{this.positionSimpleFixed()}catch{}},50)}else(()=>{try{this.positionPortaledMenu()}catch{}requestAnimationFrame(()=>{try{this.positionPortaledMenu()}catch{}}),setTimeout(()=>{try{this.positionPortaledMenu()}catch{}},50)})();this.boundReposition=()=>{this.simpleFixed?this.positionSimpleFixed():this.positionPortaledMenu()},window.addEventListener("resize",this.boundReposition),window.addEventListener("scroll",this.boundReposition,{passive:!0})}unportalMenu(){if(!(!this.portaled||!this.menuEl)){try{window.removeEventListener("resize",this.boundReposition)}catch{}try{window.removeEventListener("scroll",this.boundReposition)}catch{}this.placeholder&&this.placeholder.parentNode&&(this.placeholder.parentNode.insertBefore(this.menuEl,this.placeholder),this.placeholder.remove(),this.placeholder=null);try{this.menuEl.style.position="",this.menuEl.style.left="",this.menuEl.style.right="",this.menuEl.style.top="",this.menuEl.style.bottom="",this.menuEl.style.maxHeight="",this.menuEl.style.overflowY="",this.menuEl.style.zIndex="",this.menuEl.style.transform=""}catch{}this.portaled=!1,this.simpleFixed=!1}}positionPortaledMenu(){if(!this.portaled)return;const t=this.buttonEl;if(!t)return;const e=t.getBoundingClientRect(),s=this.menuEl,n=10,i=Math.max(8,window.innerWidth-e.right),a=s.offsetHeight||s.scrollHeight||0;let l=e.top-a-n,d="above";l<8&&(l=e.bottom+n,d="below");const f=d==="below"?Math.max(120,window.innerHeight-l-8):Math.max(120,e.top-n-8);s.style.right=`${i}px`,s.style.top=`${Math.max(8,l)}px`,s.style.bottom="auto",s.style.maxHeight=`${Math.floor(f)}px`,s.style.overflowY="auto";try{console.debug("jump-select: positioned",{rect:e,right:i,top:l,placed:d,menuHeight:a,maxHeight:f})}catch{}}positionSimpleFixed(){if(!this.portaled)return;const t=this.menuEl,e=this.buttonEl;if(!t||!e)return;const s=e.getBoundingClientRect(),n=6,i=8,a=Math.max(i,window.innerWidth-s.right),l=t.offsetHeight||t.scrollHeight||0;let d=s.top-l-n,f="above";d<i&&(d=s.bottom+n,f="below");const m=f==="below"?Math.max(120,window.innerHeight-d-i):Math.max(120,s.top-n-i);t.style.position="fixed",t.style.left="auto",t.style.right=`${a}px`,t.style.top=`${Math.max(i,d)}px`,t.style.bottom="auto",t.style.maxHeight=`${Math.floor(m)}px`,t.style.overflowY="auto";try{console.debug("jump-select: simple-fixed positioned",{rect:s,right:a,top:d,placed:f,menuHeight:l,maxHeight:m})}catch{}}}g(zs,"targets",["menu","button"]),g(zs,"values",{fallback:Boolean});const Mc=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"}));class Us extends H{connect(){this.selectedIndex=-1,this.pendingKey=null,this.pendingTimeout=null,this.handleKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.handleKeyDown)}disconnect(){document.removeEventListener("keydown",this.handleKeyDown),this.pendingTimeout&&clearTimeout(this.pendingTimeout)}handleKeyDown(t){if(!this.enabledValue)return;const e=t.target,s=e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable||e.closest('[contenteditable="true"]'),n=t.key;if(n==="Escape"){this.handleEscape(t);return}if(s){(t.ctrlKey||t.metaKey)&&n==="k"&&(t.preventDefault(),this.focusSearch());return}if(this.pendingKey==="g")switch(this.clearPending(),n){case"h":t.preventDefault(),window.location.href="/";return;case"b":t.preventDefault(),this.goToBookmarks();return}switch(n){case"/":t.preventDefault(),this.focusSearch();break;case"k":t.ctrlKey||t.metaKey?(t.preventDefault(),this.focusSearch()):this.navigateResults(-1);break;case"j":this.navigateResults(1);break;case"Enter":this.openSelectedResult();break;case"b":this.toggleBookmark();break;case"?":t.shiftKey&&(t.preventDefault(),this.showHelp());break;case"g":this.setPending("g");break;case"p":t.ctrlKey||t.metaKey;break}}focusSearch(){const t=document.querySelector('input[name="q"], input[type="search"], #search-input');t&&(t.focus(),t.select())}navigateResults(t){const e=document.querySelectorAll("[data-law-result], .law-result, article[data-numac]");if(e.length===0)return;e.forEach(n=>n.classList.remove("keyboard-selected")),this.selectedIndex+=t,this.selectedIndex<0&&(this.selectedIndex=e.length-1),this.selectedIndex>=e.length&&(this.selectedIndex=0);const s=e[this.selectedIndex];s&&(s.classList.add("keyboard-selected"),s.scrollIntoView({behavior:"smooth",block:"nearest"}))}openSelectedResult(){const t=document.querySelector(".keyboard-selected");if(!t)return;const e=t.querySelector('a[href*="/laws/"]')||t.querySelector("a");e&&e.click()}toggleBookmark(){const t=document.querySelector('[data-controller="bookmark"] [data-action*="bookmark#toggle"]')||document.querySelector('[data-action*="bookmark#toggle"]');t&&t.click()}handleEscape(t){var s,n;if(this.hasHelpModalTarget&&!this.helpModalTarget.classList.contains("hidden")){t.preventDefault(),this.hideHelp();return}document.querySelectorAll('[data-dropdown-target="menu"]:not(.hidden), [aria-expanded="true"]').forEach(i=>{i.classList.add("hidden");const a=i.previousElementSibling;a&&a.setAttribute("aria-expanded","false")}),document.querySelectorAll(".keyboard-selected").forEach(i=>i.classList.remove("keyboard-selected")),this.selectedIndex=-1,(((s=document.activeElement)==null?void 0:s.tagName)==="INPUT"||((n=document.activeElement)==null?void 0:n.tagName)==="TEXTAREA")&&document.activeElement.blur()}showHelp(){var e;let t=document.getElementById("keyboard-shortcuts-modal");t||(t=this.createHelpModal(),document.body.appendChild(t)),t.classList.remove("hidden"),(e=t.querySelector("[data-dismiss]"))==null||e.focus()}hideHelp(){const t=document.getElementById("keyboard-shortcuts-modal");t&&t.classList.add("hidden")}goToBookmarks(){const t=document.querySelector('a[href*="bookmarks"]');if(t)t.click();else{const e=document.querySelector("[data-bookmarks-toggle]");e&&e.click()}}setPending(t){this.pendingKey=t,this.pendingTimeout&&clearTimeout(this.pendingTimeout),this.pendingTimeout=setTimeout(()=>this.clearPending(),1e3)}clearPending(){this.pendingKey=null,this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=null)}createHelpModal(){const t=document.documentElement.lang==="fr",e=[{key:"/",desc:t?"Rechercher":"Zoeken"},{key:"Ctrl+K",desc:t?"Rechercher (dans champ)":"Zoeken (in veld)"},{key:"j / k",desc:t?"Naviguer rÃ©sultats":"Navigeer resultaten"},{key:"Enter",desc:t?"Ouvrir sÃ©lection":"Open selectie"},{key:"b",desc:t?"Ajouter/supprimer signet":"Bladwijzer aan/uit"},{key:"Esc",desc:t?"Fermer / Annuler":"Sluiten / Annuleren"},{key:"g h",desc:t?"Aller Ã  l'accueil":"Ga naar home"},{key:"g b",desc:t?"Aller aux signets":"Ga naar bladwijzers"},{key:"?",desc:t?"Afficher aide":"Toon hulp"}],s=document.createElement("div");return s.id="keyboard-shortcuts-modal",s.className="fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",s.innerHTML=`
      <div class="bg-white dark:bg-navy rounded-xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-auto border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white">
            ${t?"Raccourcis clavier":"Sneltoetsen"}
          </h2>
          <button type="button" 
                  class="p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"
                  data-dismiss
                  onclick="document.getElementById('keyboard-shortcuts-modal').classList.add('hidden')">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        <div class="p-4 space-y-2">
          ${e.map(n=>`
            <div class="flex items-center justify-between py-1">
              <span class="text-sm text-gray-600 dark:text-gray-300">${n.desc}</span>
              <kbd class="px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-gray-700 dark:text-gray-300">${n.key}</kbd>
            </div>
          `).join("")}
        </div>
        <div class="p-4 border-t border-gray-200 dark:border-gray-700 text-center">
          <button type="button" 
                  class="px-4 py-2 text-sm font-medium text-white bg-[var(--accent-600)] hover:bg-[var(--accent-700)] rounded-lg transition-colors"
                  onclick="document.getElementById('keyboard-shortcuts-modal').classList.add('hidden')">
            ${t?"Fermer":"Sluiten"}
          </button>
        </div>
      </div>
    `,s.addEventListener("click",n=>{n.target===s&&s.classList.add("hidden")}),s}}g(Us,"targets",["helpModal"]),g(Us,"values",{enabled:{type:Boolean,default:!0}});const _c=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));class ci extends H{show(t){const e=document.createElement("div");e.className="fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-[9999] backdrop-blur-sm",e.innerHTML=`
      <div class="bg-white dark:bg-navy rounded-lg shadow-2xl p-8 max-w-md mx-4 border border-gray-200 dark:border-gray-700">
        <div class="flex flex-col items-center text-center">
          <svg class="animate-spin h-12 w-12 text-blue-500 dark:text-blue-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
            ${this.messageValue||"Loading..."}
          </h3>
          
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
            ${this.estimateValue||"This may take a moment"}
          </p>
          
          <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden">
            <div class="loading-bar h-full bg-blue-500 dark:bg-blue-400 rounded-full" style="animation: loading 2s ease-in-out infinite;"></div>
          </div>
        </div>
      </div>
      
      <style>
        @keyframes loading {
          0% { width: 0%; margin-left: 0%; }
          50% { width: 50%; margin-left: 25%; }
          100% { width: 0%; margin-left: 100%; }
        }
      </style>
    `,document.body.appendChild(e)}}g(ci,"values",{message:String,estimate:String});const Dc=Object.freeze(Object.defineProperty({__proto__:null,default:ci},Symbol.toStringTag,{value:"Module"}));class di extends H{connect(){this.requirements={length:{regex:/.{8,}/,text:"8+ characters"},uppercase:{regex:/[A-Z]/,text:"Uppercase letter"},lowercase:{regex:/[a-z]/,text:"Lowercase letter"},number:{regex:/[0-9]/,text:"Number"},special:{regex:/[^A-Za-z0-9]/,text:"Special character"}}}check(){const t=this.inputTarget.value,e=this.calculateStrength(t);this.updateMeter(e),this.updateRequirements(t)}calculateStrength(t){if(!t)return 0;let e=0;return t.length>=8&&(e+=1),t.length>=12&&(e+=1),t.length>=16&&(e+=1),/[a-z]/.test(t)&&(e+=1),/[A-Z]/.test(t)&&(e+=1),/[0-9]/.test(t)&&(e+=1),/[^A-Za-z0-9]/.test(t)&&(e+=2),Math.min(4,Math.floor(e/2))}updateMeter(t){if(!this.hasMeterTarget)return;const e=["bg-red-500","bg-orange-500","bg-yellow-500","bg-lime-500","bg-green-500"],s=["Very weak","Weak","Fair","Good","Strong"],n=["20%","40%","60%","80%","100%"];this.meterTarget.className="h-2 rounded-full transition-all duration-300",this.inputTarget.value?(this.meterTarget.classList.add(e[t]),this.meterTarget.style.width=n[t]):this.meterTarget.style.width="0%",this.hasTextTarget&&(this.textTarget.textContent=this.inputTarget.value?s[t]:"",this.textTarget.className=`text-xs mt-1 ${e[t].replace("bg-","text-")}`)}updateRequirements(t){if(!this.hasRequirementsTarget)return;let e="";for(const[s,n]of Object.entries(this.requirements)){const i=n.regex.test(t);e+=`<span class="${i?"text-green-600":"text-gray-400"} text-xs mr-3">${i?"â":"â"} ${n.text}</span>`}this.requirementsTarget.innerHTML=e}}g(di,"targets",["input","meter","text","requirements"]);const Oc=Object.freeze(Object.defineProperty({__proto__:null,default:di},Symbol.toStringTag,{value:"Module"}));class hi extends H{openOrCopy(t){const e=`praxis://contract?ref=${this.numacValue}`,s=document.createElement("iframe");s.style.display="none",s.src=e,document.body.appendChild(s);const n=Date.now();setTimeout(()=>{document.visibilityState==="visible"&&Date.now()-n>1500&&this.copyReference(),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},100)},1500);const a=()=>{document.visibilityState==="hidden"&&(document.removeEventListener("visibilitychange",a),s.parentNode&&s.parentNode.removeChild(s))};document.addEventListener("visibilitychange",a),t.preventDefault()}copyReference(){const t=document.documentElement.lang||"nl",e=`NUMAC ${this.numacValue} - ${this.titleValue}`;navigator.clipboard.writeText(e).then(()=>{this.showToast(t==="fr"?"RÃ©fÃ©rence copiÃ©e (Praxis non dÃ©tectÃ©)":"Referentie gekopieerd (Praxis niet gevonden)")}).catch(()=>{this.fallbackCopy(e,t)})}fallbackCopy(t,e){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.showToast(e==="fr"?"RÃ©fÃ©rence copiÃ©e (Praxis non dÃ©tectÃ©)":"Referentie gekopieerd (Praxis niet gevonden)")}catch{this.showToast(e==="fr"?"Erreur lors de la copie":"Fout bij kopiÃ«ren")}document.body.removeChild(s)}showToast(t){const e=document.querySelector(".praxis-toast");e&&e.remove();const s=document.createElement("div");s.className="praxis-toast fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in-up",s.textContent=t,document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},3e3)}}g(hi,"values",{numac:String,title:String});const Pc=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));class Fc extends H{isHighlightEnabled(){const t=localStorage.getItem("ww_show_highlight");return t===null||t==="true"}highlight(t){var d;if(!this.isHighlightEnabled())return;const e=this.element.dataset.refNumber;if(!e)return;const s=this.element.querySelectorAll(".reference");for(const f of s)if(f.matches(":hover")&&f.dataset.refNumber!==e)return;const n=this.element.closest("[data-article-scope]");if(!n)return;const i=(d=this.element.parentElement)==null?void 0:d.closest(".reference");if(i){const f=i.dataset.refNumber;f&&f!==e&&(n.querySelectorAll(`span.reference[data-ref-number="${f}"]`).forEach(w=>{w.classList.remove("reference-inline-highlighted")}),n.querySelectorAll(`div[data-ref-number="${f}"].text-sm`).forEach(w=>{w.classList.remove("reference-row-highlighted")}))}n.querySelectorAll(`span.reference[data-ref-number="${e}"]`).forEach(f=>{f.hasAttribute("data-ref-target")||f.classList.add("reference-inline-highlighted")}),n.querySelectorAll(`div[data-ref-number="${e}"].text-sm`).forEach(f=>{f.classList.add("reference-row-highlighted")})}unhighlight(t){var l;const e=this.element.dataset.refNumber;if(!e)return;const s=this.element.closest("[data-article-scope]");if(!s)return;s.querySelectorAll(`span.reference[data-ref-number="${e}"]`).forEach(d=>{d.classList.remove("reference-inline-highlighted")}),s.querySelectorAll(`div[data-ref-number="${e}"].text-sm`).forEach(d=>{d.classList.remove("reference-row-highlighted")});const a=(l=this.element.parentElement)==null?void 0:l.closest(".reference");if(a&&a.matches(":hover")){const d=a.dataset.refNumber;d&&d!==e&&(s.querySelectorAll(`span.reference[data-ref-number="${d}"]`).forEach(k=>{k.hasAttribute("data-ref-target")||k.classList.add("reference-inline-highlighted")}),s.querySelectorAll(`div[data-ref-number="${d}"].text-sm`).forEach(k=>{k.classList.add("reference-row-highlighted")}))}}highlightInline(t){if(!this.isHighlightEnabled())return;const e=this.element.dataset.refNumber;if(!e)return;const s=this.element.closest("[data-article-scope]");if(!s)return;s.querySelectorAll(`div[data-ref-number="${e}"].text-sm`).forEach(a=>{a.classList.add("reference-row-highlighted")}),s.querySelectorAll(`span.reference[data-ref-number="${e}"]`).forEach(a=>{a.hasAttribute("data-ref-target")||a.classList.add("reference-inline-highlighted")})}unhighlightInline(t){const e=this.element.dataset.refNumber;if(!e)return;const s=this.element.closest("[data-article-scope]");if(!s)return;s.querySelectorAll(`div[data-ref-number="${e}"].text-sm`).forEach(a=>{a.classList.remove("reference-row-highlighted")}),s.querySelectorAll(`span.reference[data-ref-number="${e}"]`).forEach(a=>{a.classList.remove("reference-inline-highlighted")})}}const Ic=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"}));class Ws extends H{connect(){document.getElementById("search-alert-modal")||this.createModal()}showModal(t){var s;t.preventDefault();const e=document.getElementById("search-alert-modal");e&&(e.classList.remove("hidden"),(s=document.getElementById("search-alert-email"))==null||s.focus())}hideModal(){const t=document.getElementById("search-alert-modal");t&&(t.classList.add("hidden"),this.clearMessages())}async submit(t){var d,f,m;t.preventDefault();const e=(d=document.getElementById("search-alert-email"))==null?void 0:d.value,s=((f=document.getElementById("search-alert-frequency"))==null?void 0:f.value)||"daily";if(!e||!this.isValidEmail(e)){this.showError(this.getLocale()==="fr"?"Veuillez entrer une adresse e-mail valide.":"Voer een geldig e-mailadres in.");return}const n=new URLSearchParams(window.location.search),i=n.get("title")||this.queryValue||"";if(!i){this.showError(this.getLocale()==="fr"?"Veuillez d'abord effectuer une recherche.":"Voer eerst een zoekopdracht uit.");return}const a={};["constitution","law","decree","ordinance","decision","misc","lang_nl","lang_fr","date_from","date_to"].forEach(k=>{n.has(k)&&(a[k]=n.get(k))});try{const k=await fetch("/api/search_alerts",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({email:e,query:i,filters:a,frequency:s})}),w=await k.json();k.ok&&w.success?(this.showSuccess(w.message),setTimeout(()=>this.hideModal(),3e3)):this.showError(((m=w.errors)==null?void 0:m.join(", "))||w.error||"Unknown error")}catch{this.showError(this.getLocale()==="fr"?"Erreur de connexion. Veuillez rÃ©essayer.":"Verbindingsfout. Probeer het opnieuw.")}}createModal(){const t=this.getLocale(),e=document.createElement("div");e.id="search-alert-modal",e.className="hidden fixed inset-0 z-50 overflow-y-auto",e.setAttribute("aria-modal","true"),e.setAttribute("role","dialog"),e.innerHTML=`
      <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" data-action="click->search-alert#hideModal"></div>
        
        <div class="relative bg-white dark:bg-navy rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full">
          <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-[var(--accent-100)] dark:bg-[var(--accent-900)] sm:mx-0 sm:h-10 sm:w-10">
                <svg class="h-6 w-6 text-[var(--accent-600)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                </svg>
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1">
                <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-mist">
                  ${t==="fr"?"Alertes de recherche":"Zoekwaarschuwingen"}
                </h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500 dark:text-gray-400">
                    ${t==="fr"?"Recevez un e-mail lorsque de nouvelles lois correspondent Ã  cette recherche.":"Ontvang een e-mail wanneer nieuwe wetten aan deze zoekopdracht voldoen."}
                  </p>
                </div>
                
                <form id="search-alert-form" class="mt-4 space-y-4" data-action="submit->search-alert#submit">
                  <div>
                    <label for="search-alert-email" class="block text-sm font-medium text-gray-700 dark:text-mist">
                      E-mail
                    </label>
                    <input type="email" id="search-alert-email" name="email" required
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-midnight dark:text-mist shadow-sm focus:border-[var(--accent-500)] focus:ring-[var(--accent-500)] sm:text-sm"
                           placeholder="${t==="fr"?"votre@email.com":"uw@email.com"}">
                  </div>
                  
                  <div>
                    <label for="search-alert-frequency" class="block text-sm font-medium text-gray-700 dark:text-mist">
                      ${t==="fr"?"FrÃ©quence":"Frequentie"}
                    </label>
                    <select id="search-alert-frequency" name="frequency"
                            class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-midnight dark:text-mist shadow-sm focus:border-[var(--accent-500)] focus:ring-[var(--accent-500)] sm:text-sm">
                      <option value="daily">${t==="fr"?"Quotidien":"Dagelijks"}</option>
                      <option value="weekly">${t==="fr"?"Hebdomadaire":"Wekelijks"}</option>
                    </select>
                  </div>
                  
                  <div id="search-alert-error" class="hidden text-sm text-red-600 dark:text-red-400"></div>
                  <div id="search-alert-success" class="hidden text-sm text-green-600 dark:text-green-400"></div>
                </form>
              </div>
            </div>
          </div>
          
          <div class="bg-gray-50 dark:bg-midnight px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2">
            <button type="submit" form="search-alert-form"
                    class="w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[var(--accent-600)] text-base font-medium text-white hover:bg-[var(--accent-700)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--accent-500)] sm:text-sm">
              ${t==="fr"?"S'abonner":"Abonneren"}
            </button>
            <button type="button" data-action="click->search-alert#hideModal"
                    class="mt-3 sm:mt-0 w-full sm:w-auto inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-navy text-base font-medium text-gray-700 dark:text-mist hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--accent-500)] sm:text-sm">
              ${t==="fr"?"Annuler":"Annuleren"}
            </button>
          </div>
        </div>
      </div>
    `,document.body.appendChild(e)}showError(t){this.clearMessages();const e=document.getElementById("search-alert-error");e&&(e.textContent=t,e.classList.remove("hidden"))}showSuccess(t){this.clearMessages();const e=document.getElementById("search-alert-success");e&&(e.textContent=t,e.classList.remove("hidden"))}clearMessages(){const t=document.getElementById("search-alert-error"),e=document.getElementById("search-alert-success");t&&(t.classList.add("hidden"),t.textContent=""),e&&(e.classList.add("hidden"),e.textContent="")}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}getLocale(){return document.documentElement.lang||"nl"}getCSRFToken(){var t;return((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""}}g(Ws,"targets",["modal","form","email","frequency","error","success"]),g(Ws,"values",{query:String,filters:Object});const Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"}));class ui extends H{validate(t){const e=[];this.anyChecked(this.typesTarget)||e.push({key:"types",el:this.typesTarget}),this.anyChecked(this.languagesTarget)||e.push({key:"languages",el:this.languagesTarget}),this.scopeSelected(this.scopeTarget)||e.push({key:"scope",el:this.scopeTarget}),e.length>0&&e.forEach(a=>this.highlight(a.el)),this.showImmediateLoadingUI()}anyChecked(t){if(!t)return!1;const e=t.querySelectorAll('input[type="checkbox"]');for(const s of e)if(s.checked)return!0;return!1}scopeSelected(t){if(!t)return!1;const e=t.querySelector('input[name="search_in_title"]'),s=t.querySelector('input[name="search_in_text"]'),n=!!(e&&e.checked),i=!!(s&&s.checked);return n||i}highlight(t){t&&(t.classList.add("ring-1","ring-red-700","dark:ring-red-700","ring-offset-2","ring-offset-white","dark:ring-offset-midnight"),setTimeout(()=>{t.classList.remove("ring-1","ring-red-700","dark:ring-red-700","ring-offset-2","ring-offset-white","dark:ring-offset-midnight")},1500))}showImmediateLoadingUI(){try{const t=document.querySelector("#search-status-mount"),e=document.querySelector("turbo-frame#laws_list");if(t&&t.querySelectorAll(".frame-status-progress, .frame-status-pill").forEach(s=>s.remove()),e){e.innerHTML="";const s=document.createElement("div");s.className="progress-top text-blue-600 dark:text-sky",e.appendChild(s);const n=document.createElement("div");n.className="ww-client-skeleton bg-white dark:bg-midnight rounded-xl shadow-lg p-6 space-y-3",["h-5 w-2/3","h-4 w-5/6","h-4 w-1/2","h-5 w-1/2","h-4 w-2/3","h-4 w-1/3"].forEach(a=>{const l=document.createElement("div");l.className=`skeleton ${a} rounded`,n.appendChild(l)}),e.appendChild(n)}}catch{}}}g(ui,"targets",["panel","types","languages","scope"]);const Bc=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"}));class Vc extends H{showToast(t){const e=document.querySelector(".section-expander-toast");e&&e.remove();const s=document.createElement("div");s.className="section-expander-toast fixed bottom-6 left-1/2 -translate-x-1/2 z-[9999] px-4 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium rounded-lg shadow-lg animate-fade-in-up",s.textContent=t,s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),document.body.appendChild(s),setTimeout(()=>{s.classList.add("animate-fade-out"),setTimeout(()=>s.remove(),300)},2e3)}expandAll(t){t==null||t.preventDefault();const e=document.getElementById("tekst");if(!e)return;e.querySelectorAll('.section-heading [data-controller*="collapse"] [data-collapse-target="button"]').forEach(n=>{const i=this.application.getControllerForElementAndIdentifier(n.closest('[data-controller*="collapse"]'),"collapse");i&&!i.expandedValue&&i.toggle()}),this.showToast("Alle secties uitgevouwen")}collapseAll(t){t==null||t.preventDefault();const e=document.getElementById("tekst");if(!e)return;e.querySelectorAll('.section-heading [data-controller*="collapse"] [data-collapse-target="button"]').forEach(n=>{const i=this.application.getControllerForElementAndIdentifier(n.closest('[data-controller*="collapse"]'),"collapse");i&&i.expandedValue&&i.toggle()}),this.showToast("Alle secties samengevouwen")}}const Nc=Object.freeze(Object.defineProperty({__proto__:null,default:Vc},Symbol.toStringTag,{value:"Module"})),Cs="wetwijzer_sidebar_auto_open";class fi extends H{connect(){const e=localStorage.getItem(Cs)==="1";this.hasCheckboxTarget&&(this.checkboxTarget.checked=e),this.dispatchPreference(e)}toggle(){if(!this.hasCheckboxTarget)return;const t=this.checkboxTarget.checked;localStorage.setItem(Cs,t?"1":"0"),this.dispatchPreference(t)}dispatchPreference(t){window.dispatchEvent(new CustomEvent("sidebar-auto-open-changed",{detail:{autoOpen:t}}))}static isAutoOpenEnabled(){return localStorage.getItem(Cs)==="1"}}g(fi,"targets",["checkbox"]);const jc=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"}));class mi extends H{connect(){var t,e,s,n,i,a;this.sync(),this.collapsedMobileClass="-translate-x-full",this.collapsedDesktopClass="ww-peek",this.peekVisiblePx=28,this.collapsedDesktopTransform=`translateX(calc(-100% + ${this.peekVisiblePx}px))`;try{const l=parseInt(this.element.getAttribute("data-sliver-nudge-y")||"-2",10);this.sliverNudgeYPx=Number.isFinite(l)?l:-2}catch{this.sliverNudgeYPx=-2}if(this.desktopMedia=window.matchMedia&&window.matchMedia("(min-width: 1024px)"),this.hasPanelTarget){try{this.desktopMedia&&this.desktopMedia.matches?(this.panelTarget.classList.remove("hidden"),this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedMobileClass),this.panelTarget.classList.add(this.collapsedDesktopClass),this.panelTarget.style.position="fixed",this.panelTarget.style.top="50%",this.panelTarget.style.bottom="auto",this.panelTarget.style.left="0px",this.panelTarget.style.zIndex="40",this.panelTarget.style.transform=`${this.collapsedDesktopTransform} translateY(-50%)`,this.panelTarget.style.pointerEvents="",this.panelTarget.style.cursor="ew-resize",this.setCollapsedInert(!0)):(this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedDesktopClass),this.panelTarget.classList.add(this.collapsedMobileClass),this.clearPeek(),this.panelTarget.style.pointerEvents="none",(this.buttonTargets&&this.buttonTargets.length?this.buttonTargets:this.hasButtonTarget?[this.buttonTarget]:[]).forEach(f=>f.style.pointerEvents="auto"))}catch{}this.sync()}this.handleMediaChange=((t=this.handleMediaChange)==null?void 0:t.bind(this))||(l=>this.onMediaChange(l)),this.handleTurboFrameLoad=((e=this.handleTurboFrameLoad)==null?void 0:e.bind(this))||(l=>this.onTurboFrameLoad(l)),this.handleKeydown=((s=this.handleKeydown)==null?void 0:s.bind(this))||(l=>this.onKeydown(l)),this.handleHashChange=((n=this.handleHashChange)==null?void 0:n.bind(this))||(l=>this.onHashChange(l)),this.openedOnce=!1,this.autoOpenConsumed=!1,this.didUserScroll=!1,this.suppressHashOpenUntil=0,this.onScroll=((i=this.onScroll)==null?void 0:i.bind(this))||(l=>this.handleScrollEvent(l)),this.suppressToggleUntil=0,this.computeMeasurements=((a=this.computeMeasurements)==null?void 0:a.bind(this))||(()=>this.recomputeMeasurements()),this.recomputeMeasurements(),this.desktopMedia&&this.desktopMedia.addEventListener&&this.desktopMedia.addEventListener("change",this.handleMediaChange),document.addEventListener("turbo:frame-load",this.handleTurboFrameLoad),document.addEventListener("keydown",this.handleKeydown),window.addEventListener("hashchange",this.handleHashChange),window.addEventListener("scroll",this.onScroll,{passive:!0}),window.addEventListener("resize",this.computeMeasurements,{passive:!0});try{this.handlePanelPointerDown=l=>{if(!(this.desktopMedia&&this.desktopMedia.matches)||!this.hasPanelTarget||l&&l.target&&l.target.closest&&l.target.closest('[data-sidebar-toggle-target="button"]'))return;if(!this.panelTarget.classList.contains("translate-x-0")){try{this.suppressToggleUntil=Date.now()+400}catch{}this.showDesktopPanel(),this.openedOnce=!0}},this.hasPanelTarget&&this.panelTarget.addEventListener("pointerdown",this.handlePanelPointerDown,{capture:!0}),this._tocCardEl=this.element.querySelector("#toc-card-sidebar"),this._tocCardEl&&(this.handleCardPointerDown=l=>{if(!(this.desktopMedia&&this.desktopMedia.matches)||!this.hasPanelTarget||l&&l.target&&l.target.closest&&l.target.closest('[data-sidebar-toggle-target="button"]'))return;if(!this.panelTarget.classList.contains("translate-x-0")){try{this.suppressToggleUntil=Date.now()+400}catch{}this.showDesktopPanel(),this.openedOnce=!0;try{l.stopPropagation(),l.preventDefault()}catch{}}},this._tocCardEl.addEventListener("pointerdown",this.handleCardPointerDown,{capture:!0}))}catch{}try{this.edgeClosePx=48,this.handlePanelClick=l=>{}}catch{}try{this.handlePanelPointerMove=l=>{if(!(this.desktopMedia&&this.desktopMedia.matches)||!this.hasPanelTarget)return;this.panelTarget.classList.contains("translate-x-0")?this.panelTarget.style.cursor="":this.panelTarget.style.cursor="ew-resize"},this.handlePanelPointerLeave=()=>{if(!(this.desktopMedia&&this.desktopMedia.matches)||!this.hasPanelTarget)return;this.panelTarget.classList.contains("translate-x-0")?this.panelTarget.style.cursor="":this.panelTarget.style.cursor="ew-resize"},this.hasPanelTarget&&(this.panelTarget.addEventListener("pointermove",this.handlePanelPointerMove,{capture:!0}),this.panelTarget.addEventListener("pointerleave",this.handlePanelPointerLeave,{capture:!0}))}catch{}this.hasBackdropTarget&&this.backdropTarget.addEventListener("click",()=>this.hideMobilePanel());try{this.handlePanelOutsideClick=l=>{if(this.desktopMedia&&this.desktopMedia.matches||!this.hasPanelTarget)return;const f=this.panelTarget.querySelector("#toc-card-sidebar");if(!f)return;l.target&&(l.target===f||l.target.closest&&l.target.closest("#toc-card-sidebar"))||this.hideMobilePanel()},this.hasPanelTarget&&this.panelTarget.addEventListener("click",this.handlePanelOutsideClick,{capture:!0})}catch{}try{this.handlePanelInnerClick=l=>{if(!this.hasPanelTarget)return;const d=this.desktopMedia&&this.desktopMedia.matches,f=l&&l.target&&l.target.closest&&l.target.closest("#toc-card-sidebar .toc-navigation a.toc-link");if(!(!d&&!f)&&!d){try{this.suppressHashOpenUntil=Date.now()+800}catch{}try{this.autoOpenConsumed=!0}catch{}try{setTimeout(()=>{try{this.hideMobilePanel()}catch{}},0)}catch{}}},this.hasPanelTarget&&this.panelTarget.addEventListener("click",this.handlePanelInnerClick,{capture:!0})}catch{}}updateSliverHandlePosition(){try{if(!this._sliverHandleEl||!this.hasPanelTarget)return;!this.panelTarget.classList.contains("translate-x-0")?(this._sliverHandleEl.style.display="flex",this._sliverHandleEl.style.alignItems="center",this._sliverHandleEl.style.justifyContent="center"):(this._sliverHandleEl.style.display="",this._sliverHandleEl.style.alignItems="",this._sliverHandleEl.style.justifyContent="")}catch{}}toggle(t){if(!this.hasPanelTarget)return;const e=this.desktopMedia&&this.desktopMedia.matches;try{if(t&&typeof this.suppressToggleUntil=="number"&&Date.now()<this.suppressToggleUntil){try{t.stopPropagation(),t.preventDefault()}catch{}return}}catch{}if(e){if(this.panelTarget.classList.contains("translate-x-0"))this.hideDesktopPanel();else{this.showDesktopPanel(),this.openedOnce=!0;try{this.panelTarget.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch{}}this.userManuallyTouched=!0}else this.panelTarget.classList.contains("translate-x-0")?this.hideMobilePanel():this.showMobilePanel();try{this.suppressToggleUntil=0}catch{}}observeIfNeeded(){if(!this.hasTriggerTarget||!this.desktopMedia||!this.desktopMedia.matches)return;const t={root:null,rootMargin:"0px",threshold:0};if(this.io){try{this.io.disconnect()}catch{}this.io=null}this.io=new IntersectionObserver(e=>{var d,f;const s=e[0];if(!this.hasPanelTarget||!(this.desktopMedia&&this.desktopMedia.matches))return;if(!this.didUserScroll){this.sync();return}const i=((f=(d=this.triggerTarget)==null?void 0:d.getBoundingClientRect)==null?void 0:f.call(d))||{bottom:-1/0},a=!!(s&&s.isIntersecting),l=i.bottom>80;!this.autoOpenConsumed&&a&&l&&this.hasEligibleSectionHeading()&&(this.showDesktopPanel(),this.openedOnce=!0,this.autoOpenConsumed=!0,this.sync())},t);try{this.io.observe(this.triggerTarget)}catch{}}disconnect(){if(this.io){try{this.io.disconnect()}catch{}this.io=null}if(this.desktopMedia&&this.desktopMedia.removeEventListener)try{this.desktopMedia.removeEventListener("change",this.handleMediaChange)}catch{}try{document.removeEventListener("turbo:frame-load",this.handleTurboFrameLoad)}catch{}try{document.removeEventListener("keydown",this.handleKeydown)}catch{}try{this.hasPanelTarget&&this.handlePanelPointerDown&&this.panelTarget.removeEventListener("pointerdown",this.handlePanelPointerDown,{capture:!0})}catch{}try{this.hasPanelTarget&&this.handlePanelClick&&this.panelTarget.removeEventListener("click",this.handlePanelClick,{capture:!0})}catch{}try{this.hasPanelTarget&&this.handlePanelPointerMove&&this.panelTarget.removeEventListener("pointermove",this.handlePanelPointerMove,{capture:!0})}catch{}try{this.hasPanelTarget&&this.handlePanelPointerLeave&&this.panelTarget.removeEventListener("pointerleave",this.handlePanelPointerLeave,{capture:!0})}catch{}try{this.hasPanelTarget&&this.handlePanelOutsideClick&&this.panelTarget.removeEventListener("click",this.handlePanelOutsideClick,{capture:!0})}catch{}try{this.hasPanelTarget&&this.handlePanelInnerClick&&this.panelTarget.removeEventListener("click",this.handlePanelInnerClick,{capture:!0})}catch{}try{this._tocCardEl&&this.handleCardPointerDown&&this._tocCardEl.removeEventListener("pointerdown",this.handleCardPointerDown,{capture:!0})}catch{}try{window.removeEventListener("hashchange",this.handleHashChange)}catch{}try{window.removeEventListener("scroll",this.onScroll,{passive:!0})}catch{}try{window.removeEventListener("resize",this.computeMeasurements,{passive:!0})}catch{}}sync(){if(!this.hasPanelTarget)return;const t=this.panelTarget.classList.contains("translate-x-0"),e=t?"true":"false";this.buttonTargets&&this.buttonTargets.length?this.buttonTargets.forEach(s=>s.setAttribute("aria-expanded",e)):this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded",e);try{!(this.desktopMedia&&this.desktopMedia.matches)&&this.buttonTargets&&this.buttonTargets.length&&this.buttonTargets.forEach(n=>{n.hasAttribute("data-sidebar-toggle-floating")&&n.classList.remove("hidden")})}catch{}try{this.element.querySelectorAll("[data-sidebar-toggle-arrow]").forEach(n=>{t?n.classList.remove("rotate-180"):n.classList.add("rotate-180")})}catch{}}applyPeek(){try{this.desktopMedia&&this.desktopMedia.matches&&(this.panelTarget.style.width="",this.panelTarget.style.minWidth="",this.panelTarget.style.maxWidth="")}catch{}}clearPeek(){try{this.panelTarget.style.transform="",this.panelTarget.style.width="",this.panelTarget.style.minWidth="",this.panelTarget.style.maxWidth=""}catch{}}setCollapsedInert(t){try{this._tocCardEl||(this._tocCardEl=this.element.querySelector("#toc-card-sidebar"));const e=this._tocCardEl;if(!e)return;const s=e.querySelector(".toc-navigation");if(t){e.setAttribute("inert",""),e.style.pointerEvents="none",this.panelTarget.style.overflow="hidden",this.panelTarget.style.background="transparent",e.style.overflow="hidden",s&&(s.style.overflowY="hidden",s.style.maxHeight="");const n=e.querySelectorAll(".overflow-y-auto, .overflow-y-scroll"),i=e.querySelector('[data-controller="jump-select"]'),a=e.querySelector('label:has(input[type="checkbox"])');n.forEach(l=>l.style.overflow="hidden"),s&&(s.style.opacity="0",s.style.pointerEvents="none"),i&&(i.style.opacity="0",i.style.pointerEvents="none"),a&&(a.style.opacity="0",a.style.pointerEvents="none"),this.ensureSliverOverlays(),this._recenterRaf&&cancelAnimationFrame(this._recenterRaf),this._recenterRaf=requestAnimationFrame(()=>{this._recenterRaf=null,this.recomputeMeasurements()})}else{e.removeAttribute("inert"),e.style.pointerEvents="",this.panelTarget.style.overflow="",this.panelTarget.style.background="",e.style.overflow="",s&&(s.style.overflowY="auto",s.style.maxHeight="calc(100vh - 200px)");const n=e.querySelectorAll(".overflow-y-auto, .overflow-y-scroll"),i=e.querySelector('[data-controller="jump-select"]'),a=e.querySelector('label:has(input[type="checkbox"])');n.forEach(l=>l.style.overflow=""),s&&(s.style.opacity="",s.style.pointerEvents=""),i&&(i.style.opacity="",i.style.pointerEvents=""),a&&(a.style.opacity="",a.style.pointerEvents=""),this.removeSliverOverlays()}}catch{}}ensureSliverOverlays(){try{this._tocCardEl||(this._tocCardEl=this.element.querySelector("#toc-card-sidebar"));const t=this._tocCardEl;if(!t||!this.hasPanelTarget)return;const e=window.getComputedStyle(t),s=e.backgroundColor||"white",n=e.borderRadius||"",i=e.borderColor||"rgba(0,0,0,0.1)";if(this._sliverCoverEl)try{this._sliverCoverEl.style.right=`${this.peekVisiblePx}px`,this._sliverCoverEl.style.backgroundColor=s,this._sliverCoverEl.style.borderRadius=n}catch{}else{const a=document.createElement("div");a.className="ww-sliver-cover",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.bottom="0",a.style.right=`${this.peekVisiblePx}px`,a.style.zIndex="1000",a.style.pointerEvents="none",a.style.backgroundColor=s,a.style.borderRadius=n,getComputedStyle(t).position==="static"&&(t.style.position="relative"),t.insertBefore(a,t.firstChild),this._sliverCoverEl=a}if(!this._sliverHandleEl){const a=document.createElement("div");a.className="ww-sliver-handle",a.style.position="absolute",a.style.top="0",a.style.right="0",a.style.bottom="0",a.style.width=`${this.peekVisiblePx}px`,a.style.zIndex="1001",a.style.cursor="pointer",a.style.background="transparent",a.style.borderLeft="none",a.addEventListener("pointerdown",l=>{if(this.desktopMedia&&this.desktopMedia.matches){try{this.suppressToggleUntil=Date.now()+400}catch{}this.showDesktopPanel(),this.openedOnce=!0;try{l.stopPropagation(),l.preventDefault()}catch{}}},{capture:!0}),this.panelTarget.appendChild(a),this._sliverHandleEl=a}try{this._sliverHandleEl.style.width=`${this.peekVisiblePx}px`,this._sliverHandleEl.style.backgroundColor="transparent",this._sliverHandleEl.style.borderLeft="none",this._sliverHandleEl.style.zIndex="1001"}catch{}if(this.updateSliverHandlePosition(),this._sliverRightMaskEl)try{this._sliverRightMaskEl.style.width=`${this.peekVisiblePx}px`,this._sliverRightMaskEl.style.backgroundColor=s,this._sliverRightMaskEl.style.zIndex="1000"}catch{}else{const a=document.createElement("div");a.className="ww-sliver-right-mask",a.style.position="absolute",a.style.top="0",a.style.right="0",a.style.bottom="0",a.style.width=`${this.peekVisiblePx}px`,a.style.backgroundColor=s,a.style.pointerEvents="none",a.style.zIndex="1000",getComputedStyle(t).position==="static"&&(t.style.position="relative"),t.appendChild(a),this._sliverRightMaskEl=a}}catch{}}removeSliverOverlays(){var t,e,s;try{(t=this._sliverHandleEl)!=null&&t.parentNode&&(this._sliverHandleEl.parentNode.removeChild(this._sliverHandleEl),this._sliverHandleEl=null),(e=this._sliverCoverEl)!=null&&e.parentNode&&(this._sliverCoverEl.parentNode.removeChild(this._sliverCoverEl),this._sliverCoverEl=null),(s=this._sliverRightMaskEl)!=null&&s.parentNode&&(this._sliverRightMaskEl.parentNode.removeChild(this._sliverRightMaskEl),this._sliverRightMaskEl=null)}catch{}}onMediaChange(t){if(this.hasPanelTarget)if(t&&t.matches){this._lockTopOnce=void 0,this.panelTarget.classList.remove("hidden"),this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedMobileClass),this.panelTarget.classList.add(this.collapsedDesktopClass);try{this.panelTarget.style.position="fixed",this.panelTarget.style.top="50%",this.panelTarget.style.bottom="auto",this.panelTarget.style.left="0px",this.panelTarget.style.zIndex="40",this.panelTarget.style.transform=`${this.collapsedDesktopTransform} translateY(-50%)`,this.panelTarget.style.pointerEvents="",this.panelTarget.style.cursor="ew-resize"}catch{}try{this.updateSliverHandlePosition()}catch{}this.hasBackdropTarget&&this.backdropTarget.classList.add("hidden"),this.setCollapsedInert(!0),this.sync()}else{if(this._lockTopOnce=void 0,this.panelTarget.classList.contains("hidden")||this.panelTarget.classList.add("hidden"),this.io){try{this.io.disconnect()}catch{}this.io=null}this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedDesktopClass),this.panelTarget.classList.add(this.collapsedMobileClass),this.clearPeek();try{this.panelTarget.style.position="",this.panelTarget.style.top="",this.panelTarget.style.bottom="",this.panelTarget.style.left="",this.panelTarget.style.zIndex=""}catch{}try{this.panelTarget.style.pointerEvents="none",(this.buttonTargets&&this.buttonTargets.length?this.buttonTargets:this.hasButtonTarget?[this.buttonTarget]:[]).forEach(s=>s.style.pointerEvents="auto")}catch{}this.hasBackdropTarget&&this.backdropTarget.classList.add("hidden"),this.setCollapsedInert(!1),this.sync()}}onTurboFrameLoad(t){const e=t&&t.target;if(e&&e.id==="law_articles"&&this.isAutoOpenEnabled()&&!this.autoOpenConsumed)try{this.desktopMedia&&this.desktopMedia.matches&&this.hasEligibleSectionHeading()&&(this.showDesktopPanel(),this.openedOnce=!0,this.autoOpenConsumed=!0,this.sync())}catch{}}autoOpenIfToc(t){try{if(!(this.desktopMedia&&this.desktopMedia.matches)||this.openedOnce)return;this.hasEligibleSectionHeading()&&(this.showDesktopPanel(),this.openedOnce=!0,this.sync())}catch{}}hashTargetsArticle(){try{const t=window.location.hash||"";return/^#tekst$/i.test(t)?!0:/^#(?:art-[a-z0-9]+(?:-[a-z0-9]+)*|section-art-[a-z0-9]+(?:-[a-z0-9]+)*)$/i.test(t)}catch{return!1}}onHashChange(t){}handleScrollEvent(t){this.desktopMedia&&this.desktopMedia.matches&&(this.didUserScroll=!0,!(!this.hasTriggerTarget||!this.hasPanelTarget)&&(this.scrollTick||(this.scrollTick=window.requestAnimationFrame(()=>{this.scrollTick=null}))))}evaluateTriggerVisibility(){var t,e;try{if(!this.hasTriggerTarget||!this.hasPanelTarget)return;const s=((e=(t=this.triggerTarget)==null?void 0:t.getBoundingClientRect)==null?void 0:e.call(t))||{top:1/0,bottom:-1/0},n=s.bottom>0&&s.top<window.innerHeight,i=s.bottom>80;!this.autoOpenConsumed&&n&&i&&this.hasEligibleSectionHeading()&&(this.showDesktopPanel(),this.openedOnce=!0,this.autoOpenConsumed=!0,this.sync())}catch{}}hasEligibleSectionHeading(){try{const t=this.element.querySelector("#toc-card-sidebar .toc-navigation")||document.querySelector("#toc-card-sidebar .toc-navigation")||this.element.querySelector(".toc-navigation")||document.querySelector(".toc-navigation");if(!t)return!1;const e=Array.from(t.querySelectorAll("a.toc-link.font-medium"));if(!e.length)return!1;const s=/^\s*(BIJLAGE|BIJLAGEN)\b/i;return e.some(n=>{const i=(n.textContent||"").trim();return!s.test(i)})}catch{return!1}}isAutoOpenEnabled(){try{return localStorage.getItem("wetwijzer_sidebar_auto_open")==="1"}catch{return!1}}showMobilePanel(){if(this.hasPanelTarget){try{this.panelTarget.style.position="",this.panelTarget.style.top="",this.panelTarget.style.bottom="",this.panelTarget.style.left="",this.panelTarget.style.transform=""}catch{}this.panelTarget.classList.remove("hidden"),this.panelTarget.offsetWidth,this.panelTarget.classList.remove(this.collapsedMobileClass),this.panelTarget.classList.remove(this.collapsedDesktopClass),this.clearPeek(),this.panelTarget.classList.add("translate-x-0"),this.hasBackdropTarget&&this.backdropTarget.classList.remove("hidden");try{this.panelTarget.style.pointerEvents=""}catch{}this.sync()}}hideMobilePanel(){if(this.hasPanelTarget){try{this.panelTarget.style.position="",this.panelTarget.style.top="",this.panelTarget.style.bottom="",this.panelTarget.style.left="",this.panelTarget.style.transform=""}catch{}this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedDesktopClass),this.panelTarget.classList.add(this.collapsedMobileClass),this.clearPeek(),this.hasBackdropTarget&&this.backdropTarget.classList.add("hidden");try{this.panelTarget.style.pointerEvents="none",(this.buttonTargets&&this.buttonTargets.length?this.buttonTargets:this.hasButtonTarget?[this.buttonTarget]:[]).forEach(e=>e.style.pointerEvents="auto")}catch{}this.sync()}}onKeydown(t){this.desktopMedia&&this.desktopMedia.matches||t.key==="Escape"&&this.hideMobilePanel()}showDesktopPanel(){if(!this.hasPanelTarget)return;const t=this.panelTarget;t.style.transition="none",t.style.position="fixed",t.style.left="0px",t.style.top="50%",t.style.bottom="auto",t.style.zIndex="40",t.style.pointerEvents="",t.style.cursor="",t.style.transform=`${this.collapsedDesktopTransform} translateY(-50%)`,t.classList.remove("hidden"),t.classList.remove(this.collapsedMobileClass),t.classList.remove(this.collapsedDesktopClass),t.offsetWidth,requestAnimationFrame(()=>{t.style.transition="",requestAnimationFrame(()=>{t.style.transform="translateX(0) translateY(-50%)",t.classList.add("translate-x-0")})}),this.setCollapsedInert(!1),this.sync()}hideDesktopPanel(t=!1){if(this.hasPanelTarget){this.panelTarget.classList.remove("translate-x-0"),this.panelTarget.classList.remove(this.collapsedMobileClass),this.panelTarget.classList.add(this.collapsedDesktopClass);try{this.panelTarget.style.position="fixed",this.panelTarget.style.left="0px",this.panelTarget.style.top="50%",this.panelTarget.style.bottom="auto",this.panelTarget.style.zIndex="40",this.panelTarget.style.pointerEvents="",this.panelTarget.style.cursor="ew-resize",this.panelTarget.style.transform=`${this.collapsedDesktopTransform} translateY(-50%)`}catch{}try{this.updateSliverHandlePosition()}catch{}this.setCollapsedInert(!0),this.sync()}}recomputeMeasurements(){try{if(!(this.desktopMedia&&this.desktopMedia.matches)||!this.hasPanelTarget)return;if(this.panelTarget.classList.contains("translate-x-0"))this.updateExpandedFixedPosition();else{this.panelTarget.style.top="50%",this.panelTarget.style.bottom="auto",this.panelTarget.style.transform=`${this.collapsedDesktopTransform} translateY(-50%)`;try{this.updateSliverHandlePosition()}catch{}}}catch{}}readCurrentTop(){var t,e;try{if(!this.hasPanelTarget)return 0;const s=this.panelTarget.style.top,n=parseInt(s,10);if(Number.isFinite(n))return n;const i=((e=(t=this.panelTarget).getBoundingClientRect)==null?void 0:e.call(t))||{top:0};return Math.max(0,Math.round(i.top||0))}catch{return 0}}updateExpandedFixedPosition(){try{if(!this.hasPanelTarget)return;typeof this._lockTopOnce=="number"?(this.panelTarget.style.left="0px",this.panelTarget.style.top=`${this._lockTopOnce}px`,this.panelTarget.style.bottom="auto",this.panelTarget.style.transform="translateX(0)",this._lockTopOnce=void 0):(this.panelTarget.style.left="0px",this.panelTarget.style.top="50%",this.panelTarget.style.bottom="auto",this.panelTarget.style.transform="translateX(0) translateY(-50%)")}catch{}}}g(mi,"targets",["panel","button","trigger","backdrop"]);const Hc=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"}));class gi extends H{connect(){this.updateFiltersVisibility()}toggle(){this.updateFiltersVisibility(),this.updateCheckboxStyles()}updateFiltersVisibility(){this.hasJurisprudenceFiltersTarget&&this.hasJurisprudenceTarget&&(this.jurisprudenceTarget.checked?this.jurisprudenceFiltersTarget.classList.remove("hidden"):this.jurisprudenceFiltersTarget.classList.add("hidden")),this.hasParliamentaryFiltersTarget&&this.hasParliamentaryTarget&&(this.parliamentaryTarget.checked?this.parliamentaryFiltersTarget.classList.remove("hidden"):this.parliamentaryFiltersTarget.classList.add("hidden"))}updateCheckboxStyles(){if(this.hasLegislationTarget){const t=this.legislationTarget.closest("label");this.legislationTarget.checked?(t.classList.add("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.remove("border-gray-300","dark:border-gray-600")):(t.classList.remove("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.add("border-gray-300","dark:border-gray-600"))}if(this.hasJurisprudenceTarget){const t=this.jurisprudenceTarget.closest("label");this.jurisprudenceTarget.checked?(t.classList.add("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.remove("border-gray-300","dark:border-gray-600")):(t.classList.remove("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.add("border-gray-300","dark:border-gray-600"))}if(this.hasParliamentaryTarget){const t=this.parliamentaryTarget.closest("label");this.parliamentaryTarget.checked?(t.classList.add("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.remove("border-gray-300","dark:border-gray-600")):(t.classList.remove("border-blue-500","bg-blue-50","dark:bg-blue-900/30"),t.classList.add("border-gray-300","dark:border-gray-600"))}}}g(gi,"targets",["legislation","jurisprudence","parliamentary","jurisprudenceFilters","parliamentaryFilters"]);const qc=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"}));class pi extends H{connect(){this.updateStyles()}select(t){const e=t.currentTarget.dataset.source;if(this.hasInputTarget&&(this.inputTarget.value=e),e==="jurisprudence"){const s=this.element.querySelector('input[name="title"]'),n=s?s.value:"";window.location.href=`/rechtspraak${n?"?q="+encodeURIComponent(n):""}`;return}if(e==="parliamentary"){const s=this.element.querySelector('input[name="title"]'),n=s?s.value:"";window.location.href=`/parliamentary_work${n?"?q="+encodeURIComponent(n):""}`;return}this.updateStyles()}updateStyles(){const t=this.hasInputTarget?this.inputTarget.value:"legislation";this.btnTargets.forEach(e=>{e.dataset.source===t?(e.classList.add("bg-blue-600","text-white","dark:bg-blue-500"),e.classList.remove("text-gray-600","dark:text-gray-400","hover:bg-gray-100","dark:hover:bg-gray-700")):(e.classList.remove("bg-blue-600","text-white","dark:bg-blue-500"),e.classList.add("text-gray-600","dark:text-gray-400","hover:bg-gray-100","dark:hover:bg-gray-700"))})}}g(pi,"targets",["btn","input"]);const $c=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"}));class bi extends H{connect(){this.showPanel(0)}select(t){const e=parseInt(t.currentTarget.dataset.tabIndex,10);this.showPanel(e)}showPanel(t){this.tabTargets.forEach((e,s)=>{s===t?(e.classList.remove("border-transparent","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-300"),e.classList.add("border-blue-500","text-blue-600","dark:text-blue-400")):(e.classList.remove("border-blue-500","text-blue-600","dark:text-blue-400"),e.classList.add("border-transparent","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-300"))}),this.panelTargets.forEach((e,s)=>{s===t?e.classList.remove("hidden"):e.classList.add("hidden")})}}g(bi,"targets",["tab","panel"]);const zc=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"}));class Ks extends H{connect(){const t=this._getStoredTheme(),e=t||"original";this._applyTheme(e),t||this._storeTheme(e),this._onKeydown=s=>{s.key==="Escape"&&this.close()},document.addEventListener("keydown",this._onKeydown)}disconnect(){this._onKeydown&&document.removeEventListener("keydown",this._onKeydown)}toggle(t){t==null||t.preventDefault(),this.openValue?this.close():this.open()}open(){this.openValue=!0,this.panelTarget.classList.remove("hidden"),this.backdropTarget.classList.remove("hidden"),this._highlightActiveTheme()}close(){this.openValue=!1,this.panelTarget.classList.add("hidden"),this.backdropTarget.classList.add("hidden")}select(t){var s;const e=(s=t.params)==null?void 0:s.theme;e&&(this._applyTheme(e),this._storeTheme(e),this._syncToServer(e),this._highlightActiveTheme(),this.close(),document.dispatchEvent(new CustomEvent("accent:change",{detail:{theme:e}})))}_applyTheme(t){const e=document.documentElement;Array.from(e.classList).filter(s=>s.startsWith("theme-")).forEach(s=>e.classList.remove(s)),e.classList.add(`theme-${t}`),e.offsetHeight,document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""}_storeTheme(t){try{localStorage.setItem(this.storageKeyValue,t)}catch{}}_getStoredTheme(){try{return localStorage.getItem(this.storageKeyValue)}catch{return null}}_syncToServer(t){var s;const e=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content;e&&fetch("/account/preferences",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":e},body:JSON.stringify({theme_preference:t})}).catch(()=>{})}_highlightActiveTheme(){const t=this._getStoredTheme()||"original";this.buttonTargets.forEach(s=>{s.classList.remove("ring-2","ring-[var(--accent-500)]"),s.setAttribute("aria-pressed","false")});const e=this.buttonTargets.find(s=>s.dataset.themeSelectorThemeParam===t);e&&(e.classList.add("ring-2","ring-[var(--accent-500)]"),e.setAttribute("aria-pressed","true"))}}g(Ks,"targets",["panel","backdrop","button"]),g(Ks,"values",{storageKey:{type:String,default:"theme-accent"},open:{type:Boolean,default:!1}});const Uc=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"}));class yi extends H{connect(){this.handleInitialFragment()}handleInitialFragment(){const t=window.location.hash;t&&(this.isFrameLoaded()||this.loadFrameAndNavigate(t))}handleClick(t){const s=t.currentTarget.hash;if(!s)return;if(document.querySelector(s)){t.preventDefault(),this.navigateToHash(s);return}t.preventDefault(),this.loadFrameAndNavigate(s)}isFrameLoaded(){return this.hasFrameTarget?this.frameTarget.querySelector('[data-controller*="collapse"]')!==null:!1}loadFrameAndNavigate(t){if(!this.hasFrameTarget)return;const e=this.frameTarget;this.scrollToLoadingSection();const s=()=>{e.removeEventListener("turbo:frame-load",s),requestAnimationFrame(()=>{this.navigateToHash(t)})};e.addEventListener("turbo:frame-load",s),e.src&&e.reload()}scrollToLoadingSection(){const t=document.getElementById("tekst");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}navigateToHash(t){window.location.hash=t;const e=document.querySelector(t);e&&e.scrollIntoView({behavior:"auto",block:"start"})}}g(yi,"targets",["frame"]);const Wc=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"}));class vi extends H{connect(){this.handleClickOutside=this.handleClickOutside.bind(this),document.addEventListener("click",this.handleClickOutside)}disconnect(){document.removeEventListener("click",this.handleClickOutside)}toggle(t){if(t.stopPropagation(),this.hasMenuTarget)if(this.menuTarget.classList.contains("hidden")){if(this.hasButtonTarget){const s=this.buttonTarget.getBoundingClientRect();this.menuTarget.style.top=`${s.bottom+4}px`,this.menuTarget.style.left=`${s.left}px`}this.menuTarget.classList.remove("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded","true")}else this.menuTarget.classList.add("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded","false")}handleClickOutside(t){!this.element.contains(t.target)&&this.hasMenuTarget&&(this.menuTarget.classList.add("hidden"),this.hasButtonTarget&&this.buttonTarget.setAttribute("aria-expanded","false"))}}g(vi,"targets",["menu","button"]);const Kc=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}));class Wt extends H{disableBrokenTocLinks(){try{if(!this.sections||this.sections.length===0)return;const t=new Set((this.sections||[]).map(s=>s.link));(this.linkTargets||[]).forEach(s=>{if(t.has(s)){if(s.removeAttribute("aria-disabled"),!s.getAttribute("href")){const n=s.getAttribute("data-target");n&&s.setAttribute("href",`#${n}`)}s.classList.remove("opacity-60","pointer-events-none","cursor-default"),delete s.dataset.disabled}else s.setAttribute("aria-disabled","true"),s.dataset.disabled="true",s.removeAttribute("href"),s.classList.add("opacity-60","pointer-events-none","cursor-default")})}catch{}}getStorageKey(){return"ww.toc.follow.enabled"}getDebugKey(){return"ww.toc.debug"}isDebugEnabled(){try{const t=window.localStorage.getItem(this.getDebugKey());return t===null?!1:t==="1"||t==="true"}catch{return!1}}debugLog(){if(this.isDebugEnabled())try{console.log("[TOC DEBUG]",...arguments)}catch{}}exposeDiagnostics(){if(this.isDebugEnabled())try{const t=this;window.wwTocDiag=function(){const e=t._tocDiag||null;return e?(console.log("[TOC DEBUG] Diagnostics:",e),e):(console.log("[TOC DEBUG] No diagnostics collected yet"),null)}}catch{}}loadEnabledFromStorage(){try{const t=window.localStorage.getItem(this.getStorageKey());return t===null?null:t==="1"||t==="true"}catch{return null}}saveEnabledToStorage(t){try{window.localStorage.setItem(this.getStorageKey(),t?"1":"0")}catch{}}getHeaderOffset(){try{const t=this.sections&&this.sections[0]&&this.sections[0].element;if(t){const e=parseFloat(window.getComputedStyle(t).scrollMarginTop);if(!Number.isNaN(e)&&e>0)return e}}catch{}return 100}connect(){this.observer=null,this.currentActiveLink=null,this.sections=[],this.scrollTimeout=null,this.resizeTimeout=null,this.lastScrollTop=window.pageYOffset,this.rafId=null,this.initialized=!1,this.hashPriorityId=null,this.hashPriorityUntil=0;try{const t=this.loadEnabledFromStorage();t!==null&&(this.enabledValue=t)}catch{}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(()=>this.initialize(),100):document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>this.initialize(),100)});try{this.syncFollowCheckbox()}catch{}setTimeout(()=>this.syncFollowCheckbox(),150);try{this.handleTurboFrameLoad=t=>{try{const e=t&&t.target;if(!e)return;(e.id==="law_articles"||e.closest&&e.closest(".article-content"))&&this.refreshAfterFrameLoad()}catch{}},document.addEventListener("turbo:frame-load",this.handleTurboFrameLoad)}catch{}}disconnect(){this.cleanup();try{document.removeEventListener("turbo:frame-load",this.handleTurboFrameLoad)}catch{}}initialize(){if(this.enabledValue&&!this.initialized)try{this.initializeObserver(),this.initializeSections(),this.setupEventListeners(),this.activateByHash(window.location.hash),this.setInitialActiveSection(),this.observeSections(),this.initialized=!0}catch(t){console.error("TOC Tracker initialization error:",t)}}initializeObserver(){if(typeof IntersectionObserver>"u"){console.warn("IntersectionObserver is not supported in this browser");return}this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{root:null,rootMargin:this.rootMarginValue,threshold:Array.from({length:10},(t,e)=>e*this.thresholdValue)})}initializeSections(){var a;const t=this.linkTargets||[],e=[],s=new Set,n=[],i=this.isDebugEnabled()?{totalLinks:t.length,resolved:[],unresolved:[]}:null;for(let l=0;l<t.length;l++){const d=t[l];try{const f=d.getAttribute("data-target")||(d.getAttribute("href")||"").replace(/^.*#/,"");if(!f){i&&i.unresolved.push({reason:"no-target",href:d.getAttribute("href")||null,dataTarget:d.getAttribute("data-target")||null,text:(d.textContent||"").trim()});continue}const m=[f];f.startsWith("section-")?m.push(f.replace(/^section-/,"")):m.push(`section-${f}`);let k=null;for(const w of m){if(k=document.getElementById(w),!k&&/^section-/.test(w)){const C=w.replace(/-\d+$/,"");k=document.getElementById(C)||document.querySelector(`h2[id^="${C}-"]`)}if(k){const C=k.id;s.has(C)||(s.add(C),e.push({id:C,element:k,link:d,isIntersecting:!1,intersectionRatio:0}),i&&i.resolved.push({targetRaw:f,resolvedId:C,href:d.getAttribute("href")||null,dataTarget:d.getAttribute("data-target")||null,text:(d.textContent||"").trim()}));break}}k||(n.push({index:l,link:d,raw:f,candidates:m}),i&&i.unresolved.push({targetRaw:f,candidates:m,href:d.getAttribute("href")||null,dataTarget:d.getAttribute("data-target")||null,text:(d.textContent||"").trim()}))}catch{}}if(n.length>0)try{const l=new Map(e.map(d=>[d.link,d]));for(const d of n){const{index:f,link:m,raw:k}=d;if(!k||!/^section-/.test(k))continue;let w=null;for(let x=f+1;x<t.length;x++){const _=t[x],A=l.get(_);if(A&&A.element){w=A;break}}if(!w||!w.element||document.getElementById(k))continue;const C=document.createElement("span");C.id=k,C.className="block h-0 overflow-hidden scroll-mt-24 !mt-0";const S=w.element.parentNode;if(S&&S.insertBefore){S.insertBefore(C,w.element),e.push({id:C.id,element:C,link:m,isIntersecting:!1,intersectionRatio:0,aliasOf:w.id}),s.add(C.id);try{(a=this.observer)==null||a.observe(C)}catch{}i&&i.resolved.push({targetRaw:k,resolvedId:C.id,aliasedTo:w.id,href:m.getAttribute("href")||null,dataTarget:m.getAttribute("data-target")||null,text:(m.textContent||"").trim()}),l.set(m,{id:C.id,element:C,link:m})}}}catch{}if(this.sections=e,this.sections.forEach(l=>{var d;(d=this.observer)==null||d.observe(l.element)}),this.computeSectionTops(),this.disableBrokenTocLinks(),i)try{const l=new Map(this.sections.map(f=>[f.link,f])),d={totalLinks:t.length,resolved:[],unresolved:[]};for(const f of t){const m=f.getAttribute("data-target")||(f.getAttribute("href")||"").replace(/^.*#/,"");if(!m){d.unresolved.push({reason:"no-target",href:f.getAttribute("href")||null,dataTarget:f.getAttribute("data-target")||null,text:(f.textContent||"").trim()});continue}const k=l.get(f);k?d.resolved.push({targetRaw:m,resolvedId:k.id,href:f.getAttribute("href")||null,dataTarget:f.getAttribute("data-target")||null,text:(f.textContent||"").trim()}):d.unresolved.push({targetRaw:m,href:f.getAttribute("href")||null,dataTarget:f.getAttribute("data-target")||null,text:(f.textContent||"").trim()})}d.resolvedCount=d.resolved.length,d.unresolvedCount=d.unresolved.length,this._tocDiag=d,this.debugLog(`Resolved sections: ${d.resolvedCount} / ${d.totalLinks}; Unresolved: ${d.unresolvedCount}`),this.exposeDiagnostics()}catch{i.resolvedCount=i.resolved.length,i.unresolvedCount=i.unresolved.length,this._tocDiag=i,this.debugLog(`Resolved sections: ${i.resolvedCount} / ${i.totalLinks}; Unresolved: ${i.unresolvedCount}`),this.exposeDiagnostics()}}findLinkForSection(t){if(!t)return null;if(t.startsWith("section-")){const a=t.match(/^section-(art-.+)$/);if(a)return this.findLinkForSection(a[1])||null}const e=this.element.closest(".toc-navigation"),s=Array.from(e?e.querySelectorAll("a[href]"):document.querySelectorAll("a[href]"));let n=s.find(a=>{const l=a.getAttribute("href");return l&&(l===`#${t}`||l.endsWith(`#${t}`))});if(n||(n=s.find(a=>{const l=a.getAttribute("data-target");return l&&(l===t||l.endsWith(`#${t}`))}),n))return n;const i=t.toLowerCase();return n=s.find(a=>{var f,m;const l=(f=a.getAttribute("href"))==null?void 0:f.toLowerCase(),d=(m=a.getAttribute("data-target"))==null?void 0:m.toLowerCase();return l&&(l===`#${i}`||l.endsWith(`#${i}`))||d&&(d===i||d.endsWith(`#${i}`))}),n||(n=s.find(a=>{var f,m;const l=(f=a.getAttribute("href"))==null?void 0:f.toLowerCase(),d=(m=a.getAttribute("data-target"))==null?void 0:m.toLowerCase();return l&&l.includes(i)||d&&d.includes(i)})),n||null}createLinkForSection(t){if(!t.id)return null;const e=document.createElement("a");return e.href=`#${t.id}`,e.textContent=t.textContent.trim()||`Section ${t.id}`,e.classList.add("toc-link"),(this.element.querySelector(".toc-container")||this.element).appendChild(e),e}throttle(t,e){let s,n;return function(){const i=this,a=arguments;n?(clearTimeout(s),s=setTimeout(function(){Date.now()-n>=e&&(t.apply(i,a),n=Date.now())},e-(Date.now()-n))):(t.apply(i,a),n=Date.now())}}debounce(t,e){let s;return function(){const n=this,i=arguments;clearTimeout(s),s=setTimeout(()=>t.apply(n,i),e)}}setupEventListeners(){this.scrollHandler=this.throttle(this.handleScroll.bind(this),this.debounceDelayValue),this.resizeHandler=this.debounce(this.handleResize.bind(this),100),this.hashChangeHandler=this.handleHashChange.bind(this),this.clickHandler=this.handleTocClick.bind(this),window.addEventListener("scroll",this.scrollHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0}),window.addEventListener("hashchange",this.hashChangeHandler),this.element.addEventListener("click",this.clickHandler)}cleanup(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.observer&&this.observer.disconnect(),this.scrollTimeout&&(cancelAnimationFrame(this.scrollTimeout),this.scrollTimeout=null),this.resizeTimeout&&clearTimeout(this.resizeTimeout),window.removeEventListener("scroll",this.scrollHandler,{passive:!0}),window.removeEventListener("resize",this.resizeHandler,{passive:!0}),window.removeEventListener("hashchange",this.hashChangeHandler),this.element.removeEventListener("click",this.clickHandler),this.initialized=!1}syncFollowCheckbox(){try{if(this.hasFollowTarget){const t=!!this.enabledValue;this.followTarget.checked!==t&&(this.followTarget.checked=t)}}catch{}}handleScroll(){this.enabledValue&&(this.scrollTimeout&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{const t=window.pageYOffset||document.documentElement.scrollTop;Math.abs(t-this.lastScrollTop)>30&&(this.lastScrollTop=t,this.updateActiveSection())}))}handleResize(){this.enabledValue&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.computeSectionTops(),this.updateActiveSection()},100))}handleHashChange(){this.activateByHash(window.location.hash)}handleTocClick(t){const e=t.target&&t.target.closest&&t.target.closest("a.toc-link");if(!e||!this.element.contains(e))return;const s=e.getAttribute("data-target")||(e.getAttribute("href")||"").replace(/^.*#/,"");if(!s)return;const n=/^section-/.test(s),i=s,a=n?s.replace(/^section-/,""):`section-${s}`,l=document.getElementById(i)||document.getElementById(a);if(l){t.preventDefault(),l.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});try{const d=`#${i}`;window.history&&window.history.pushState?window.history.pushState({},"",d):window.location.hash=d}catch{}}this.updateActiveLink(e),this.hashPriorityId=/^section-art-/.test(i)?i.replace(/^section-/,""):i,this.hashPriorityUntil=Date.now()+this.hashPriorityMsValue}activateByHash(t){if(!t)return;const e=t.replace(/^#/,""),s=[e];e.startsWith("section-")?s.push(e.replace(/^section-/,"")):s.push(`section-${e}`);const n=this.element;let i=null;for(const a of s)if(i=n.querySelector(`a.toc-link[data-target='${a}']`)||n.querySelector(`a.toc-link[href$='#${a}']`),i)break;if(i){this.updateActiveLink(i);const a=/^section-art-/.test(e)?e.replace(/^section-/,""):e;this.hashPriorityId=a,this.hashPriorityUntil=Date.now()+this.hashPriorityMsValue}}scrollToCurrentHash(){try{const t=window.location.hash;if(!t)return;const e=t.replace(/^#/,""),s=[e];e.startsWith("section-")?s.push(e.replace(/^section-/,"")):s.push(`section-${e}`);let n=null;for(const a of s)if(n=document.getElementById(a),n)break;if(!n)return;n.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"});const i=/^section-art-/.test(e)?e.replace(/^section-/,""):e;this.hashPriorityId=i,this.hashPriorityUntil=Date.now()+this.hashPriorityMsValue}catch{}}handleIntersection(t){if(!this.enabledValue)return;let e=!1;t.forEach(s=>{const n=this.sections.find(i=>i.element===s.target);if(n){const i=n.isIntersecting;n.isIntersecting=s.isIntersecting,n.intersectionRatio=s.intersectionRatio,i!==n.isIntersecting&&(e=!0)}}),e&&this.updateActiveSection()}updateActiveSection(){if(!this.enabledValue)return;if(this.hashPriorityId&&Date.now()<this.hashPriorityUntil){const i=this.hashPriorityId;let a=this.sections.find(l=>l.id===i);if(a||(a=this.sections.find(l=>l.id===`section-${i}`)),a&&a.link){this.updateActiveLink(a.link),this.currentActiveSection=a;return}}if(this.sections.length===0&&(this.initializeSections(),this.sections.length===0))return;(!this.sectionTops||this.sectionTops.length!==this.sections.length)&&this.computeSectionTops();const t=window.pageYOffset||document.documentElement.scrollTop,e=this.getHeaderOffset(),s=t+e,n=this.findActiveByScroll(s);n&&n.link&&(this.updateActiveLink(n.link),this.currentActiveSection=n)}setInitialActiveSection(){if(this.sections.length===0)return;if(this.hashPriorityId&&Date.now()<this.hashPriorityUntil){const s=this.hashPriorityId;let n=this.sections.find(i=>i.id===s);if(n||(n=this.sections.find(i=>i.id===`section-${s}`)),n&&n.link){this.updateActiveLink(n.link),this.currentActiveSection=n;return}}const t=window.pageYOffset||document.documentElement.scrollTop;let e=this.sections[0];for(let s=this.sections.length-1;s>=0;s--){const n=this.sections[s],a=n.element.getBoundingClientRect().top+t,l=this.getHeaderOffset();if(a<=t+l){e=n;break}}e&&(this.updateActiveLink(e.link),this.currentActiveSection=e)}observeSections(){this.sections.forEach(t=>{this.observer.observe(t.element)})}computeSectionTops(){try{const t=window.pageYOffset||document.documentElement.scrollTop;this.sectionTops=this.sections.map(e=>({top:e.element.getBoundingClientRect().top+t,section:e})).sort((e,s)=>e.top-s.top)}catch{this.sectionTops=[]}}findActiveByScroll(t){var a;const e=this.sectionTops||[];if(e.length===0)return null;let s=0,n=e.length-1,i=-1;for(;s<=n;){const l=s+n>>1;e[l].top<=t?(i=l,s=l+1):n=l-1}return i>=0?e[i].section:((a=e[0])==null?void 0:a.section)||null}handleIntersectionLegacy(t){}updateActiveLink(t){this.currentActiveLink!==t&&(this.currentActiveLink&&this.removeActiveState(this.currentActiveLink),t&&(this.addActiveState(t),this.currentActiveLink=t,this.scrollToActiveLink(t)))}addActiveState(t){t&&(this.linkTargets.forEach(e=>this.removeActiveState(e)),t.classList.add("active"))}removeActiveState(t){t&&t.classList.remove("active")}scrollToActiveLink(t){const e=this.element,s=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(s.top<n.top||s.bottom>n.bottom){const i=t.offsetTop,a=e.clientHeight,l=t.offsetHeight,d=i-a/2+l/2;e.scrollTo({top:Math.max(0,d),behavior:"smooth"})}}refreshAfterFrameLoad(){if(this.enabledValue)try{this.cleanup(),this.initialized=!1,setTimeout(()=>{this.initialize(),this.computeSectionTops(),this.syncFollowCheckbox(),this.activateByHash(window.location.hash),this.scrollToCurrentHash(),this.disableBrokenTocLinks()},150)}catch{}}enabledValueChanged(){try{this.enabledValue?this.initialize():(this.cleanup(),this.currentActiveLink&&(this.removeActiveState(this.currentActiveLink),this.currentActiveLink=null)),this.saveEnabledToStorage(!!this.enabledValue),this.syncFollowCheckbox()}catch{}}toggleFollow(t){const e=!!(t&&t.target&&t.target.checked);this.enabledValue=e}}g(Wt,"targets",["link","follow"]),g(Wt,"linkTargets",["link"]),g(Wt,"values",{enabled:{type:Boolean,default:!0},rootMargin:{type:String,default:"0px 0px -80%"},threshold:{type:Number,default:.1},debounceDelay:{type:Number,default:50},hashPriorityMs:{type:Number,default:1500}});const Yc=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));class Jc extends H{constructor(){super(...arguments);g(this,"beforeCache",()=>{document.querySelectorAll(".loading-skeleton").forEach(e=>{e.remove()}),document.querySelectorAll(".progress-top").forEach(e=>{e.style.display="none"}),document.querySelectorAll("[data-frame-status-mount]").forEach(e=>{e&&(e.innerHTML="")}),document.querySelectorAll('[aria-expanded="true"]').forEach(e=>{e.closest("[data-turbo-permanent]")||e.setAttribute("aria-expanded","false")}),document.querySelectorAll('[data-sidebar-toggle-target="backdrop"]').forEach(e=>{(e.classList.contains("block")||!e.classList.contains("hidden"))&&(e.classList.remove("block"),e.classList.add("hidden"))})});g(this,"onLoad",()=>{document.body.style.overflow="",document.querySelectorAll("turbo-frame[busy]").forEach(e=>{e.removeAttribute("busy")})})}connect(){document.addEventListener("turbo:before-cache",this.beforeCache),document.addEventListener("turbo:load",this.onLoad)}disconnect(){document.removeEventListener("turbo:before-cache",this.beforeCache),document.removeEventListener("turbo:load",this.onLoad)}}const Gc=Object.freeze(Object.defineProperty({__proto__:null,default:Jc},Symbol.toStringTag,{value:"Module"}));var Xc=/^(?:.*?(?:controllers|components)\/|\.?\.\/)?(.+)(?:[/_-]controller\..+?)$/;function Zc(r,t){r.load(Qc(t))}function Qc(r){return Object.entries(r).map(ed).filter(t=>t)}function ed([r,t]){var e;const s=td(r),n=(e=t.default)!=null?e:t;if(s&&typeof n=="function")return{identifier:s,controllerConstructor:n}}function td(r){const t=(r.match(Xc)||[])[1];if(t)return t.replace(/_/g,"-").replace(/\//g,"--")}function sd(r,t){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>{r.apply(this,s)},t)}}const wi=class extends H{initialize(){this.submit=this.submit.bind(this)}connect(){this.delayValue>0&&(this.submit=sd(this.submit,this.delayValue))}submit(){this.element.requestSubmit()}};wi.values={delay:{type:Number,default:150}};let rd=wi;const Ti=Bl.start(),nd=Object.assign({"./article_exdecs_loader_controller.js":Ql,"./article_preferences_controller.js":ec,"./articles_loading_controller.js":tc,"./bookmark_controller.js":sc,"./bookmarks_page_controller.js":rc,"./chatbot_controller.js":nc,"./clipboard_controller.js":ic,"./collapse_controller.js":ac,"./collapsible_filters_controller.js":oc,"./cookie_consent_controller.js":lc,"./copy_reference_controller.js":cc,"./dark_mode_controller.js":dc,"./dropdown_controller.js":hc,"./export_feedback_controller.js":uc,"./filters_toggle_controller.js":fc,"./flatpickr_controller.js":Cc,"./frame_status_controller.js":Lc,"./global_search_controller.js":Ac,"./jump_select_controller.js":Mc,"./keyboard_shortcuts_controller.js":_c,"./loading_overlay_controller.js":Dc,"./password_strength_controller.js":Oc,"./praxis_link_controller.js":Pc,"./reference_highlight_controller.js":Ic,"./search_alert_controller.js":Rc,"./search_validation_controller.js":Bc,"./section_expander_controller.js":Nc,"./sidebar_auto_open_controller.js":jc,"./sidebar_toggle_controller.js":Hc,"./source_filters_controller.js":qc,"./source_toggle_controller.js":$c,"./tabs_controller.js":zc,"./theme_selector_controller.js":Uc,"./toc_anchor_controller.js":Wc,"./toc_options_controller.js":Kc,"./toc_tracker_controller.js":Yc,"./turbo_cache_controller.js":Gc});Zc(Ti,nd);Ti.register("auto-submit",rd);export{Po as T,Q as c,xn as s};
//# sourceMappingURL=application-N26a5RON.js.map
